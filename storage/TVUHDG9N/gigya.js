var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),gigya;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){e.legacyModal='<div id="gigya-screen-dialog-page-overlay" style="display:${overlayDisplay}"></div>\r\n<div class="gigya-screen-dialog-inner">\r\n    <div class="gigya-screen-dialog-top">\r\n        <div class="gigya-screen-dialog-caption" id="gigya-screen-dialog-caption-${modalID}">$title</div>\r\n        <div class="gigya-screen-dialog-close"></div>\r\n    </div>\r\n</div>'}(t=e.base||(e.base={}))}(t=e.html||(e.html={}))}(t=e.resources||(e.resources={}))}(t=e.plugins||(e.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={})),function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){e.modal='<div id="gigya-screen-dialog-page-overlay" style="display:${overlayDisplay}"></div>\r\n<div class="gigya-screen-dialog-main">\r\n    <div class="gigya-screen-dialog-top">\r\n        <div class="gigya-screen-dialog-caption" id="gigya-screen-dialog-caption-${modalID}">$title</div>\r\n        <div class="gigya-screen-dialog-close">\r\n            <a href="#">${closeImage}</a>\r\n        </div>\r\n    </div>\r\n    <div class="gigya-screen-dialog-inner">\r\n    </div>\r\n</div>\r\n'}(t=e.base||(e.base={}))}(t=e.html||(e.html={}))}(t=e.resources||(e.resources={}))}(t=e.plugins||(e.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={})),function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){e.modalCloseButton='<img src="${imgUrl}" alt="X" height="${imgHeight}" width="${imgWidth}" />\r\n'}(t=e.base||(e.base={}))}(t=e.html||(e.html={}))}(t=e.resources||(e.resources={}))}(t=e.plugins||(e.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={})),function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){e.legacy_modal="div.gigya-screen-dialog,div.gigya-screen-dialog-mobile{position:absolute;display:inline-block;background-color:#FFF}div.gigya-screen-dialog{top:25px;left:25px;border:8px solid #CCC;border-radius:8px;outline:0}div.gigya-screen-dialog-inner{border:1px solid #AAA}div.gigya-screen-dialog-close{line-height:33px;height:33px;width:20px;float:right;cursor:pointer;background-image:url(${imgBase}/accounts/close_dialog.png);background-position:right;background-repeat:no-repeat}div.gigya-screen-dialog-caption{float:left;font-weight:700;font-size:16px;font-family:arial}div.gigya-screen-dialog-mobile{top:0;left:0;width:100%}div.gigya-screen-dialog-top{overflow:hidden;zoom:1;background-color:#F3F3F3;line-height:33px;padding:0 10px 0 11px}#gigya-screen-dialog-page-overlay{width:100vw;height:100vh;background:#000;position:fixed;top:0;left:0;z-index:-1;filter:alpha(opacity=20);opacity:.2}"}(t=e.base||(e.base={}))}(t=e.css||(e.css={}))}(t=e.resources||(e.resources={}))}(t=e.plugins||(e.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={})),function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){e.modern_modal=".gigya-style-modern #gigya-screen-dialog-page-overlay{width:100vw;height:100vh;background:#000;position:fixed;top:0;left:0;z-index:-1;filter:alpha(opacity=20);opacity:.2}.gigya-style-modern div.gigya-screen-dialog-main{border:.5px;border-radius:3px;background-color:transparent;-webkit-box-shadow:0 3px 6px 0 rgba(0,0,0,.5);-moz-box-shadow:0 3px 6px 0 rgba(0,0,0,.5);box-shadow:0 3px 6px 0 rgba(0,0,0,.5);max-height:99vh;max-width:99vw;overflow:auto}.gigya-style-modern div.gigya-screen-dialog-top{overflow:hidden;zoom:1;background-color:#1371B9;line-height:38px;padding:0 10px 0 11px;border-radius:3px 3px 0 0}.gigya-style-modern div.gigya-screen-dialog-close{background-image:initial;background-position:initial;background-repeat:initial;float:right;cursor:pointer}.gigya-style-modern div.gigya-screen-dialog-close>a>img{margin-top:11px;vertical-align:initial;border:0;width:auto}.gigya-style-modern div.gigya-screen-dialog-caption{float:left;font-size:19px;font-family:arial;color:#FFF;padding-right:20px}.gigya-style-modern div.gigya-screen-dialog-inner{padding:0;overflow:hidden;min-width:32px;min-height:64px;background-color:#fff}.gigya-style-modern div.gigya-screen-dimmer{position:absolute;opacity:.2;filter:alpha(opacity=20);background-color:#FFF}.gigya-style-modern div.gigya-screen-loader{position:absolute;background:url(${imgBase}/accounts/bigLoader.gif) center center no-repeat;min-height:32px;min-width:32px}.gigya-style-modern.gigya-screen-dialog{position:fixed;border:none}.gigya-style-modern.gigya-screen-dialog-mobile{position:absolute;display:inline-block;top:0;left:0;background-color:#fff;width:100%;height:100%}.gigya-style-modern.gigya-screen-dialog-mobile div.gigya-screen-dialog-main{max-height:100vh;max-width:100vw;box-shadow:initial;overflow:visible}.gigya-style-modern.gigya-screen-dialog-mobile div.gigya-screen-dialog-top{position:fixed;top:0;border-radius:0;line-height:27px;box-sizing:border-box;width:100%;z-index:1}.gigya-style-modern.gigya-screen-dialog-mobile div.gigya-screen-dialog-caption{font-size:14px}.gigya-style-modern.gigya-screen-dialog-mobile div.gigya-screen-dialog-close>a>img{margin-top:5px}.gigya-style-modern.gigya-screen-dialog-mobile div.gigya-screen-dialog-inner{border:0;margin-top:27px;box-sizing:border-box}.gigya-style-modern.gigya-screen-dialog-mobile div.gigya-screen-dialog-inner>div{margin:0 auto}.gigya-style-modern.gigya-ios.gigya-ios-v7.gigya-screen-dialog-mobile div.gigya-screen-dialog-top,.gigya-style-modern.gigya-ios.gigya-screen-dialog{position:absolute}.gigya-style-modern.gigya-android.gigya-screen-dialog-mobile{overflow:auto}.gigya-style-modern.gigya-ie8 #gigya-screen-dialog-page-overlay{width:100%;height:100%}html.gigya-mobile-modal-mode{overflow:hidden}html.gigya-mobile-modal-mode body{height:0;overflow:hidden}"}(t=e.base||(e.base={}))}(t=e.css||(e.css={}))}(t=e.resources||(e.resources={}))}(t=e.plugins||(e.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(e){var t;!function(e){function t(e){return"gigya-style-"+i[e]}var i;!function(e){e[e._undefined=0]="_undefined",e[e.none=1]="none",e[e.legacy=2]="legacy",e[e.modern=3]="modern"}(i=e.PluginStyle||(e.PluginStyle={})),e.getPluginStyleClass=t}(t=e.plugins||(e.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var i=function(){function t(e){void 0===e&&(e="object"==typeof console&&console.log?console.log:function(){}),this._logger=e,this._intervalID=void 0,this._actions=[]}return t.prototype.addActions=function(){for(var t=this,i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.utils.array.forEach(i,function(e){t._actions.push(e)})},t.prototype.hasActions=function(){return this._actions.length>0},t.prototype.start=function(t,i){var n=this;if(void 0===i&&(i=!1),this.isStarted())return 1;if(!this.hasActions&&!i)throw"Poller has no actions to perform on interval";this._intervalID=setInterval(function(){e.utils.array.forEach(n._actions,function(e){e instanceof Function?e():e.act()})},t)},t.prototype.stop=function(){this._intervalID&&(clearInterval(this._intervalID),delete this._intervalID)},t.prototype.isStarted=function(){return Boolean(this._intervalID)},t.prototype.dispose=function(){this.stop();for(var e in this._actions)this._actions[e]instanceof Function||!this._actions.hasOwnProperty(e)||this._actions[e].dispose();delete this._actions,delete this._logger},t}();t.Poller=i}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var i;!function(t){var i;!function(t){var i=function(){function e(e,t,i){this._object=e,this._propery=t,this.callback=i}return e.prototype.act=function(){this._object[this._propery]||this.callback()},e.prototype.dispose=function(){delete this._object,delete this.callback},e}();t.InvalidPropertyAction=i;var n=function(){function e(e){this.callback=e,this._last={width:void 0,height:void 0}}return e.prototype.act=function(){var e=this.getCurrSize();this.isChanged(this._last,e)&&this.callback(this._last,e),this._last=e},e.prototype.dispose=function(){delete this.callback},e.prototype.getCurrSize=function(){},e.prototype.isChanged=function(e,t){return t.width!=this._last.width||t.height!=this._last.height},e}();t.SizeChangeAction=n;var o=function(e){function t(t,i){var n=e.call(this,i)||this;return n._container=t,n}return __extends(t,e),t.prototype.getCurrSize=function(){return{width:this._container&&this._container.style?this._container.clientWidth:void 0,height:this._container&&this._container.style?this._container.clientHeight:void 0}},t.prototype.dispose=function(){delete this._container,e.prototype.dispose.call(this)},t}(n);t.ContainerSizeAction=o;var a=function(t){function i(e){return t.call(this,e)||this}return __extends(i,t),i.prototype.getCurrSize=function(){var t=e.utils.viewport.getInnerSize(),i=e.utils.viewport.getOrientation();return{width:t.w,height:t.h,orientation:i}},i.prototype.isChanged=function(e,i){return t.prototype.isChanged.call(this,e,i)||e.orientation!=i.orientation},i}(n);t.ViewportSizeAction=a}(i=t.pollerActions||(t.pollerActions={}))}(i=t.plugins||(t.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var i;!function(t){var i=function(){function t(e){this._container=e,this._isActive=!1,this._dimmer=document.createElement("div"),this._dimmer.className="gigya-screen-dimmer",this._loader=document.createElement("div"),this._loader.className="gigya-screen-loader"}return t.prototype.show=function(){this._isActive||(e.logger.debug("showing loading indication"),this.setElementOverContainer(this._dimmer),this.setElementOverContainer(this._loader),this._container.insertBefore(this._dimmer,this._container.firstChild),this._container.insertBefore(this._loader,this._container.firstChild),this._isActive=!0)},t.prototype.setElementOverContainer=function(t){e.global.getPos(this._container);t.style.width=this._container.offsetWidth+"px",t.style.height=this._container.offsetHeight+"px",t.style.zIndex=""+e.utils.DOM._nextZIndex++},t.prototype.isActive=function(){return this._isActive},t.prototype.hide=function(){this._isActive&&(e.logger.debug("hiding loading indication"),this.unlinkElement(this._loader),this.unlinkElement(this._dimmer),this._isActive=!1)},t.prototype.unlinkElement=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},t.prototype.dispose=function(){this.hide(),delete this._container},t}();t.LoadDimmer=i}(i=t.plugins||(t.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var i;!function(t){var i;!function(t){t.dialogClasses={document_mobile:"gigya-mobile-modal-mode",all_web:"gigya-screen-dialog",all_mobile:"gigya-screen-dialog-mobile",main:"gigya-screen-dialog-main",caption:"gigya-screen-dialog-caption",closeButton:"gigya-screen-dialog-close",content:"gigya-screen-dialog-inner"},t.legacyDialogClasses=e.utils.object.clone(t.dialogClasses),t.legacyDialogClasses.main=t.legacyDialogClasses.content}(i=t.modal||(t.modal={}))}(i=t.plugins||(t.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var i;!function(i){var n;!function(n){var o="gigya-modal-plugin-container",a=function(t){function a(e,i,o,a,r){void 0===a&&(a=!1);var l=t.call(this,o)||this;return l._triggerMethod=e,l.isMobileUI=i,l.isLegacy=a,l.onWindowResizeEvent=l.onWindowResize.bind(l),l._dialogClasses=l.isLegacy?n.legacyDialogClasses:n.dialogClasses,l.create(r),l}return __extends(a,t),a.prototype.onAfterCenterEvent=function(){return this.getEvent("onAfterModalCenter")},a.prototype.getConfig=function(){return{defaultParams:{},requiredParams:["modalTemplate"]}},a.prototype.showAll=function(){this._allContainer||this.create(),this.center(),this.isMobileUI&&e.utils.DOM.addClassToElement(document.documentElement,this._dialogClasses.document_mobile),this._allContainer.style.visibility="visible",this._allContainer.focus(),e.utils.tabbable.bindTabLooping(this.getModalDialogContainer())},a.prototype.hideAll=function(){this._allContainer&&(this._allContainer.style.visibility="hidden",this.isMobileUI&&(this.removeWindowResizeListener(),document.documentElement.style.height="",e.utils.DOM.removeClassFromElement(document.documentElement,this._dialogClasses.document_mobile)),e.utils.tabbable.unbindTabLooping(this._contentContainer))},a.prototype.showMainDialog=function(){this._mainContainer&&(this._mainContainer.style.visibility="visible")},a.prototype.hideMainDialog=function(){this._mainContainer&&(this._mainContainer.style.visibility="visibile")},a.prototype.showLoading=function(){this._loader&&this._loader.show()},a.prototype.hideLoading=function(){this._loader&&this._loader.hide()},a.prototype.changeToMobile=function(){this._allContainer.className=this._dialogClasses.all_mobile},a.prototype.changeToWeb=function(){this._allContainer.className=this._dialogClasses.all_web},a.prototype.isLoading=function(){return this._loader&&this._loader.isActive()},a.prototype.resize=function(t){t&&(e.logger.debug("resizing and centering modal dialog"),this.applyStyle("height",t.height),this.applyStyle("minHeight",t.minHeight),this.applyStyle("width",t.width),this.applyStyle("minWidth",t.minWidth),this.center())},a.prototype.applyStyle=function(e,t){null===t?this._mainContainer.style[e]="":t&&(this._mainContainer.style[e]=t)},a.prototype.addWindowResizeListener=function(){e.utils.DOM.addEventListener(window,"resize",this.onWindowResizeEvent)},a.prototype.removeWindowResizeListener=function(){e.utils.DOM.removeEventListener(window,"resize",this.onWindowResizeEvent)},a.prototype.onWindowResize=function(){this.isMobileUI&&this.adjustWindowHeight()},a.prototype.adjustWindowHeight=function(){document.documentElement.style.height=window.getComputedStyle(this._allContainer).height},a.prototype.center=function(){if(this.isMobileUI)this.adjustWindowHeight(),this.addWindowResizeListener();else{var t=!1;if(this.isLoading()&&(this.hideLoading(),t=!0),"absolute"==e.global.getStyle(this._allContainer,"position")){var i=e.utils.viewport.getMiddleCenter(),n=this._allContainer.offsetWidth,o=this._allContainer.offsetHeight,a=i.top-Math.floor(o/2),r=i.left-Math.round(n/2);a<10&&(a=10),r<10&&(r=10),this._allContainer.style.top=a+"px",this._allContainer.style.left=r+"px"}else{var l=e.utils.viewport.getInnerSize(),s=Math.max(0,(l.h-this._allContainer.clientHeight)/2),d=Math.max(0,(l.w-this._allContainer.clientWidth)/2);this._allContainer.style.top=s.toString()+"px",this._allContainer.style.left=d.toString()+"px"}t&&this.showLoading()}this.dispatchEvent("onAfterModalCenter")},a.prototype.create=function(t){var n=this;void 0===t&&(t=!0);var a=e.utils.DOM.getCenteredDivID(this._triggerMethod);this.params.newModal&&(a+=(new Date).getTime()),this._allContainer=e.utils.DOM.createTopLevelDiv(a),t&&this.hideAll(),this._allContainer.innerHTML=e.utils.templates.fill(this.params.modalTemplate,{modalID:a,title:this.params.captionText,closeImage:this.params.closeImage,overlayDisplay:!this.isMobileUI&&this.params.dimDialogBackground?"block":"none"}),this._allContainer.setAttribute("role","dialog"),this._allContainer.setAttribute("aria-labelledby","gigya-screen-dialog-caption-"+a),this._allContainer.setAttribute("tabindex","-1"),i.utils.css.addCss(this.params.modalCss,void 0,!1),this._mainContainer=e.utils.DOM.getElementsByClass(this._allContainer,this._dialogClasses.main)[0],this._captionContainer=e.utils.DOM.getElementsByClass(this._mainContainer,this._dialogClasses.caption)[0],this._closeButtonElement=e.utils.DOM.getElementsByClass(this._mainContainer,this._dialogClasses.closeButton)[0],this._closeButtonElement&&e.utils.DOM.addEventListener(this._closeButtonElement,"click",function(t){e.utils.DOM.disableDefaultEventHandling(t),n.hideAll(),n.params.onModalClose&&n.params.onModalClose(i.CloseReasons.canceled)}),this._contentContainer=e.utils.DOM.getElementsByClass(this._mainContainer,this._dialogClasses.content,!0)[0],this._contentContainer.id=o+"-"+this._triggerMethod,this._loader=new i.LoadDimmer(this._contentContainer),this.isMobileUI?e.utils.DOM.addClassToElement(this._allContainer,this._dialogClasses.all_mobile):e.utils.DOM.addClassToElement(this._allContainer,this._dialogClasses.all_web),this.center()},a.prototype.getMainContainer=function(){return this._mainContainer},a.prototype.getContentContainer=function(){return this._contentContainer},a.prototype.getCaptionContainer=function(){return this._captionContainer},a.prototype.getModalDialogContainer=function(){return this._allContainer},a.prototype.getLoadingIndicator=function(){return this._loader},a.prototype.dispose=function(){this.hideAll(),this._allContainer&&this._allContainer.parentElement&&this._allContainer.parentElement.removeChild(this._allContainer),this._loader&&this._loader.dispose(),delete this.params,t.prototype.dispose.call(this)},a}(t.BaseObject);n.ModalDialog=a}(n=i.modal||(i.modal={}))}(i=t.plugins||(t.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){e[e.pendingError=0]="pendingError",e[e.missing=1]="missing",e[e.finished=2]="finished",e[e.canceled=3]="canceled",e[e.backButton=4]="backButton",e[e.canceledByParent=5]="canceledByParent",e[e.skip=6]="skip",e[e.error=7]="error"}(t=e.CloseReasons||(e.CloseReasons={}))}(t=e.plugins||(e.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var i;!function(i){i.cssFlags={};var n=function(n){function o(a,r,l){var s=n.call(this,a,r,!1)||this;return s.params=a,s.explicitParams=r,s.injectionInfo=l,s._pixelRatio=o.globalPixelRatio,s._imgBase=o.globalImgBase,s._imgExt="png",s.MOBILE_MODAL_MIN_WIDTH=400,s.lang=s.params.lang,s._style=i.PluginStyle.modern,s._poller=new t.Poller,s.POLL_INTERVAL=150,s.config=e.utils.object.merge([s.injectionInfo,s.getConfig()]),s.localizedJsName=s.getTranslationJsName(),s}return __extends(o,n),o.prototype.onRefreshExternalComponentsEvent=function(){return this.getEvent("onRefreshExternalComponentsEvent")},o.prototype.refreshExternalComponents=function(){this.dispatchPluginEvent("onRefreshExternalComponentsEvent")},o.prototype.getTranslationJsName=function(){var e=this.config.jsName;return e=e.split("_v")[0],e.indexOf(".js")===-1&&(e+=".js"),e},o.prototype.start=function(){var t=this;if(this.params.containerID||this.config.allowModal)if(this.params.containerID){if(this.container=document.getElementById(this.params.containerID),!this.container)return void this.dispatchInvalidParamError("containerID");this.container.innerHTML="",this.containerID=this.params.containerID}else this.isModal=!0,this.params=e.utils.object.merge([this.config.defaultModalParams,this.params]);else this.dispatchInvalidParamError("containerID");this.validateParams()&&e.logger.group("init "+this.injectionInfo.name+" ("+this.containerID+")").endWhen(new e.Promise(function(e){t.initUI(),t.params._noInit?(t.loadComplete(),e()):t.init(function(i){t.loadComplete(i),e()})}))},o.prototype.initUI=function(){var n=this;this._templates=i.resources.getTemplates(["base",this.config.name]),this._css=i.resources.getCss(["base",this.config.name]);var o=t.DeviceTypes._undefined;this.params.deviceType&&(o=t.DeviceTypes[this.params.deviceType.toLowerCase()]),o=o||this.getConfig().defaultDeviceType||t.DeviceTypes.desktop,this.params.deviceType=t.DeviceTypes[o],this.isMobileUI=o==t.DeviceTypes.mobile||o==t.DeviceTypes.auto&&e.localInfo.isMobile&&e.localInfo.isMobileApp,this.isRtl="he"==this.lang||"ar"==this.lang,this.initContainer(),this._style!=i.PluginStyle.none&&this.injectCss(),this._poller.addActions(new i.pollerActions.InvalidPropertyAction(this,"container",function(){return n.dispose()}))},o.prototype.loadComplete=function(e){var t=this;void 0===e&&(e=!0),e&&(this.dispatchPluginEvent("load"),this.container&&(this.isModal?(this._modalDialog&&!this.config.disableModalContainerInit&&this._modalDialog.showAll(),this.config.enableViewportPolling&&this._poller.addActions(new i.pollerActions.ViewportSizeAction(function(e,i){t.onViewportSizeChanged(e,i),t.centerModal(),t.refreshExternalComponents()}))):!this.config.enableSizePolling||this.params.width&&this.params.width.toString().indexOf("%",this.params.width.length-1)===-1||this._poller.addActions(new i.pollerActions.ContainerSizeAction(this.container,function(e,i){t.resizePlugin(e,i),t.refreshExternalComponents()})),this._poller.hasActions()&&this._poller.start(this.POLL_INTERVAL)))},o.prototype.initContainer=function(){this.isModal?this.initModalContainer():(e.utils.DOM.setSize(this.container,this.params.width,this.params.height,!1),this.addMetaDataClasses(this.container),this.params.responsive&&(this.container.style.width="auto"),this._loadingIndicator=new i.LoadDimmer(this.container))},o.prototype.initModalContainer=function(){this._style=this.getPluginStyle(),this.createModalDialog(),this._captionElement=this._modalDialog.getCaptionContainer(),this.container=this._modalDialog.getContentContainer(),this.containerID=this.container.id,this._loadingIndicator=this._modalDialog.getLoadingIndicator()},o.prototype.addMetaDataClasses=function(t){var n=this.getPluginStyle();switch(n){case i.PluginStyle.legacy:case i.PluginStyle.modern:e.utils.DOM.addClassToElement(t,i.getPluginStyleClass(n))}e.pluginUtils.DOM.addBrowserInfoClassesToElement(t)},o.prototype.getPluginStyle=function(){return i.PluginStyle[this.params.dialogStyle]||this.config.defaultDialogStyle||this._style},o.prototype.setContainerMinSize=function(){this.params.height&&"auto"!=this.params.height&&this.params.height.indexOf("%")==-1&&(this.container.style.minHeight=this.params.height+"px"),this.params.width&&"auto"!=this.params.width&&this.params.width.indexOf("%")==-1&&(this.container.style.minWidth=this.params.width+"px")},o.prototype.createModalDialog=function(){var t,n=this;t=this.params.captionText?this.params.captionText:this.params.captionTextKey?this.getText(this.params.captionTextKey):"&nbsp;";var o,a;a="undefined"!=typeof this.params.dimDialogBackground?this.params.dimDialogBackground:!(!this.config.defaultModalParams||"undefined"==typeof this.config.defaultModalParams.dimDialogBackground)&&this.config.defaultModalParams.dimDialogBackground;var r,l=this.params.modalCss,s=!1;if(!l)switch(this._style){case i.PluginStyle.modern:l=this.getCss().modern_modal,r=this.getPhotoFullName("gm/close");break;case i.PluginStyle.legacy:s=!0,l=this.getCss().legacy_modal,r=this._imgBase+"gm/CloseButton."+this._imgExt;break;case i.PluginStyle.none:l="",r=this.getPhotoFullName("gm/close");break;default:throw new Error("unrecognized dialog style")}l=e.utils.templates.fill(l,{imgBase:this._imgBase}),o=this.params.closeImage?this.params.closeImage:e.utils.templates.fill(this.getTemplates().modalCloseButton,{imgUrl:this.params.closeImageUrl||r,imgHeight:this.params.closeImageHeight||15,imgWidth:this.params.closeImageWidth||15}),this._modalDialog=new i.modal.ModalDialog(this.injectionInfo.methodName,this.isMobileUI,{modalTemplate:this.params.modalTemplate||(s?this.getTemplates().legacyModal:this.getTemplates().modal),modalCss:l,captionText:t,closeImage:o,dimDialogBackground:a,newModal:this.params.newModal,onModalClose:function(e){return n.close(i.CloseReasons[e])}},s),this.addMetaDataClasses(this._modalDialog.getModalDialogContainer());var d={key:27};e.utils.keyboard.onHotKeyClicked(d,function(){n.close()})},o.prototype.injectCss=function(){var t="",n=this.params.cssPrefix,o=this.getCss(),a=this.config.jsName;i.cssFlags[a]||(i.cssFlags[a]={});var r=i.cssFlags[a];!n&&this.addedCss||(t=this.addCssIfDidntLoad("reset",o,r,t),this.isRtl&&(t=this.addCssIfDidntLoad("resetRtl",o,r,t)),t=this.addCssIfDidntLoad("global",o,r,t),this.isRtl&&(t=this.addCssIfDidntLoad("globalRtl",o,r,t)),this.isMobileUI?(t=this.addCssIfDidntLoad("mobile",o,r,t),this.isRtl&&(t=this.addCssIfDidntLoad("mobileRtl",o,r,t))):(t=this.addCssIfDidntLoad("nonMobile",o,r,t),this.isRtl&&(t=this.addCssIfDidntLoad("nonMobileRtl",o,r,t))),t&&e._.plugins.utils.css.addCss(t,n),this.addedCss=!0),this.config.hasMobileUI&&this.isMobileUI&&this.container&&(this.container.style.width="100%")},o.prototype.init=function(e){this.error(t.BaseObject.NOT_IMPLEMENTED_ERROR,400096),e(!1)},o.prototype.resizePlugin=function(e,t){},o.prototype.onViewportSizeChanged=function(e,t){},o.prototype.shouldClose=function(){return!0},o.prototype.centerModal=function(){this._modalDialog&&!this.isMobileUI&&this._modalDialog.center()},o.prototype.resizeModal=function(e){if(this.isModal&&this._modalDialog&&!this.isMobileUI){this.getPluginStyle()===i.PluginStyle.legacy&&(e.height&&(e.minHeight=parseInt(e.height)+"px",delete e.height),e.width&&(e.minWidth=parseInt(e.width)+"px",delete e.width));({height:this.container.clientHeight,width:this.container.clientWidth});this._modalDialog.resize(e);({height:this.container.clientHeight,width:this.container.clientWidth});this.config.disableModalContainerInit||this.centerModal()}},o.prototype.getPhotoFullName=function(e,t,i,n){return void 0===t&&(t=this._pixelRatio),void 0===i&&(i=this._imgExt),void 0===n&&(n=this._imgBase),n+e+"_x"+t+"."+i},o.prototype.dispatchPluginEvent=function(t,i){return void 0===i&&(i={}),e.logger.info(this.injectionInfo.name+" dispatches "+t+" event:",i),this.dispatchEvent(t,i)},o.prototype.getTemplates=function(){return this._templates},o.prototype.getCss=function(){return this._css},o.prototype.addCssIfDidntLoad=function(e,t,i,n){return t[e]&&!i[e]?(i[e]=!0,n+=" "+t[e]):n},o.prototype.getText=function(t,i,n){var o=t;return o=this.params.customLang&&this.params.customLang[t]?this.params.customLang[t]:e.pluginUtils.lang.getLocalizedText(this.localizedJsName,t,this.lang),o.replace(i,n)},o.prototype.toString=function(){return this.params.containerID+"."+this.injectionInfo.name},o.prototype.error=function(e,t,i){void 0===t&&(t=300001);var n=i&&i.response&&i.response.statusMessage,o={statusMessage:n,errorMessage:e,errorCode:t,errorDetails:this.toString(),containerID:this.params.containerID,params:this.params,info:i};this.warn(e,i),this.dispatchErrorFromResponse(o)},o.prototype.close=function(t,i){i||(i={}),i.reason=t,this.dispatchPluginEvent("hide",i),e.logger.info("closing "+this.injectionInfo.name+" (reason: "+t+")"),this.shouldClose()&&this.dispose()},o.prototype.dispose=function(){this._isDisposed||(this._poller.dispose(),this.container&&(this.container.innerHTML=""),this._modalDialog&&this._modalDialog.dispose(),this._loadingIndicator&&this._loadingIndicator.dispose(),this.container=null,i.removePluginInstance(this.params,this.injectionInfo),n.prototype.dispose.call(this))},o.globalPixelRatio=window.devicePixelRatio?Math.min(Math.ceil(window.devicePixelRatio),3):1,o.globalImgBase=e._.getImgCdnResource(),o}(t.BaseObject);i.BasePlugin=n}(i=t.plugins||(t.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={})),gigya.socialize._AddJSRequest=function(servicedBy,methodName,needsContainer,params){if(!document.body){var args=arguments;return void window.setTimeout(function(){gigya.socialize._AddJSRequest.apply(this,args)},300)}params||(params={}),gigya.log.logCall(methodName.split(".").pop(),params);var containerID=params.containerID,blnCenter=!1,container;if(needsContainer?"undefined"==typeof containerID||""==containerID?(containerID=gigya.utils.DOM.getCenteredDivID(methodName),params.containerID=containerID,blnCenter=!0,params.isPopup=!0,container=document.getElementById(containerID),null==container&&(container=gigya.utils.DOM.createTopLevelDiv(containerID))):container=document.getElementById(containerID):(null==gigya.utils.DOM._pseudoContainers[containerID]&&(gigya.utils.DOM._pseudoContainers[containerID]={}),container=gigya.utils.DOM._pseudoContainers[containerID]),!container)return void gigya.events.dispatchInvalidParamError(params,"containerID");var localMethodName=methodName.split(".").pop();if(container.setAttribute&&container.setAttribute("gigid",(params.source&&params.source!=localMethodName?params.source+"_":"")+localMethodName),container.style){container.style.display="",container.style.visibility="",container.innerHTML="";var ifrel=document.getElementById("gigya_ifr_"+containerID);ifrel&&(ifrel.style.display="",ifrel.style.visibility="");var fncFixPosition=function(){null!=ifrel&&(gigya.utils.DOM.setSize(ifrel,params.width,params.height,blnCenter),ifrel.style.visibility="visible"),gigya.utils.DOM.setSize(container,params.width,params.height,blnCenter)};fncFixPosition()}var Reqs=container.Reqs?container.Reqs:container.Reqs=[],rid=Reqs.length+"@"+servicedBy+"@"+containerID;params.rid=rid;var operation=methodName;params._operation&&(operation=params._operation);for(var req=Reqs[Reqs.length]={rid:rid,servicedBy:servicedBy,container:container,method:methodName,context:params.context,c:params,p:params,i:params,operation:operation,isHTML:!0},methodNameParts=methodName.split("."),node=eval(methodNameParts[0]),pfxi=1;null!=(node=node[methodNameParts[pfxi]])&&++pfxi<methodNameParts.length;);var func=node;return gigya.utils.script.load(gigya._.getCdnResource("/js/"+servicedBy+".min.js"+(params.lang?"?lang="+params.lang:"")),null,function(){gigya.reports.reportLoad(methodName,params),gigya.utils.functions.callFunction(methodName,[params,params,params])},!0),containerID},gigya.socialize._parseRID=function(e){var t,i=e.split("@"),n=document.getElementById(i[2]+"_"+i[1]),o=i[2];null==(t=gigya.utils.DOM._pseudoContainers[o])&&(t=document.getElementById(i[2]));var a=null;null!=t&&(a=t.Reqs);var r=null;return null!=a&&(r=a[parseInt(i[0])]),{rid:e,container:t,Reqs:a,req:r,swf:n}};var gigya;!function(e){var t;!function(t){function i(t,i){if(void 0===i&&(i=0),i||(i=0),!t||0==t.length)return[];var n=t[i];if(i==t.length-1){for(var o=[],a=0;a<n.length;a++)o.push([n[a]]);return o}var o=[],r=e.global.getCombination(t,i+1);if(n)for(var a=0;a<n.length;a++)for(var l=0;l<r.length;l++)o.push([n[a]].concat(r[l]));return o}function n(t,i,n){for(var o=e.utils.array.getArrayFromString(t,",",!0),a=e.utils.array.getArrayFromString(i,",",!0),r=e.utils.array.getArrayFromString(n,",",!0),l=0;l<a.length;l++)e.utils.array.removeByValue(o,a[l]);for(var s=e._.providers.getProvidersByName(o.join(",")),l=0;l<a.length;l++)e.utils.array.removeByProperty(s,"name",a[l]);return e.socialize.getProvidersForRequiredCapabilities(s,r)}t.getCombination=i,t.resolveProviders=n}(t=e.global||(e.global={}))}(gigya||(gigya={})),function(e){var t;!function(t){var i;!function(t){function i(t){var i=e.utils.object.clone(t);return delete i.instanceID,delete i.getInstance,i}t.cloneParamsForPlugin=i}(i=t.object||(t.object={}))}(t=e.utils||(e.utils={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var i;!function(t){function i(t){var i=null;if(e.localInfo.isIE8)i=n(t);else{var o=/^(\d{4}\-\d\d\-\d\d([tT ][\d:\.]*)?)([zZ]|([+\-])(\d\d):(\d\d))?$/,a=o.exec(t)||[];if(a[1]){var r=Date.parse(t);i=new Date(r)}}return i}function n(e){var t,i,n=/^(\d{4}\-\d\d\-\d\d([tT ][\d:\.]*)?)([zZ]|([+\-])(\d\d):(\d\d))?$/,o=n.exec(e)||[];if(o[1]){t=o[1].split(/\D/);for(var a=0,r=t.length;a<r;a++)t[a]=parseInt(t[a],10)||0;return t[1]-=1,t=new Date(Date.UTC.apply(Date,t)),t.getDate()?(o[5]&&(i=60*parseInt(o[5],10),o[6]&&(i+=parseInt(o[6],10)),"+"==o[4]&&(i*=-1),i&&t.setUTCMinutes(t.getUTCMinutes()+i)),t):null}return null}t.getISODate=i}(i=t.date||(t.date={}))}(t=e.global||(e.global={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var i;!function(t){function i(t,i,n,o,a){if("te-st"==n)return"TEST_"+i.substring(0,10);n||(n="en");var r=e.i18n[t][n]?e.i18n[t][n][i]:e.i18n[t].en[i];return r&&o&&(r=r.replace(o,a)),r}t.getLocalizedText=i}(i=t.lang||(t.lang={}))}(t=e.pluginUtils||(e.pluginUtils={}))}(gigya||(gigya={}));
var gigya;!function(e){var t;!function(t){var i;!function(t){function i(t){return e.pluginUtils.validation.isEmailListValid(t)}function n(e){for(var t="((?=([^.].{0,63}@.{1,255}))([!#$%&'*+\\-\\/=?\\^_`{|}~a-zA-Z0-9}]{1,64}(\\.[!#$%&'*+\\-\\/=?\\^_`{|}~a-zA-Z0-9]{1,}){0,})@((\\[(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)(\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}\\])|([a-zA-Z0-9-]{1,63}(\\.[a-zA-Z0-9-]{1,63}){1,})))",i='(("[^<]+<('+t+')>")|(("[^"]*" *)?<('+t+")>)|("+t+"))",n=new RegExp(i),o=e.split(","),a=0;a<o.length;a++)if(!n.test(o[a]))return!1;return!0}t.isEmailValid=i,t.isEmailListValid=n}(i=t.validation||(t.validation={}));var n;!function(e){function t(e){if(void 0===e&&(e=void 0),e){var t="^"+e.replace(/\./g,"\\.").replace(/\*\\./g,"([a-zA-Z0-9]+\\.)*")+"$",i=new RegExp(t);return i.test(document.domain)}}e.isInDomain=t}(n=t.domain||(t.domain={}))}(t=e.pluginUtils||(e.pluginUtils={}))}(gigya||(gigya={})),function(e){var t;!function(e){function t(e){if(e.indexOf(" ")>=0)return!1;var t=e.split("@");if(2!=t.length)return!1;if(0==t[0].length)return!1;if(0==t[1].length)return!1;var i=t[1].split(".");if(i.length<2)return!1;for(var n=0;n<i.length;n++)if(0==i[n].length||i[n].indexOf(" ")>0)return!1;return!0}e.isEmail=t}(t=e.global||(e.global={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var i;!function(t){function i(e,t){void 0===t&&(t=1),void 0==e.style.opacity?e.style.filter="alpha(opacity=0)":e.style.opacity="0",window.setTimeout(function(){void 0==e.style.opacity?e.style.filter="alpha(opacity="+100*t+")":e.style.opacity=t+""},10)}function n(t){var i=e.global.getClassBordersAndPaddings(t.className),n=t.offsetHeight-i.h,o=t.style.transitionProperty;t.style.maxHeight="1px",t.style.transitionProperty=t.style.webkitTransitionProperty="max-height",window.setTimeout(function(){t.style.maxHeight=n+"px",t.style.transitionProperty=t.style.webkitTransitionProperty=o},100);var a=function(){t.style.maxHeight="999px",e.utils.DOM.removeEventListener(t,"transitionend",a),e.utils.DOM.removeEventListener(t,"webkitTransitionEnd",a)};e.utils.DOM.addEventListener(t,"transitionend",a),e.utils.DOM.addEventListener(t,"webkitTransitionEnd",a),window.setTimeout(a,500)}t.fadeIn=i,t.slideDown=n}(i=t.animation||(t.animation={}))}(t=e.pluginUtils||(e.pluginUtils={}))}(gigya||(gigya={})),function(e){var t;!function(t){function i(t,i,n){void 0===i&&(i=""),void 0===n&&(n=void 0),t&&(n||(n=parseInt(e.global.getStyle(t,"height"))),t.innerHTML='<div class="'+i+'" style="height:'+n+"px;background-image:url('"+e._.getCdnResource("/gs/i/gm/loader.gif")+"'); background-repeat:no-repeat;background-position:center center\"></div>")}function n(e){e.interval&&clearInterval(e.interval),e.style.opacity="0",e.interval=setInterval(function(){var t=parseFloat(e.style.opacity);t>=1&&clearInterval(e.interval),e.style.opacity=t+.1},10)}function o(t,i,n,o,a,r,l,s,d){var g=13,c=25;e.global.addedBalloonCSS||(e.global.addCSS([".gig-balloons *, div.gig-balloons, .gig-balloons span, .gig-balloons a:hover, .gig-balloons a:visited, .gig-balloons a:link, .gig-balloons a:active{","border:none; line-height:normal;padding:0px;margin:0px;color:inherit;text-decoration:none;width:auto;float:none;-moz-border-radius:0;border-radius:0;","font-family:arial;font-size:10px;color:#797979;background:none;text-align:left}","div.gig-balloon-frame {","zoom:1;padding:15px 10px 10px 10px; border:1px solid #b4b4b4; min-height:80px; background-color:#FFFFFF; z-index:"+e.utils.DOM._nextZIndex++ +";","box-shadow:0 0 5px RGBA(0,0,0,0.6);-webkit-box-shadow:0 0 5px RGBA(0,0,0,0.6);-moz-box-shadow:0 0 5px RGBA(0,0,0,0.6);}",'div.gig-balloon-nub {left:+1px; position:relative;background-image:url("'+e._.getCdnResource("/gs/i/gm/nub.png")+'");width:'+g+"px;height:"+c+"px; z-index:"+e.utils.DOM._nextZIndex++ +" }",'div.gig-balloon-nub-right { left:-1px; position:relative;background-image:url("'+e._.getCdnResource("/gs/i/gm/nub_right.png")+'");width:'+g+"px;height:"+c+"px; z-index:"+e.utils.DOM._nextZIndex++ +" }",'div.gig-balloon-nub-up { top:+1px; position:relative;background-image:url("'+e._.getCdnResource("/gs/i/gm/nub_up.png")+'");width:'+c+"px;height:"+g+"px; z-index:"+e.utils.DOM._nextZIndex++ +" }",'div.gig-balloon-nub-down { top:-1px; position:relative;background-image:url("'+e._.getCdnResource("/gs/i/gm/nub_down.png")+'");width:'+c+"px;height:"+g+"px; z-index:"+e.utils.DOM._nextZIndex++ +" }",'span.gig-balloon-closeImage { cursor:pointer; float:right;background-image:url("'+e._.getCdnResource("/gs/i/gm/CloseButton.png")+'"); width:14px;height:14px; margin:-7px -2px 0 0  }',"div.gig-balloon-caption {font-family:arial; font-size: 12px; font-weight:bold; color: #0b81c1; border-bottom: 1px solid #e8e8e8;padding-bottom:2px;}","span.gig-balloon-caption-text {float:left}"]),!e.localInfo.isIE||!e.localInfo.quirksMode&&e.localInfo.isIE9||e.global.addCSS(["div.gig-balloon-frame {","-ms-filter: \"progid:DXImageTransform.Microsoft.Shadow(Strength=4, Direction=135, Color='#B4B4B4');\";","filter: progid:DXImageTransform.Microsoft.Shadow(Strength=4, Direction=135, Color='#B4B4B4');}","}","div.gig-balloon-nub-right { left:-5px;}"]),e.global.addedBalloonCSS=!0);var u="";if(e.localInfo.quirksMode){var p=e.global.getClassBordersAndPaddings("gig-balloon-frame");n&&(n+=p.w),o&&(o+=p.h)}n&&(u+="width: "+n+"px;"),o&&(u+="height: "+o+"px;");var h="";a&&(h+="left"===r||"right"===r?"top: "+a+"px;":"left: "+a+"px;");var f="";f+=i?'<div class="gig-balloon-caption"><span class="gig-balloon-caption-text" style="width:'+(n-20)+'px">'+i+"</span>":'<div class="gig-balloon-caption" style="border-bottom:none">',!l&&s&&(f+='<span tabindex="0" role="button" class="gig-balloon-closeImage" onclick="'+s+'" onkeydown="if((event.which || event.keyCode) == 13) '+s+'"></span>'),f+='<div style="clear:both;height:0;width:0;font-size:1px;"><!-- empty divs=100% height IE --></div></div><div class="gig-balloon-body">'+t+"</div>";var m;return a?(m='<table role="presentation" cellpadding="0" cellspacing="0" class="gig-balloon"><tr>',"up"===r&&(m+='<td style=""><div class="gig-balloon-nub-up" style="'+h+'"></div></td></tr><tr>'),"left"===r&&(m+='<td style="vertical-align:top"><div class="gig-balloon-nub" style="'+h+'"></div></td>'),m+='<td style="vertical-align:top"><div id="'+d+'" class="gig-balloon-frame" style="'+u+'">'+f+"</div></td>","right"===r&&(m+='<td style="vertical-align:top"><div class="gig-balloon-nub-right" style="'+h+'"></div></td>'),"down"===r&&(m+='</tr><tr><td style="vertical-align:top"><div class="gig-balloon-nub-down" style="'+h+'"></div></td>'),m+="</tr></table>",m+='<div style="clear:both;height:0;width:0;font-size:1px;"><!-- empty divs=100% height IE --></div>'):m='<div class="gig-balloon gig-balloon-frame" style="'+u+'">'+f+"</div>",m}function a(t,i,n,o,a,r,l,s,d,g){g=g?"gig-balloon "+g:"gig-balloon",e.global.removeGMBalloon();var c=(new Date).getTime(),u="gig_gmBalloon_"+c;s&&(u=s);var p=u+"_frame",h=e.global.getBalloonHTML(t,i,n,o,a,r,l,"gigya.global.removeGMBalloon()",p),f=document.createElement("div");return f.className=g,f.style.position="absolute",f.style.zIndex=(e.utils.DOM._nextZIndex++).toString(),f.innerHTML=h,f.id=u,f.setAttribute("role","alert"),f.setAttribute("aria-live","assertive"),f.setAttribute("aria-atomic","true"),e.global.fadeIn(f),e.utils.DOM.appendToBody(f),e.global.divGMBalloon=f,d||window.setTimeout(function(){e.pluginUtils.DOM.removeElementOnDocClickOrEscape(f)},50),f}function r(t){var i;if(t)for(i=t.target,i||(i=t.srcElement);null!=i&&i.offsetParent&&i.id.indexOf(e.global.divGMBalloon.id)==-1;)i=i.offsetParent;if(!i||i.id.indexOf(e.global.divGMBalloon.id)==-1)try{e.global.removeIframeShim(document.getElementById(e.global.divGMBalloon.id+"_frame")),e.global.divGMBalloon.parentNode.removeChild(e.global.divGMBalloon),document.detachEvent?document.detachEvent("onclick",e.global.removeGMBalloon):document.removeEventListener&&document.removeEventListener("click",e.global.removeGMBalloon,!1)}catch(e){}}function l(e,t,i,n,o,a,r,l,s,d){void 0===s&&(s=["left","right","up","down"]),void 0===d&&(d="");for(var g={body:t,caption:i,w:n,h:o,hideClose:a,id:r,dontHideOnClick:l,balloonClass:d},c=0;c<s.length&&!this.positionGMBalloonNextTo(e,s[c],g);c++);}function s(t,i,n){"left"===i||"right"===i?e.global.createGMBalloon(n.body,n.caption,n.w,n.h,47,"left",n.hideClose,n.id,n.dontHideOnClick,n.balloonClass):e.global.createGMBalloon(n.body,n.caption,n.w,n.h,10,"down",n.hideClose,n.id,n.dontHideOnClick,n.balloonClass);var o,a,r=e.global.divGMBalloon.offsetWidth,l=e.global.divGMBalloon.offsetHeight,s=e.global._GetElementPos(t),d=document.documentElement,g=document.body,c=d.clientHeight;0==c&&(c=g.clientHeight);var u=d.clientWidth;0==u&&(u=g.clientWidth),window.innerHeight&&(c=g.scrollHeight&&g.scrollHeight<window.innerHeight?g.scrollHeight:window.innerHeight,u=g.scrollWidth&&g.scrollWidth<window.innerWidth?g.scrollWidth:window.innerWidth);var p,h,f=e.utils.viewport.getScroll(),m=f.top,y=m+c;if("left"===i||"right"===i){h=47,a=s.top+t.offsetHeight/2-47-12.5,a+l>y&&(a=y-l-10);var v=s.left-r-5,b=s.left+t.offsetWidth+5;if("left"===i){if(!(v>10))return null;o=v,p="right",n.balloonClass+=" gig-balloon-left"}else{if(!(u-b-r>10))return null;o=b,p="left",n.balloonClass+=" gig-balloon-right"}}else{if("up"!==i&&"down"!==i)return null;h=10,o=s.left;var x=s.top-l-10,_=s.top+t.offsetHeight+5;if("up"===i){if(!(x>5))return null;a=x,p="down",n.balloonClass+=" gig-balloon-up"}else a=_,p="up",n.balloonClass+=" gig-balloon-down"}var C=e.global.createGMBalloon(n.body,n.caption,n.w,n.h,h,p,n.hideClose,n.id,n.dontHideOnClick,n.balloonClass);if(o<10&&(o=10),a<10&&(a=10),e.global.divGMBalloon.style.left=o+"px",e.global.divGMBalloon.style.top=a+"px",e.localInfo.isIE){var w=document.getElementById(e.global.divGMBalloon.id+"_frame");w&&e.global.addIframeShim(w)}return C}function d(t){if(t){var i=e.global._GetElementPos(t);window.scrollTo(i.left,i.top)}}t.showLoader=i,t.fadeIn=n,t.getBalloonHTML=o,t.createGMBalloon=a,t.removeGMBalloon=r,t.putGMBalloonNextTo=l,t.positionGMBalloonNextTo=s,t.scrollToElement=d}(t=e.global||(e.global={}))}(gigya||(gigya={})),function(e){var t;!function(t){var i;!function(t){function i(t,i){var n=i||{},o=n.zindex||50,a=n.opacity||70,r=a/100,l=n.bgcolor||"#000000",s=document.getElementById("darkenScreenObject"),d=document.body;if(!s){var g=e.localInfo.isMobile||e.localInfo.isIE6||"BackCompat"==document.compatMode,c=document.documentElement.scrollTop;0==c&&(c=document.body.scrollTop);var u=document.createElement("div");g?(u.style.position="absolute",u.style.top=""+c+"px"):(u.style.position="fixed",u.style.top="0px"),u.style.overflow="hidden",u.style.left="0px",u.style.display="none",u.id="darkenScreenObject",u.innerHTML="&#160;",d.appendChild(u),s=document.getElementById("darkenScreenObject"),e.attachedFixGray||(e.attachedFixGray=!0,window.addEventListener&&window.addEventListener("resize",e.services.socialize._fixGraySize,!1),window.attachEvent&&window.attachEvent("onresize",e.services.socialize._fixGraySize),g&&(window.addEventListener&&window.addEventListener("scroll",e.services.socialize._fixGrayPosition,!1),window.attachEvent&&window.attachEvent("onscroll",e.services.socialize._fixGrayPosition)))}if(t){var p,h;if(window.innerHeight&&(p=window.innerHeight,h=window.innerWidth),"undefined"==typeof p){var f=document.documentElement;p=f.clientHeight,h=f.clientWidth}0==h&&(h=d.clientWidth),0==p&&(p=d.clientHeight),s.style.opacity=r.toString(),s.style.MozOpacity=r,s.style.width=""+h+"px",s.style.height=""+p+"px",s.style.filter="alpha(opacity="+a+")",s.style.zIndex=o,s.style.backgroundColor=l,s.style.display="block"}else d.removeChild(s)}function n(){var t=e.utils.object.merge([e.thisScript.globalConf,arguments]);e.services.socialize.GrayOut(!1);for(var i in e._.plugins.instances){var n=e._.plugins.instances[i];n.isModal&&n.dispose()}for(var o in e.utils.DOM._popupContainers){var a=e.utils.DOM._popupContainers[o];null!=a&&(a.innerHTML="",a.parentNode&&(a.style.display="none"));var r=document.getElementById("gigya_ifr_"+o);null!=r&&(r.style.display="none")}if(e.events.global.dispatch({eventName:"HideUIRequested"}),"function"==typeof t.callback){var l={status:"OK",statusMessage:"",operation:"hideUI",context:t.context,errorMessage:"",errorCode:0};t.callback(l)}}t.GrayOut=i,t.hideUI=n}(i=t.socialize||(t.socialize={}))}(t=e.services||(e.services={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var i;!function(t){function i(t){var i="gigya-"+e.localInfo.currentBrowser;e.localInfo.isIOS&&(i+=" ios"),i=i.replace(/ /g," gigya-"),e.localInfo.isNativeMobileApp&&(i="gigya-native-mobile-app "+i),e.utils.DOM.addClassToElement(t,i)}function n(t,i){var n=function(e){var t;e&&e.which?(e=e,t=e.which):(e=event,t=e.keyCode),13==t&&i.click()};e.utils.DOM.addEventListener(t,"keyup",n),e.utils.DOM.addEventListener(i,"keyup",n)}function o(e,t,i,n,o){var a={top:0,left:0,bottom:0,right:0};return"bottom"===i?(a.top=e.bottom+n,a.left=o?e.right-t.w:e.left):"top"===i?(a.top=e.top-t.h-n,a.left=o?e.right-t.w:e.left):"left"===i?(a.top=o?e.bottom-t.h:e.top,a.left=e.left-t.w-n):(a.top=o?e.bottom-t.h:e.top,a.left=e.right+n),a.bottom=a.top+t.h,a.right=a.left+t.w,a}function a(t,i,n,o,a,r){var l=e.utils.DOM.getElementPosition(t),s={w:i.offsetWidth,h:i.offsetHeight},d=this.getRelativePosition(l,s,n,o,a);if(r&&!e.utils.viewport.isRectFullyVisible(d)){var g={bottom:"top",left:"right",right:"left",top:"bottom"},c=this.getRelativePosition(l,s,g[n],o);e.utils.viewport.isRectHorizontallyVisible(c)&&(d=c)}if(!e.utils.viewport.isRectHorizontallyVisible(d)){var c=this.getRelativePosition(l,s,n,o,!a);e.utils.viewport.isRectHorizontallyVisible(c)&&(d=c)}i.style.left=""+d.left+"px",i.style.top=""+d.top+"px"}function r(t,i,n,o,a,r,l,s,d){if(void 0===n&&(n="bottom"),void 0===o&&(o=0),void 0===a&&(a=!1),void 0===r&&(r=!0),void 0===l&&(l=null),void 0===s&&(s=null),void 0===d&&(d=null),t&&i){var g=document.createElement("div");return g.appendChild(i),g.style.position="absolute",g.style.zIndex=(e.utils.DOM._nextZIndex++).toString(),g.style.left="-1000px",document.body.appendChild(g),this.placePopoverNearElement(t,g,n,o,a,r),e.pluginUtils.DOM.removeElementOnDocClickOrEscape(g,function(e){t.focus(),s(e)},d),l&&"function"==typeof e.pluginUtils.animation[l]&&e.pluginUtils.animation[l](i),g}}function l(e,t,i){if(void 0===t&&(t=null),void 0===i&&(i=null),e){var n=function(i){var n=e&&e.parentNode;n&&e.parentNode.removeChild(e),t&&t(i,n)},o=[e];i&&(o=o.concat(i)),this.performOnDocClickOrEscape(n,o,event)}}function s(e,t,i){if(void 0===t&&(t=null),void 0===i&&(i=null),e){var n=function(){e.style.display="none",t&&t()},o=[e];i&&o.concat(i),this.performOnDocClickOrEscape(n,o)}}function d(t,i){void 0===t&&(t=null),void 0===i&&(i=null);var n=function(i){e.utils.DOM.removeClassFromElement(document.body,"gig-clickable"),e.utils.DOM.removeEventListener(document,"mousedown",o),e.utils.DOM.removeEventListener(document,"keydown",a),t&&t(i)},o=function(e){for(var t=e.target||e.srcElement,o=!1;t&&t.parentNode;){if(i&&i.indexOf(t)!=-1){o=!0;break}t=t.parentNode}o||n(e)},a=function(e){27==(e.which||e.keyCode)&&n(e)};(e.localInfo.isIOS&&e.localInfo.isSafari||e.localInfo.isIOSWebView)&&(u||(e._.plugins.utils.css.addCss("*.gig-clickable {cursor: pointer;}",null),u=!0),e.utils.DOM.addClassToElement(document.body,"gig-clickable")),e.utils.DOM.addEventListener(document,"mousedown",o),e.utils.DOM.addEventListener(document,"keydown",a)}function g(e){e.style.display="none"}function c(e){e.style.display="block"}t.addBrowserInfoClassesToElement=i,t.setTextboxSubmitButton=n,t.getRelativePosition=o,t.placePopoverNearElement=a,t.addPopoverNearElement=r,t.removeElementOnDocClickOrEscape=l,t.hideElementOnDocClick=s;var u=!1;t.performOnDocClickOrEscape=d,t.hideElement=g,t.showElement=c}(i=t.DOM||(t.DOM={}))}(t=e.pluginUtils||(e.pluginUtils={}))}(gigya||(gigya={})),function(e){var t;!function(t){function i(t,i){if(!t.shim){var n=document.createElement("IFRAME");n.frameborder="0",n.frameBorder="0",n.allowtransparency=!0,n.style.position="absolute",n.update=function(o){if(n&&t){if(i)n.style.left=t.offsetLeft+"px",n.style.top=t.offsetTop+"px";else{var a=e.global._GetElementPos(t);n.style.left=a.left+"px",n.style.top=a.top+"px"}o&&(n.style.width=t.offsetWidth+"px",n.style.height=t.offsetHeight+"px")}},n.update(!0),i?(n.style.zIndex=(e.utils.DOM._nextZIndex++).toString(),t.style.zIndex=(e.utils.DOM._nextZIndex++).toString(),i.appendChild(n)):e.utils.DOM.appendToBody(n),t.shim=n}}function n(e){e&&e.shim&&e.shim.parentNode&&(e.shim.parentNode.removeChild(e.shim),e.shim=null)}function o(e,t,i,n){var o=e;if(!e.width||!e.height){var o=new Image;o.src=e.src}var a=function(){0==o.width?window.setTimeout(a,100):(o.width>o.height?e.style.width=t+"px":e.style.height=t+"px",e.style.display="",n&&n(e),i||(e.style.marginTop=(t-e.offsetHeight)/2+"px",e.style.marginLeft=(t-e.offsetWidth)/2+"px"))};o.width>0?a():(e.style.display="none",o.onload=function(){window.setTimeout(a,50)})}function a(t,i){for(var n in t){var o=t[n];if("string"==typeof o&&(t[n]=e.utils.templates.fill(t[n],i)),"mediaItems"==n)for(var a=0;a<o.length;a++)o[a].src&&(o[a].src=e.utils.templates.fill(o[a].src,i))}return t}function r(t,i,n){if(t){var o=function(){""==this.value&&(n?e.utils.DOM.addClassToElement(t,n):t.style.color="#585858",this.value=i,this.placeholderCleared=!1)},a=function(){if(!this.placeholderCleared)if(n?e.utils.DOM.removeClassFromElement(t,n):t.style.color="",this.value="",this.placeholderCleared=!0,t.setSelectionRange)t.focus(),t.setSelectionRange(0,0);else if(t.createTextRange){var i=t.createTextRange();i.collapse(!0),i.moveEnd("character",0),i.moveStart("character",0),i.select()}};t.refreshPlaceholder=function(){t.value?(n?e.utils.DOM.removeClassFromElement(t,n):t.style.color="",this.placeholderCleared=!0):(n?e.utils.DOM.addClassToElement(t,n):t.style.color="#585858",t.value=i,this.placeholderCleared=!1)},e.utils.DOM.addEventListener(t,"blur",o),e.utils.DOM.addEventListener(t,"focus",a),e.utils.DOM.addEventListener(t,"change",o),t.refreshPlaceholder()}}t.addIframeShim=i,t.removeIframeShim=n,t.scaleImage=o,t.fillUserActionTemplate=a,t.setPlaceholder=r}(t=e.global||(e.global={}))}(gigya||(gigya={})),function(e){var t;!function(t){var i;!function(t){var i;!function(t){var i;!function(t){function i(e,t){var i=/(?:(?:https?):\/\/|www\.)(?:\([-A-Z0-9+&@#\/%=~_|$?!:,.;]*\)|[-A-Z0-9+&@#\/%=~_|$?!:,.;])*(?:\([-A-Z0-9+&@#\/%=~_;|$?!:,.;]*\)|[A-Z0-9+&@#\/%=~_|;$])/gim,n=e.match(i),o="";if(n)for(var a=0;a<n.length;a++){var r="";n[a].indexOf("http:")===-1&&n[a].indexOf("https:")===-1&&(r="http://");var l="";t&&(l=' class="'+t+'"');var s=e.substr(0,e.indexOf(n[a])+n[a].length);e=e.substr(s.length,e.length-s.length);var d=n[a].replace(/&#173;/g,"");o+=s.replace(n[a],"<a"+l+' href="'+r+d+'" target="_blank" rel="nofollow">'+n[a]+"</a>")}return e.length>0&&(o+=e),o}function n(e,t,i){switch(t){case"class":e.className=i;break;default:e.setAttribute(t,i)}}function o(t,i){var n="";return n=e.localInfo.isIE8?t.getAttribute(i):t.getAttributeNS("",i)}t.replaceLinksWithHTMLElements=i,t.setAttribute=n,t.getAttribute=o}(i=t.DOM||(t.DOM={}))}(i=t.utils||(t.utils={}))}(i=t.plugins||(t.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={})),function(e){var t;!function(t){var i;!function(t){function i(t){t.addedSafeCopy||(e.utils.DOM.addEventListener(t,"copy",function(t){t=t||window.event;var i=t.target||t.srcElement,n=i&&i.nodeName?i.nodeName.toLowerCase():"";if("textarea"!=n&&"input"!=n){var o=document.createElement("div");o.style.color=window.getComputedStyle?window.getComputedStyle(document.body).backgroundColor:"#FFFFFF",o.style.fontSize="0px",e.utils.DOM.appendToBody(o);var a,r,l=new RegExp("(&shy;|"+String.fromCharCode(173)+")","g");if(window.getSelection){t.stopPropagation(),a=window.getSelection();var s=a.getRangeAt(0);o.appendChild(s.cloneContents()),o.innerHTML=o.innerHTML.replace(l,""),a.selectAllChildren(o);var d=function(){o.parentNode.removeChild(o),a.removeAllRanges(),a.addRange(s)}}else t.cancelBubble=!0,a=window.document.selection,s=a.createRange(),o.innerHTML=s.htmlText,o.innerHTML=o.innerHTML.replace(l,""),r=document.body.createTextRange(),r.moveToElementText(o),r.select(),d=function(){o.parentNode.removeChild(o),""!==s.text&&s.select()};window.setTimeout(d,0)}}),t.addedSafeCopy=!0)}t.enableSafeCopy=i}(i=t.DOM||(t.DOM={}))}(t=e.utils||(e.utils={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var i;!function(t){function i(t){return(e.localInfo.isIE7||e.localInfo.isIE&&e.localInfo.quirksMode)&&(t=t.replace(/display:inline-block/g,"display:inline-block;zoom:1;*display:inline")),t.replace(/gradient\((.*?),(.*?)\)/g,'filter: progid:DXImageTransform.Microsoft.gradient(startColorstr="$1", endColorstr="$2");background: linear-gradient(top,  $1,  $2);background: -ms-linear-gradient(top left, $1, $2);background: -webkit-gradient(linear, left top, left bottom, from($1), to($2));background: -moz-linear-gradient(top,  $1,  $2)')}t.fixCss=i}(i=t.css||(t.css={}));var n;!function(t){function i(t,i,n){void 0===n&&(n=0),(isNaN(n)||n<0)&&(n=0);var o=document.getElementById("gigya_ruler"),a=document.getElementById("gigya_ruler_text");null==o&&(o=document.createElement("div"),a=document.createElement("span"),o.id="gigya_ruler",a.id="gigya_ruler_text",o.style.visibility="hidden",o.style.position="absolute",o.style.margin="0px",o.style.padding="0px",o.appendChild(a),e.utils.DOM.appendToBody(o)),i&&(o.style.lineHeight=i.size+"px",o.style.fontFamily=i.font,o.style.fontSize=i.size+"px",o.style.fontWeight="true"==(""+i.bold).toLowerCase()?"bold":""),n?(o.style.whiteSpace="",o.style.width=""+n+"px"):(o.style.whiteSpace="nowrap",o.style.width="auto"),o.style.overflow="hidden",o.style.display="",a.innerHTML=t;var r=a.offsetWidth,l=a.offsetHeight;return 0!=r&&0!=l||(r=o.offsetWidth,l=o.offsetHeight),o.style.display="none",{w:r,h:l}}t.measureText=i}(n=t.layout||(t.layout={}));var o;!function(e){function t(e){return void 0===e&&(e=void 0),e&&e.replace?e.replace(/\r/,"").replace(/\n/g,"\r\n"):e}function i(e){var t=e.lastIndexOf(" ");return t===-1?e:e.substr(0,t)+"&nbsp;"+e.substr(t+1)}e.normalizeLinebreaks=t,e.fixTextWidows=i}(o=t.text||(t.text={}))}(t=e.pluginUtils||(e.pluginUtils={}))}(gigya||(gigya={})),function(e){var t;!function(t){function i(t){var i=document.createElement("div");i.className=t,e.utils.DOM.appendToBody(i);var n=e.global.getBordersAndPaddings(i);return i.parentNode.removeChild(i),n}function n(t){var i=function(i){var n=parseInt(e.global.getStyle(t,i));return isNaN(n)&&(n=0),n};return{w:i("border-left-width")+i("border-right-width")+i("padding-right")+i("padding-left"),h:i("border-top-width")+i("border-bottom-width")+i("padding-top")+i("padding-bottom")}}function o(e,t){return e.currentStyle?e.currentStyle[t]:window.getComputedStyle?document.defaultView.getComputedStyle(e,null).getPropertyValue(t):void 0}function a(t,i,n){i||(t.parentNode.style.textAlign="left",t.parentNode.style.verticalAlign="top");var o=function(i){for(var n=t.parentNode,o=e.global.getStyle(n,i);"auto"==o;)n=n.parentNode,o=e.global.getStyle(n,i);var a=parseInt(o);return isNaN(a)&&(a=0),a},a=Math.min(o("width"),o("height"));if(e.localInfo.quirksMode){var r=e.global.getBordersAndPaddings(t.parentNode),l=o("width")-r.w,s=o("height")-r.h;a=Math.min(l,s)}e.global.scaleImage(t,a,i,n)}function r(t,i,n){var o=document.createElement("div");o.className=t,e.utils.DOM.appendToBody(o);var a=e.global.getBordersAndPaddings(o);return i-=a.w,n-=a.h,o.parentNode.removeChild(o),{w:i,h:n}}function l(e,t,i,n,o,a,r){this.src=e,this.srcTemplate=t,this.spriteData=i,this.spriteW=n,this.spriteH=o,this.pixelRatio=a,this.spriteLength=r}function s(t){var i=[],n=0,o={};for(var a in t){var r=t[a];r.pixelRatio||(r.pixelRatio=1),i.push(r.path+"|"+r.w*r.pixelRatio+","+r.h*r.pixelRatio)}var l=e._.getCdnResource("/gs/GetSprite.ashx?path="+encodeURIComponent(i.join("^").replace(/\[\]/,"")));for(var a in t){var r=t[a],s={};s.spriteData={};var d=/\[(.*?)\]/g,g=[],c=0;s.srcTemplate=e._.getCdnResource("/gs/i"+r.path.replace(d,function(e,t){return g.push(t.split(",")),"{"+c++ +"}"}));var u=e.global.getCombination(g);0==u.length&&u.push([""]);for(var p=0;p<u.length;p++){var h=u[p].join("-");""==h&&(h="default"),s.spriteData[h]={groupId:a,id:h,x:n,w:r.w,h:r.h},n+=r.w}o[a]=new e.global.SpriteRenderer(l,s.srcTemplate,s.spriteData,r.w,r.h,r.pixelRatio,u.length)}return o}t.getClassBordersAndPaddings=i,t.getBordersAndPaddings=n,t.getStyle=o,t.scaleImageToContainer=a,t.getClassInnerSize=r,t.SpriteRenderer=l,l.prototype={getSpriteData:function(e,t){var i=this.spriteData[e];if(i&&!t)return this.spriteData[e];var n=0,o=e.split("-"),a=/\{(.*?)\}/g,r=this.srcTemplate.replace(a,function(e,t){var i=o[n++];return i?i:""});return{isSingleImage:!0,src:r}},getStyleString:function(e,t){var i=this.getSpriteData(e),n=[];return i&&(n.push("background-image:url('"+this.src+"');"),n.push("background-position:-"+i.x+"px 0px;"),this.pixelRatio>1&&n.push("background-size:"+this.spriteLength*this.spriteW+"px "+this.spriteH+"px;"),t&&n.push("margin: 0 auto;"),n.push("width: "+this.spriteW+"px;"),n.push("height: "+this.spriteH+"px;line-height: "+this.spriteH+"px;"),n.push("background-repeat:no-repeat;"),n.push("position:static;")),n.join("")},getHTML:function(e,t,i,n,o,a,r){void 0===n&&(n=""),void 0===o&&(o=""),void 0===a&&(a=void 0);var l=this.getSpriteData(e,i),s=[],d=void 0!==a?'tabindex="'+a+'"':"";return s.push('<button aria-label="'+o+'" '+(r?'title="'+r+'"':"")+' type="button" class="tabbing-button" '+d+' style="height:'+this.spriteH+'px;">'),l&&(l.isSingleImage?s.push('<img src="'+l.src+'" style="width:'+this.spriteW+"px;height:"+this.spriteH+'px;position:static;margin:0" alt="'+o+'" aria-hidden="true" />'):(s.push('<div aria-hidden="true" style="'),s.push(this.getStyleString(e,t)),s.push('"'),n&&s.push(' id="'+n+'"'),s.push("></div>"))),s.push("</button>"),s.join("")}},t.getSpriteRenderers=s}(t=e.global||(e.global={}))}(gigya||(gigya={})),function(e){var t;!function(t){var i;!function(t){var i;!function(t){var i;!function(t){function i(t){return(e.localInfo.isIE7||e.localInfo.isIE&&e.localInfo.quirksMode)&&(t=t.replace(/display:inline-block/g,"display:inline-block;zoom:1;*display:inline")),t.replace(/gradient\((.*?),(.*?)\)/g,'filter: progid:DXImageTransform.Microsoft.gradient(startColorstr="$1", endColorstr="$2");background: linear-gradient(top,  $1,  $2);background: -ms-linear-gradient(top left, $1, $2);background: -webkit-gradient(linear, left top, left bottom, from($1), to($2));background: -moz-linear-gradient(top,  $1,  $2)')}function n(t,i,n,a){if(void 0===n&&(n=!0),t&&""!=t&&(t instanceof Array&&(t=t.join(" ")),i&&(t=t.replace(/([^\s}]*\.gig)/g,i+" $1")),a||(a=e.utils.object.getMurmurHash(t).toString()),!o[a]||n)){o[a]=!0;var r=document.createElement("style");r.type="text/css";var l=document.createTextNode(t);r.styleSheet?null!=l.value?r.styleSheet.cssText=l.value:r.styleSheet.cssText=l.nodeValue:r.appendChild(l);var s=document.getElementsByTagName("head"),d=document.body;(s.length>0?s[0]:d).appendChild(r)}}t.fixCss=i;var o={};t.addCss=n}(i=t.css||(t.css={})),e.utils.functions.createAlias("gigya.global.addCSS",i.addCss),e.utils.functions.createAlias("gigya.pluginUtils.css.fixCss",i.fixCss)}(i=t.utils||(t.utils={}))}(i=t.plugins||(t.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={})),function(e){var t;!function(e){var t;!function(e){function t(e,t){var i="";return i+="line-height: normal;",t&&(i+="cursor:pointer;"),e.underline&&(i+="text-decoration:underline;"),e.font&&(i+="font-family:"+e.font+";"),e.size&&(i+="font-size:"+e.size+"px;"),e.color&&(i+="color:"+e.color+";"),e.bold&&(i+="font-weight:bold;"),e["frame-thickness"]&&(i+="border-style:solid; border-width:"+e["frame-thickness"]+"px;"),e["frame-color"]&&(i+="border-color:"+e["frame-color"]+";"),e["background-color"]&&(i+="background-color:"+e["background-color"]+";"),i}e.getStyleString=t}(t=e.socialize||(e.socialize={}))}(t=e.services||(e.services={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){function i(e,t){for(var i=[],n=0,o=function(){n++,n==e.length&&t()},a=0;a<e.length;a++)if(null==e[a])o();else{var r=new Image;r.onload=o,r.onerror=o,r.src=e[a],i.push(r)}}function n(e,t){for(var i="",n=[],o=/\<(\/)?([^ \/>]+)[ ]?[^>]*(\/)?\>/i,a=0,r=0;r<e.length&&(a<t||0==t);){var l=e.substr(r,1);if("<"==l){var s=e.indexOf(">",r),d=e.substring(r,s+1);o.lastIndex=0;var g=o.exec(d),c=g[2].toLowerCase();if("/"==g[1])n.length>0&&n[n.length-1].tagname==c&&n.pop();else if("/"==g[3]);else{var u="</"+g[2]+">";n.length>0&&(u+=n[n.length-1].cl),n.push({tagname:g[2],cl:u})}i+=g[0],r+=g[0].length-1}else if("&"==l){var p=e.indexOf(";",r);p-r>8?i+="&":(i+=e.substring(r,p+1),r=p),a++}else i+=l,a++;r++}return a<t?e:i+"&#133;"+(n.length>0?n[n.length-1].cl:"")}function o(t,i){if(i&&!t&&(t=i),!t)return t;var n=document.createElement("a");return n.href=t,"http:"===n.protocol&&"https"===e.localInfo.protocol?e.utils.array.indexOf(e._.CDN_HOSTS.http,n.host)!==-1?e._.getCdnResource(n.pathname+n.search+n.hash):e._.getCdnResource("/proxy/photos.ashx?u="+e.utils.URL.URLEncode(t)):t}function a(e,t){e=e.replace(/\n/g,"\n ");for(var i=e.split(" "),n="&#173;",o=0;o<i.length;o++)if(i[o].length>t){for(var a,r=n,l=i[o].split(""),s=!1,d=-1,g=0;g<l.length;g+=1)s||d++,d==t&&(l.splice(g,0,r),d=-1),"&"==l[g]?(s=!0,a=";"):"<"==l[g]&&(s=!0,a=">"),s&&l[g]==a&&(s=!1);i[o]=l.join("")}return i.join(" ").replace(/\n /g,"\n")}function r(e){var t=navigator.userAgent.toLowerCase(),i=t.indexOf("opera")!=-1;t.indexOf("msie")!=-1&&!i;if(null===e.parentNode||"none"==e.style.display)return!1;var n,o=null,a=[];if(e.getBoundingClientRect){n=e.getBoundingClientRect();var r=Math.max(document.documentElement.scrollTop,document.body.scrollTop),l=Math.max(document.documentElement.scrollLeft,document.body.scrollLeft);return{x:n.left+l,y:n.top+r}}if(document.getBoxObjectFor){n=document.getBoxObjectFor(e);var s=e.style.borderLeftWidth?parseInt(e.style.borderLeftWidth):0,d=e.style.borderTopWidth?parseInt(e.style.borderTopWidth):0;a=[n.x-s,n.y-d]}else{if(a=[e.offsetLeft,e.offsetTop],o=e.offsetParent,o!=e)for(;o;)a[0]+=o.offsetLeft,a[1]+=o.offsetTop,o=o.offsetParent;(t.indexOf("opera")!=-1||t.indexOf("safari")!=-1&&"absolute"==e.style.position)&&(a[0]-=document.body.offsetLeft,a[1]-=document.body.offsetTop)}for(o=e.parentNode?e.parentNode:null;o&&"BODY"!=o.tagName&&"HTML"!=o.tagName;)a[0]-=o.scrollLeft,a[1]-=o.scrollTop,o=o.parentNode?o.parentNode:null;return{x:a[0],y:a[1]}}function l(t){var i=e.global.getPos(t);return{left:i.x,top:i.y}}t.preloadImages=i,t.applyEllipsis=n,t.getPhotoURL=o,t.wbr=a,t.getPos=r,t._GetElementPos=l}(t=e.global||(e.global={}))}(gigya||(gigya={})),function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){function t(e,t,o){return e=n(e,t),e=i(e,t,o)}function i(e,t,i){var n="#";if(e.indexOf("#")!=-1){if(e.indexOf(t)!=-1){var o=t+"="+this.getHashParamValue(e,t);return e.replace(o,t+"="+i),e}n="&"}return e+n+t+"="+i}function n(e,t){if(e.indexOf("#")==-1)return e;var i=e.split("#")[1],n=o(e,t);n&&(i=i.replace(t+"="+n,"")),i=i.replace("&"+t,""),i=i.replace("#"+t,"#"),i.length>0&&(i=i.substring(1,i.length));var a=e.split("#")[0];return 0==i.length?a:a+"#"+i}function o(e,t){if(t+="=",e.indexOf("#")==-1||e.indexOf(t,e.indexOf("#"))==-1)return null;var i=e.indexOf(t,e.indexOf("#")),n=e.indexOf("&",i);return n==-1&&(n=e.length),e.substring(i+t.length,n)}e.addOrReplaceHashFragment=t,e.addHashFragment=i,e.removeHashFragment=n,e.getHashParamValue=o}(t=e.URL||(e.URL={}))}(t=e.utils||(e.utils={}))}(t=e.plugins||(e.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={})),function(e){var t;!function(t){var i;!function(t){function i(){var t=document.getElementById("darkenScreenObject");if(t){var i=document.documentElement,n=document.body,o=i.scrollTop;0==o&&(o=n.scrollTop);var a=i.scrollLeft;0==a&&(a=n.scrollLeft);var r=i.clientHeight;0==r&&(r=n.clientHeight);
var l=i.clientWidth;0==l&&(l=n.clientWidth),e.localInfo.isIE6&&(l-=1),t.style.top=o.toString(),t.style.left=a.toString()}}function n(){var t=document.getElementById("darkenScreenObject");if(t){var i=document.documentElement,n=document.body,o=i.clientHeight;0==o&&(o=n.clientHeight);var a=i.clientWidth;0==a&&(a=n.clientWidth),e.localInfo.isIE6&&(a-=1),t.style.width=""+a+"px",t.style.height=""+o+"px"}}function o(t,i,n,o){var a=e.services.socialize._parseRID(t),r=a.req,l=r.p,s=r.c;e.utils.validation.isExplicitFalse(l.showCaption)&&(o=!0);var d=e.services.socialize,g=document.getElementById(l.containerID);r.container=g;var c=i.Resolve("+/config/body/background"),u=i.Resolve("+/config/body/captions"),p='<table role="presentation" style="'+d.getStyleString(c)+';empty-cells:show;" cellpadding="0" cellspacing="0" >';o?p+="<tr><td>":(p+='<tr style="'+d.getStyleString(u)+'"><td><table role="presentation" style="width:100%" width="100%" cellpadding="0" cellspacing="0"><tr id="'+l.containerID+'_caption"><td style="vertical-align:middle"><div style="'+d.getStyleString(u)+';padding:7px">'+n+'</div></td><td style="vertical-align:middle">',p+='<div align="right" style="padding-right: 7px; cursor: pointer;'+d.getStyleString(u)+'"><img onclick="gigya.services.socialize._closeComponent(\''+t+'\', true);"  src="'+e._.getCdnResource("/gs/i/HTMLLogin/closeIcon.gif")+'" alt="" /></div></td></tr></table></td></tr><tr><td colspan="2">'),p+='<div id="'+l.containerID+'_container"></div></td></tr></table>',g.innerHTML=p;var h={},f={};for(var m in l)h[m]=l[m];for(m in s)f[m]=s[m];var y=document.getElementById(h.containerID+"_caption");return h.height=h.height-2*c["frame-thickness"],o||(h.height-=y.offsetHeight),h.width=h.width-2*c["frame-thickness"],e.utils.DOM._popupContainers[h.containerID]=g,h.containerID=h.containerID+"_container",{c:f,p:h}}function a(t,i,n,o,a,r){var l=e.services.socialize._parseRID(t),s=l.req,d=s.p,g=s.c,c=e.services.socialize,u=document.getElementById(d.containerID);s.container=u;var p=i.Resolve("+/config/body/captions");n||(n=10),o||(o=e._.getCdnResource("/gs/i/Dialog/DialogBg_"));var h,f="width:"+n+"px;height:"+n+"px";r&&(h="1px solid #555555");var m='<table role="presentation" style="font-size:1px;padding:0px;margin:0px;vertical-align:middle;font-size:1px;line-height:1px;empty-cells:show;" cellpadding="0" cellspacing="0" >';m+='<tr><td height="'+n+'" style="font-size:1px"><div style="height:'+n+'px"><img src="'+o+'TopLeft.png" style="'+f+'" alt="" /></div></td><td height="'+n+'" style="background-image:url(\''+o+'filler.png\');bakground-repeat:repeat"></td><td height="'+n+'" style="font-size:1px;"><div style="height:'+n+'px"><img style="'+f+'" src="'+o+'TopRight.png" alt="" /></div></td></tr>',a&&(m+="<tr><td style=\"background-image:url('"+o+'filler.png\');background-repeat:repeat"></td><td><table width="100%" cellspacing="0" cellpadding="0" style="border-top:'+h+";border-left:"+h+";border-right:"+h+';width:100%;background-color:#FFFFFF"><tr><td style="padding-top:10px;padding-left:10px;'+c.getStyleString(p)+'">'+a+'</td><td align="right" valign="top" style="'+c.getStyleString(p)+'"><div style="padding-right:5px;padding-top:5px;text-align:right;"><img style="cursor:pointer" onclick="gigya.services.socialize._closeComponent(\''+t+'\', true);" src="'+o+'close.png" alt="" /></div></td></tr></table></td><td style="background-image:url(\''+o+"filler.png');background-repeat:repeat\"></td></tr>"),m+="<tr><td style=\"background-image:url('"+o+'filler.png\');background-repeat:repeat"></td><td><div style="border-bottom:'+h+";border-left:"+h+";border-right:"+h+';background-color:#FFFFFF" id="'+d.containerID+'_container"></div></td><td style="background-image:url(\''+o+"filler.png');background-repeat:repeat\"></td></tr>",m+='<tr><td height="'+n+'" style="font-size:1px;"><div style="height:'+n+'px"><img style="'+f+'" src="'+o+'BottomLeft.png" alt="" /></div></td><td height="'+n+'" style="background-image:url(\''+o+'filler.png\');bakground-repeat:repeat"></td><td height="'+n+'" style="font-size:1px;"><div style="height:'+n+'px"><img style="'+f+'" src="'+o+'BottomRight.png" alt="" /></div></td></tr></table>',u.innerHTML=m;var y={},v={};for(var b in d)y[b]=d[b];for(b in g)v[b]=g[b];return e.utils.DOM._popupContainers[y.containerID]=u,y.containerID=y.containerID+"_container",y.height=y.height-2*n,a&&(""==a.replace(/ /g,"")?y.height-=10:y.height-=e.pluginUtils.layout.measureText(a,p).h+10),y.width=y.width-2*n,{c:v,p:y}}function r(t){var i,n=t.split("@"),o=document.getElementById(n[2]+"_"+n[1]),a=n[2];null==(i=e.utils.DOM._pseudoContainers[a])&&(i=document.getElementById(n[2]));var r=null;null!=i&&(r=i.Reqs);var l=null;return null!=r&&(l=r[parseInt(n[0])]),{rid:t,container:i,Reqs:r,req:l,swf:o}}t._fixGrayPosition=i,t._fixGraySize=n,t._createJSPopup=o,t._createJSPopup2=a,t._parseRID=r}(i=t.socialize||(t.socialize={}))}(t=e.services||(e.services={}))}(gigya||(gigya={})),gigya.socialize._closeComponent=function(e,t){var i=gigya.socialize._parseRID(e),n=i.req;gigya.socialize.GrayOut&&gigya.socialize.GrayOut(!1);var o=document.getElementById("gigya_ifr_"+n.container.id);null!=o&&(o.style.display="none"),t&&gigya.events.dispatchForWidget({eventName:"close"},n.p),n.container.style.display="none"},gigya.utils.object.add(gigya.pluginUtils.lang,{getDateString:function(e,t){if(e&&e.dateFormat){var i=["January","February","March","April","May","June","July","August","September","October","November","December"],n=e.dateFormat,o=t.getDate(),a=t.getMonth()+1,r=i[t.getMonth()],l=t.getFullYear();return n.replace(/%dd/g,("0"+o).slice(-2)).replace(/%d/g,o).replace(/%MMMM/g,r).replace(/%MMM/g,r.substr(0,3)).replace(/%MM/g,("0"+a).slice(-2)).replace(/%M/g,a).replace(/%yyyy/g,l).replace(/%yy/g,l.toString().slice(-2))}}});var gigya;!function(e){var t;!function(t){var i;!function(t){function i(t){var i=null;if(window.ActiveXObject&&(e.localInfo.isIE8||e.localInfo.isIE9))try{i=new ActiveXObject("Microsoft.XMLDOM"),i.async="false",i.loadXML(t)}catch(t){e.log.addLog("Failed to create Microsoft.XMLDOM ActiveX parser",t)}else{var n=new DOMParser;i=n.parseFromString(t,"text/xml")}return i}function n(e,t,i,n){if("undefined"==typeof i&&(i=""),"undefined"==typeof t&&(t={}),null!=n)for(var o in e)t[i+o]=n(o,e[o]);else for(var a in e)t[i+a]=e[a];return t}function o(e,t,i,n,o){for(var a=0;a<t.length&&"undefined"!=typeof e;a++)e=e.childNodes[t[a]],null!=e&&n&&this.CopyProperties(e.attributes,i,"",o);"undefined"!=typeof e&&this.CopyProperties(e.attributes,i,"",o)}function a(e,t){"undefined"==typeof t.attributes&&(t.attributes={}),"undefined"==typeof t.childNodes&&(t.childNodes={});var i=t.attributes,n=e.attributes;if(n)for(var o=0;o<n.length;o++)null!=n[o].value?i[n[o].nodeName]=n[o].value:i[n[o].nodeName]=n[o].nodeValue;for(var a,r=0;r<e.childNodes.length;r++){var l=e.childNodes[r];a=t.childNodes[l.nodeName],"undefined"==typeof a&&(a=t.childNodes[l.nodeName]={attributes:{},childNodes:{}}),this.mergeNodes(l,a)}return t}t.CreateXMLFromString=i,t.CopyProperties=n,t.CollectAttributesFromXMLPathToObject=o,t.mergeNodes=a}(i=t.XMLUtils||(t.XMLUtils={}))}(t=e.global||(e.global={}))}(gigya||(gigya={})),function(e){var t;!function(t){function i(t){this.configurations=[],this.mergedConfig={},this.isMerged=!0,this._processor=t,this.merge=function(){if(!this.isMerged){this.mergedConfig={attributes:{},childNodes:{}};for(var t=0;t<this.configurations.length;t++){var i=this.configurations[t];e.global.XMLUtils.mergeNodes(i,this.mergedConfig)}this.isMerged=!0}},this.Resolve=function(t,i){this.merge&&this.merge();var n={};"object"==typeof arguments[arguments.length-1]&&(n=arguments[arguments.length-1]);for(var o=0;o<arguments.length;o++){var a=arguments[o],r=a.constructor;if(r==String)for(var l=a.split("|"),s=l.length-1;s>=0;s--){var d=this.trimCharsAtSuffix(this.trimCharsAtPrefix(l[s]," \n\r\t")," \n\r\t"),g="+"==d.charAt(0),c=d.split("/").slice(1);g&&(d=d.substring(1)),e.global.XMLUtils.CollectAttributesFromXMLPathToObject(this.mergedConfig,c,n,g,this._processor)}else if(r==Array)for(var u=0;u<a.length;u++)this.Resolve(a[u],n)}return n},this.trimCharsAtPrefix=function(e,t){var i=0;if("undefined"==typeof e||0==e.length)return"";for(var n=e.length;i<=n&&t.indexOf(e.charAt(i))>-1;)i++;return e.substring(i,n)},this.trimCharsAtSuffix=function(e,t){if("undefined"==typeof e||0==e.length)return"";for(var i=e.length-1;i>=0&&t.indexOf(e.charAt(i))>-1;)i--;return e.substring(0,i+1)},this.addConfig=function(t){"string"==typeof t&&(this.configurations.push(e.global.XMLUtils.CreateXMLFromString(t)),this.isMerged=!1)},this.getTextFromKey=function(e){return this.Resolve("/config/lang/"+e).text}}t.resolver=i,function(e){function t(e,t){var i=e.toLowerCase(),n=i.indexOf("-");switch(n!=-1&&(i=i.substring(n+1,i.length)),i){case"bold":case"italic":case"underline":return"true"==t.toString().toLowerCase();case"width":case"height":return t.replace("%","");case"size":return parseInt(t);default:return t}}e.defaultProccessor=t}(i=t.resolver||(t.resolver={}))}(t=e.global||(e.global={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var i;!function(t){var i;!function(t){function i(t){var i=[];for(var n in t)i.push(e._.plugins.resources.html[t[n]]);return e.utils.object.merge(i)}function n(t){var i=[];for(var n in t)i.push(e._.plugins.resources.css[t[n]]);return e.utils.object.merge(i)}t.getTemplates=i,t.getCss=n}(i=t.resources||(t.resources={}))}(i=t.plugins||(t.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));
// Injected language object
if (!gigya.i18n) gigya.i18n = { };
if (!gigya.i18n['gigya.services.socialize.plugins.reactions.js']) gigya.i18n['gigya.services.socialize.plugins.reactions.js'] = { };
gigya.i18n['gigya.services.socialize.plugins.reactions.js']['en'] = {"print": "Print", "comments": "Comments", "lineit": "LINE it!", "share": "Share", "email": "Email"};
// End injected language object

gigya._.UI.registerPlugin(function() {
gigya = window.gigya;
!function(){"undefined"==typeof gigya.services.socialize.plugins&&(gigya.services.socialize.plugins={});var t=gigya.services.socialize.plugins,e="reactions";if("undefined"==typeof t[e]){var n={instances_size:0,bookmarks:"Facebook,Twitter,Google,LinkedIn,Digg,Messenger,VKontakte,Spiceworks,Viadeo,nk.pl,Xing,Tuenti,Google Bookmarks,Baidu,FriendFeed,Tumblr,Pinterest,StumbleUpon,Skyrock,QQ,Sina,Kaixin,Renren,VZNet,Share,Email,facebook-like,facebook-send,facebook-subscribe,facebook-share,google-plusone,twitter-tweet,Comments,Reddit,Mixi,Naver,pinterest-pinit,twitter-hashtag,twitter-mention,Print,Foursquare,Foursquare-save,googlePlus-share,moshare-sms,getglue,Kindle,Hatena-bookmark,lineit,Wanelo,WhatsApp",createBookmarksObject:function(t){t.bookmarkSitesArray=[],t.bookmarkSitesHash={};var e=this.bookmarks.split(","),n=this.bookmarks.replace(",Google,",",googleplus,").replace(/ /g,"").replace(/!/g,"").replace(/\./g,"").replace(/\+/g,"plus").toLowerCase().split(",");e.push("Google"),n.push("googleplus-interactive");for(var i=0;i<e.length;i++){var o=t.TEXT(n[i]);o||(o=e[i]);var a={name:n[i],displayName:o,toString:function(){return this.name}};t.bookmarkSitesArray.push(a),t.bookmarkSitesHash[a.name]=a}},reactionsPlugin:function(t,e,n){this._c=t,this._p=e,this._i=n,this._elid=e.containerID,this._barID=this._p.barID;var i=e.deviceType?e.deviceType.toLowerCase():"desktop";this.isMobileUI="mobile"==i||"auto"==i&&gigya.localInfo.isMobile},createInstance:function(i,o,a){var s=document.getElementById(o.containerID);if(null!=s){s.innerHTML="";var r=new n.reactionsPlugin(i,o,a);r.lang=o.lang,n.createBookmarksObject(r),t[e].instances[o.containerID]=r,n.instances_size++,r.draw()}},createDefaultTemplates:function(){var t={_map:{},get:function(t){return this._map[t]},set:function(t,e){this._map[t]=e instanceof Array?e.join(""):e}};return t.set("button",['<div class="gig-button gig-$buttonType-button gig-button-up gig-button-count-${showCounts}" id="$id" title="$tooltip" alt="$tooltip" onclick="$onClick" onmouseover="$onMouseOver" onmouseout="$onMouseOut">','<table cellpadding="0" cellspacing="0" role="presentation"><tr>','<td id="$id-left" aria-hidden="true">$elButtonLeftImg</td>',"$iconTD","$textTD",'<td id="$id-right" aria-hidden="true">$elButtonRightImg</td>',"</tr></table>","</div>"]),t.set("newButton",['<a class="gig-bar-button gig-$buttonType-bar-button">','<div class="gig-bar-button-icon gig-$buttonType-bar-button-icon">$elIconImg</div>','<span class="gig-bar-button-text gig-$buttonType-bar-button-text">$text</span>',"</a>"]),t.set("textTD",['<td id="$id-text" style="vertical-align:middle;background-repeat:repeat-x;$buttonCenterBGStyle" aria-hidden="true">','<div class="gig-button-text gig-$buttonType-button-text">$text</div>',"</td>"]),t.set("iconTD",['<td id="$id-icon" style="zoom:1;vertical-align:middle;text-align:left;background-repeat:repeat-x;$buttonCenterBGStyle">$elIconImg</td>']),t.set("countContainer",['<div class="gig-counter gig-$buttonType-counter gig-counter-${rid} gig-counter-${showCounts}" id="$countId" style="display:none; ${countBgStyle};text-align:center;vertical-align:middle;">',"$count","</div>"]),t.set("count",['<span class="$counterTextClass" id="$countId-value">$countValue</span>']),t.set("buttonCell",['<td style="vertical-align:$cellValign; white-space:nowrap;zoom:1;"><div class="$className">$buttonContainer</div></td>']),t.set("buttonWithoutCell",['<div class="$className">$buttonContainer</div>']),t.set("buttonRow",['<tr><td style="position:relative;zoom:1;"><div class="$className">$buttonContainer</div></td></tr>']),t.set("buttonWithoutCount",["$button"]),t.set("buttonWithCountTop",['<table cellspacing="0" cellpadding="0" role="presentation">','<tr><td style="text-align:center" align="center">$countContainer</td></tr>','<tr><td class="gig-button-td"  style="text-align:center">$button</td></tr>',"</table>"]),t.set("buttonWithCountRight",['<table cellspacing="0" cellpadding="0" role="presentation"><tr>','<td class="gig-button-td">$button</td>',"<td>$countContainer</td>","</tr></table>"]),t.set("image",['<img id="$imgId" src="$src" alt="$alttext" />']),t.set("imageWithSize",['<img id="$imgId" src="$src" width="$size" height="$size" alt="$alttext" tabindex="$tabindex" />']),t.set("facebookLikeButton",['<div id="$containerID"><div class="fb-like" style="zoom:1" data-width="$width" data-send="false" data-show-faces="false" data-ref="$ref" data-href="$href" data-layout="$layout" data-action="$action" data-gig-btnid="$id" data-colorscheme="$colorscheme" data-font="$font"></div></div>']),t.set("facebookSendButton",['<div id="$containerID"><div class="fb-send" data-ref="$ref" data-href="$href" data-colorscheme="$colorscheme" data-font="$font"></div></div>']),t.set("facebookShareButton",['<div id="$containerID"><div class="fb-share-button" data-ref="$ref" data-href="$href" data-type="$layout" data-width="$width"></div></div>']),t.set("facebookSubscribeButton",['<div id="$containerID"><div class="fb-subscribe" data-height="80" data-width="$width" data-show-faces="false" data-href="$href" data-layout="$layout" data-gig-btnid="$id" data-colorscheme="$colorscheme" data-font="$font"></div></div>']),t.set("googlePlusOneButton",['<div id="$containerID" style="line-height:1px;"><div class="g-plusone" data-href="$href" data-size="$size" data-callback="$callback" data-annotation="$annotation" data-width="$width"></div></div>']),t.set("googlePlusShareButton",['<div id="$containerID" style="line-height:1px;"><div class="g-plus" data-action="share" data-href="$href" data-onendinteraction="$callback" data-annotation="$annotation" data-height="$height" data-width="$width"></div></div>']),t.set("twitterTweetButton",['<div id="$containerID" style="min-width:${width}px"><a href="$twitterHref" class="$twitterClass" data-url="$href" data-via="$via" data-size="$size" ','data-count="none" data-text="$defaultText" data-lang="$lang" data-related="$related" ></a></div>']),t.set("pinterestPinitButton",['<div id="$containerID"><a data-pin-do="buttonPin" href="http://pinterest.com/pin/create/button/?url=${href}&media=${thumbnailURL}&description=${description}" class="pin-it-buttona" count-layout="${count}" ${shape} ><img border="0" src="${imgName}" title="Pin It" /></a></div>']),t.set("moshareSmsButton",['<a href="http://www.mogreet.com/moshare/it/" class="${moshareClass}" data-title="${title}" data-message="${description}" data-thumbnail="${thumbnailURL}"></a>']),t.set("getglueButton",['<a class="glue-checkin-widget" href="$href" data-type="$type" data-message="$message" data-title="$title" data-callback="$callbackId"></a>']),t.set("hatenaBookmarkButton",['<div id="$containerID">','<a href="$protocol//b.hatena.ne.jp/entry/$href"',' class="hatena-bookmark-button"',' data-hatena-bookmark-title="$title"',' data-hatena-bookmark-layout="$layout"',' data-hatena-bookmark-lang="$lang" title="ブックマーク">','<img src="$protocol//b.st-hatena.com/images/entry-button/button-only@2x.png" alt="" width="20" height="20" style="border: none;" />',"</a>","</div>"]),t.set("lineitShareButton",['<div id="$containerID">','     <a href="http://line.naver.jp/R/msg/text/?$title%0a$href">','         <img src="$imgUrl" width="$w" height="$h" alt="$alt" />',"     </a>","</div>"]),t},defaultCss:[".gig-bar-container *, div.gig-reactions-container, .gig-reactions-container span, .gig-reactions-container a:hover, .gig-reactions-container a:visited, .gig-reactions-container a:link, .gig-reactions-container a:active{","font-size:12px;border:none; padding:0px;margin:0px;color:inherit;text-decoration:none;width:auto;float:none;-moz-border-radius:0;border-radius:0;","font-family:arial;font-size:10px;color:#4D4D4D;background:none}","table.gig-reactions-container{border-collapse:separate;}","div.gig-button-container {padding:0 5px 0 0; display:inline-block;vertical-align:top;margin-bottom:5px;} ","div.gig-button-container-vertical {padding:0 0 5px 0}",'[gigid="showShareBarUI"] .gig-button-container-twitter-tweet > div {display: inline;}',"div.gig-button {cursor:pointer;}","div.gig-button-disabled {cursor:default;}","div.gig-counter{margin:0 auto;position:relative;zoom:1;}","span.gig-counter-text{display:block;position:relative;font-weight:bold;zoom:1}","td.gig-button-td{vertical-align:middle}","*.gig-bar-container img {display:block}","div.gig-button-container-twitter-tweet iframe,div.gig-button-container-twitter-hashtag iframe,div.gig-button-container-twitter-mention iframe {display:block}","div.gig-button-container-pinterest-pinit {height:20px;}","div.gig-button-container-pinterest-pinit a {cursor: pointer;}","div.gig-button-container-pinterest-pinit.gig-button-container-count-right {width:80px;}","div.gig-button-container-pinterest-pinit.gig-button-container-count-top.gig-button-container-vertical {position:relative;height:50px;}","div.gig-button-container-pinterest-pinit.gig-button-container-count-top.gig-button-container-vertical > div {position:absolute;bottom:2px;}","div.gig-counter-top {margin-bottom: 1px;}","div.gig-counter-right {margin-left: 1px;}","div.gig-button-count-top table {margin:0 auto;text-align:center;}","div.gig-bar-button-icon {position:absolute;padding-top:1px;}","span.gig-bar-button-text {padding-left:19px;white-space:nowrap;zoom:1;}","a.gig-bar-button,a:hover.gig-bar-button,a:link.gig-bar-button,a:active.gig-bar-button,a:visited.gig-bar-button {","white-space:nowrap;line-height: 18px;position:relative;border-radius: 3px; color:#4d4d4d;cursor:pointer;","font-size: 11px;padding: 0 5px; border: 1px solid #C5C7C7;display:inline-block;zoom:1;vertical-align:middle; text-align:center;","}","a.gig-bar-button,a:link.gig-bar-button,a:active.gig-bar-button,a:visited.gig-bar-button {",'background: #FFFFFF; filter: progid:DXImageTransform.Microsoft.gradient(startColorstr="#FFFFFF", endColorstr="#EAEBEB");',"background: -webkit-gradient(linear, left top, left bottom, from(#FFFFFF), to(#EAEBEB));","background: -moz-linear-gradient(top,  #FFFFFF,  #EAEBEB)}","a:hover.gig-bar-button, a.gig-bar-button-down,a:link.gig-bar-button-down,a:active.gig-bar-button-down,a:visited.gig-bar-button-down {",'background: #EAEBEB; filter: progid:DXImageTransform.Microsoft.gradient(startColorstr="#EAEBEB", endColorstr="#FFFFFF");',"background: -webkit-gradient(linear, left top, left bottom, from(#EAEBEB), to(#FFFFFF));","background: -moz-linear-gradient(top,  #EAEBEB,  #FFFFFF)}"],nonMobileCss:["div.gig-button-text {white-space:nowrap;font-size:11px;color:#333333; padding: 0 3px 0 3px;}","span.gig-counter-text-right{left:1px;font-size:11px;line-height:20px;}","span.gig-counter-text-top{top:-2px;font-size:14px}","div.gig-button-container-facebook-like-count-right {height:20px}","div.gig-button-container-facebook-like-count-top {height:62px}","div.gig-button-container-facebook-send {height:20px}"],mobileCss:[".gig-bar-container * {font-size: 16px;-webkit-text-size-adjust:none; -webkit-touch-callout: none; -webkit-user-select: none;font-family:sans-serif}",".gig-bar-container {overflow:auto;}","div.gig-button-text {white-space:nowrap;font-size:15px;color:#333333; padding: 0 3px 0 3px;}","span.gig-counter-text-right{left:1px;font-size:14px;line-height:35px;}","span.gig-counter-text-top{top:-2px;font-size:18px}"]};n.providerSupportsCounter=function(t){switch(t){case"digg":case"share":case"stumbleupon":case"facebook":case"comments":case"facebook-like":case"facebook-send":case"facebook-subscribe":case"facebook-share":case"google-plusone":case"googleplus-share":case"moshare-sms":case"pinterest":case"pinterest-pinit":case"linkedin":case"getglue":case"hatena-bookmark":case"vkontakte":return!0}return!1};var i=function(){return function(t){this.button=t,this.item=this.getItem()}};n.ButtonItem={generic:i(),"facebook-subscribe":i(),"facebook-send":i(),"facebook-share":i(),"facebook-like":i(),"google-plusone":i(),"googleplus-share":i(),"googleplus-interactive":i(),"moshare-sms":i(),getglue:i(),"twitter-tweet":i(),"twitter-hashtag":i(),"twitter-mention":i(),comments:i(),foursquare:i(),"foursquare-save":i(),"pinterest-pinit":i(),kindle:i(),"hatena-bookmark":i(),lineit:i()},n.ButtonItem.generic.prototype.getItem=function(){var t=this.button,e=t.plugin.spriteRenderer.button,n=t.plugin.spriteRenderer.icons,i=gigya.utils.object.clone(t.oButton);i.onClick=gigya.utils.DOM.attributeEncode(t.getRefString()+".onClick()");var o=gigya.utils.object.clone(t.plugin.buttonImages);t.noButtonBorders&&(o={countBGImg:o.countBGImg}),i.buttonLeftImg=o["buttonLeftImg"+t.state],i.buttonCenterBGImg=o["buttonCenterBGImg"+t.state],i.buttonRightImg=o["buttonRightImg"+t.state],o.countBGImg?(i.countBGImg=o.countBGImg,i.countBgStyle="background-image:url('$countBGImg');background-repeat:no-repeat;"):i.countBgStyle=t.plugin.spriteRenderer.count.getStyleString("default"),i.count="",i.iconImg=i.iconImgUp?i.iconImgUp:i.defaultIconImgUp;var a=t.id.split("-")[0];i.elButtonLeftImg=t.noButtonBorders?"":t.getButtonImageHTML("left-up","buttonLeftImgUp","left",e,o,void 0,"",-1),i.elButtonRightImg=t.noButtonBorders?"":t.getButtonImageHTML("right-up","buttonRightImgUp","right",e,o,void 0,"",-1),i.elIconImg=t.getButtonImageHTML(a,"iconImgUp","icon",n,i,t.iconSize,t.labelText?t.labelText:"",0),i.iconTD=t.plugin.templates.get("iconTD"),i.buttonCenterBGImg||(i.buttonCenterBGImg=""),i.countCenterBGImg||(i.countCenterBGImg=""),""==i.buttonCenterBGImg?i.buttonCenterBGStyle="":i.buttonCenterBGStyle="background-image:url('"+i.buttonCenterBGImg+"')",t.labelText&&""!=t.labelText?(i.text=t.labelText,i.textTD=t.plugin.templates.get("textTD")):(i.text="",i.textTD=""),i.tooltip||(i.tooltip=""),i.buttonType=t.plugin._i.buttonsType,i.onMouseOver=t.getRefString()+".changeState('over')",i.onMouseOut=t.getRefString()+".changeState('up')",i.button=t.plugin.templates.get("button"),i.countContainer=t.plugin.templates.get("countContainer"),i.showCounts=t.showCounts,i.count=t.plugin.templates.get("count"),i.countId="$id-count",i.countValue="",i.cellValign="bottom";var s=t.plugin._p.showCounts;switch(s&&(s=s.toLowerCase()),s||(s="right"),gigya.utils.validation.isExplicitTrue((t.plugin._p.iconsOnly||t.noButtonBorders)&&"right"==s)&&(i.cellValign="middle"),t.showCounts){case"right":i.counterTextClass="gig-counter-text gig-$buttonType-counter-text gig-counter-text-right gig-$buttonType-counter-text-right",i.buttonContainer=t.plugin.templates.get("buttonWithCountRight");break;case"top":i.counterTextClass="gig-counter-text gig-$buttonType-counter-text gig-counter-text-top gig-$buttonType-counter-text-top",i.buttonContainer=t.plugin.templates.get("buttonWithCountTop");break;case"none":default:i.buttonContainer=t.plugin.templates.get("buttonWithoutCount")}return t.plugin.usingCountTemplate&&(i.counterTextClass=""),i},n.ButtonItem["facebook-like"].prototype={getItem:function(){var t=this.button,e="none"==t.showCounts?"standard":"top"==t.showCounts?"box_count":"button_count",n=gigya._.apiAdapter.getTokenParam(t.plugin._c.APIKey,"UUID"),i={uu:n,s:t.plugin._p.source,p:t.id},o={id:t.containerID+(new Date).getTime(),buttonType:"share",className:this.className+" gig-facebookLikeButton-"+e,buttonContainer:t.plugin.templates.get("facebookLikeButton"),layout:t.oButton.layout||e,action:t.oButton.action?t.oButton.action:"like",colorscheme:t.oButton.colorscheme?t.oButton.colorscheme:"",font:t.oButton.font?t.oButton.font:"",containerID:t.containerID,ref:gigya.utils.keyValue.serialize(i,":"),width:t.oButton.width?t.oButton.width:55,href:t.getShareURL()};return"facebook-send"==t.id?o.buttonContainer=t.plugin.templates.get("facebookSendButton"):"facebook-subscribe"==t.id?o.buttonContainer=t.plugin.templates.get("facebookSubscribeButton"):"facebook-share"==t.id&&(o.layout="none"==t.showCounts?"button":"top"==t.showCounts?"box_count":"button_count",o.buttonContainer=t.plugin.templates.get("facebookShareButton")),this.id=o.id,o},render:function(){var t=this.button,e=this.id;gigya.external.facebook.initializedTime||gigya.external.facebook.load(!0);var i=gigya.thisScript.lang.full.replace("-","_");gigya.utils.script.load(gigya.localInfo.protocol+"://connect.facebook.net/"+i+"/sdk.js",null,function(){if("undefined"!=typeof FB){if(FB.XFBML&&FB.XFBML.parse){var i=document.getElementById(t.containerID);i&&gigya.utils.functions.invokeOnPageLoad(function(){window.setTimeout(function(){""==i.firstChild.innerHTML&&FB.XFBML.parse(i)},100)})}!FB.Event||!FB.Event.subscribe||"facebook-send"==t.id&&n.addedFBSendEvent||("facebook-send"==t.id&&(n.addedFBSendEvent=!0),FB.Event.subscribe("facebook-send"==t.id?"message.send":"edge.create",function(n,i){if(i.getAttribute("data-gig-btnid")==e||"facebook-send"==t.id){var o={eventName:"sendDone",providers:t.plugin._p.facebookLikeButton&&"facebook-like"==t.id?"facebookLike":t.id,userMessage:"",targetURL:n};gigya.events.dispatchForWidget(o,t.plugin._p),t.plugin.reportShare(t.id,n)}}))}},!0)}},n.ButtonItem["facebook-send"]=n.ButtonItem["facebook-like"],n.ButtonItem["facebook-subscribe"]=n.ButtonItem["facebook-like"],n.ButtonItem["facebook-share"]=n.ButtonItem["facebook-like"],n.ButtonItem["google-plusone"].prototype={getItem:function(){var t=this.button.plugin,e=this.button,n={buttonType:"share",buttonContainer:this.button.plugin.templates.get("googlePlusOneButton"),count:e.showCounts&&"none"!=e.showCounts,callback:"gig-googlePlusOne-"+e.containerID,size:e.oButton.size?e.oButton.size:e.showCounts&&"top"==e.showCounts?"tall":t.isMobileUI?"standard":"medium",containerID:e.containerID,annotation:e.oButton.annotation?e.oButton.annotation:"none"==e.showCounts?"none":"bubble",width:e.oButton.width?e.oButton.width:""};return window[n.callback]=function(e){if("on"==e.state){var n={eventName:"sendDone",providers:"google-plusOne",userMessage:"",targetURL:e.href};gigya.events.dispatchForWidget(n,t._p),t.reportShare("google-plusOne",e.href)}},n},render:function(){var t=this.button;window.___gcfg={lang:this.button.plugin._p.lang},gigya.utils.script.load("https://apis.google.com/js/plusone.js",null,function(){"undefined"!=typeof gapi&&gapi.plusone&&gapi.plusone.go(t.containerID)},!0)}},n.ButtonItem["googleplus-share"].prototype={getItem:function(){var t=this.button.plugin,e=this.button,n={buttonType:"share",buttonContainer:this.button.plugin.templates.get("googlePlusShareButton"),callback:"gig-googlePlusOne-"+e.containerID,containerID:e.containerID,annotation:e.oButton.annotation?e.oButton.annotation:"none"==e.showCounts?"none":"top"==e.showCounts?"vertical-bubble":"bubble",width:e.oButton.width?e.oButton.width:"",height:e.oButton.height?e.oButton.height:t.isMobileUI?"24":""};return window[n.callback]=function(e){if("confirm"==e.type){var n={eventName:"sendDone",providers:"google-plusOne",userMessage:"",targetURL:e.href};gigya.events.dispatchForWidget(n,t._p),t.reportShare("googleplus-share",e.id)}},n},render:function(){var t=this.button;window.___gcfg={lang:this.button.plugin._p.lang},gigya.utils.script.load("https://apis.google.com/js/plusone.js",null,function(){"undefined"!=typeof gapi&&gapi.plus&&gapi.plus.go(t.containerID)},!0)}},n.ButtonItem["googleplus-interactive"].prototype={getItem:n.ButtonItem.generic.prototype.getItem,render:function(){var t=this.button,e=t.plugin.$(t.containerID);e.removeAttribute("onClick"),window.___gcfg={lang:this.button.plugin._p.lang},gigya.utils.script.load("https://apis.google.com/js/client:plusone.js",null,function(){var e={calltoactionlabel:t.oButton.callToActionLabel,calltoactionurl:t.oButton.callToActionURL,contentdeeplinkid:t.oButton.contentDeepLinkID,clientid:t.oButton.clientID,contenturl:t.oButton.contentURL,calltoactiondeeplinkid:t.oButton.callToActionDeepLinkID,cookiepolicy:t.oButton.cookiePolicy,prefilltext:t.oButton.preFillText};"undefined"!=typeof gapi&&gapi.interactivepost&&gapi.interactivepost.render(t.containerID,e)},!0)}},n.ButtonItem["moshare-sms"].prototype={getItem:function(){var t,e=this.button,n=e.getUserAction();t="right"==e.showCounts?e.oButton.iconOnly||gigya.utils.validation.isExplicitTrue(e.plugin._p.iconsOnly)?"moshare-chicklet-hor":"moshare-button-hor":e.oButton.iconOnly?"moshare-button-mini":"moshare-button";var i=e.getThumbnailURL(),o={buttonType:"share",buttonContainer:e.plugin.templates.get("moshareSmsButton"),moshareClass:t,title:n.title?n.title:"",description:n.description?n.description:"",thumbnailURL:i?i:""};return o},render:function(){"https"!==gigya.localInfo.protocol&&gigya.utils.script.load("http://d2c.bandcon.mogreet.com/moshare/embed/moshare.js")}},n.ButtonItem.getglue.prototype={getItem:function(){var t=this,e=this.button,n=e.getUserAction(),i={buttonType:"share",buttonContainer:e.plugin.templates.get("getglueButton"),title:n.title?n.title:"",message:n.description?n.description:"",type:"right"==e.showCounts?"horizontal":"vertical",callbackId:"gig_getglue+"+(new Date).getTime()};return window[i.callbackId]=function(n){var i={eventName:"sendDone",providers:"getglue",targetURL:t.item.href};gigya.events.dispatchForWidget(i,e.plugin._p),e.plugin.reportShare("getglue",t.item.href)},i},render:function(){gigya.utils.script.load(gigya.localInfo.protocol+"://widgets.getglue.com/checkin.js",null,function(){window.getglue&&window.getglue.loadWidgets()},!0)}},n.ButtonItem["twitter-tweet"].prototype={getItem:function(){var t,e,n=this.button;switch(this.button.id){case"twitter-mention":t="twitter-mention-button",e="https://twitter.com/intent/tweet?screen_name="+(null!=n.oButton.mention?n.oButton.mention:"&#160;");break;case"twitter-hashtag":t="twitter-hashtag-button",e="https://twitter.com/intent/tweet?button_hashtag="+(null!=n.oButton.hashtag?n.oButton.hashtag:"&#160;");break;case"twitter-tweet":default:t="twitter-share-button",e="https://twitter.com/share"}var i=n.getUserAction().title,o=n.plugin.isMobileUI?80:55,a={buttonType:"share",buttonContainer:n.plugin.templates.get("twitterTweetButton"),twitterClass:t,twitterHref:e,containerID:n.containerID+"_tweet"+(new Date).getTime(),via:n.oButton.via?n.oButton.via:"",defaultText:n.oButton.defaultText?n.oButton.defaultText:i?i:"",lang:n.oButton.lang?n.oButton.lang:n.plugin._p.lang,related:n.oButton.related?n.oButton.related:"",size:n.plugin.isMobileUI?"large":"",width:n.oButton.width||o};return this.containerID=a.containerID,a},render:function(){var t=this.button.plugin,e=this,n=document.getElementById(this.containerID),i=function(){if(n){try{twttr.widgets.load(n)}catch(t){}twttr.events.bind("tweet",function(n){if(n.target.parentNode.id==e.containerID){var i={eventName:"sendDone",providers:e.button.id,userMessage:"",targetURL:e.item.href};gigya.events.dispatchForWidget(i,t._p),t.reportShare(e.button.id,e.item.href)}})}};gigya.utils.script.load(gigya.localInfo.protocol+"://platform.twitter.com/widgets.js",null,i,!0)}},n.ButtonItem["twitter-hashtag"]=n.ButtonItem["twitter-tweet"],n.ButtonItem["twitter-mention"]=n.ButtonItem["twitter-tweet"],n.ButtonItem.comments.prototype={getItem:n.ButtonItem.generic.prototype.getItem,render:function(){var t=this,e={callback:function(e){0==e.errorCode&&"none"!=t.button.showCounts&&e.streamInfo&&e.streamInfo.commentCount&&e.streamInfo.commentCount>0&&t.button.updateCount(e.streamInfo.commentCount)},categoryID:this.button.oButton.categoryID,streamID:this.button.oButton.streamID,cacheTimeout:this.button.plugin._p.shareCountCacheTimeout};gigya.services.comments.getStreamInfo(this.button.plugin._c,e)}},n.ButtonItem.foursquare.prototype={getItem:n.ButtonItem.generic.prototype.getItem,render:function(){var t=this.button,e="http://platform.foursquare.com/js/widgets.js";"https"==gigya.localInfo.protocol&&(window.___fourSq={secure:!0},e="https://platform-s.foursquare.com/js/widgets.js"),gigya.utils.script.load(e,null,function(){var e=new fourSq.widget.SaveTo({vid:t.oButton.vid,variant:t.oButton.variant,hideTooltip:t.oButton.hideTooltip});e.bind("added",function(){var e={eventName:"sendDone",providers:t.id,userMessage:"",targetURL:""};gigya.events.dispatchForWidget(e,t.plugin._p),t.plugin.reportShare(t.id,"")}),e.attach(document.getElementById(t.containerID))},!0)}},n.ButtonItem["foursquare-save"].prototype={getItem:function(){var t={buttonType:"share",buttonContainer:'<div id="'+this.button.containerID+'"></div>',count:"none"};return t},render:function(){var t=this.button,e="http://platform.foursquare.com/js/widgets.js";"https"==gigya.localInfo.protocol&&(window.___fourSq={secure:!0},e="https://platform-s.foursquare.com/js/widgets.js"),gigya.utils.script.load(e,null,function(){var e=new fourSq.widget.SaveTo({vid:t.oButton.vid,variant:t.oButton.variant,hideTooltip:t.oButton.hideTooltip});e.bind("open",function(){gigya.events.dispatchForWidget({eventName:"shareButtonClicked",shareItem:t.oButton},t.plugin._p)}),e.bind("added",function(){var e={eventName:"sendDone",providers:t.id,userMessage:"",targetURL:""};gigya.events.dispatchForWidget(e,t.plugin._p),t.plugin.reportShare(t.id,"")}),e.replace(document.getElementById(t.containerID))},!0)}},n.ButtonItem["pinterest-pinit"].prototype={getItem:function(){var t=this.button,e=t.getUserAction(),n=t.oButton.shape?t.oButton.shape:"",i=gigya.localInfo.protocol+":"+("round"==n?"//assets.pinterest.com/images/pidgets/pinit_fg_en_round_red_16.png":"//assets.pinterest.com/images/pidgets/pinit_fg_en_rect_gray_20.png"),o={buttonType:"share",buttonContainer:t.plugin.templates.get("pinterestPinitButton"),count:"top"==t.showCounts?"vertical":"right"==t.showCounts?"horizontal":"none",description:gigya.utils.URL.URLEncode(e.description),href:gigya.utils.URL.URLEncode(t.getShareURL()),containerID:t.containerID,lang:t.oButton.lang?t.oButton.lang:t.plugin._p.lang,related:t.oButton.related?t.oButton.related:"",shape:"round"==n?'data-pin-round="true"':"",imgName:i},a=t.getThumbnailURL();return a?o.thumbnailURL=gigya.utils.URL.URLEncode(a):o.thumbnailURL=gigya.utils.URL.URLEncode(o.href),this.containerID=o.containerID,o},render:function(){gigya.utils.script.load(gigya.localInfo.protocol+"://assets.pinterest.com/js/pinit.js")}},n.ButtonItem.kindle.prototype={getItem:n.ButtonItem.generic.prototype.getItem,render:function(){var t=this.button.oButton,e=this,n=document.getElementById(this.button.containerID);n&&(gigya.utils.DOM.addClassToElement(n,"kindleWidget"),gigya.utils.DOM.addEventListener(n,"click",function(){e.button.plugin.reportShare("kindle","")}),gigya.utils.script.load("https://d1xnn692s7u6t6.cloudfront.net/widget.js",null,function(){if(window.$SendToKindle&&window.$SendToKindle.Widget){var e=gigya.utils.object.removeUndefined({content:t.content,title:t.title,author:t.author,published:t.published,exclude:t.exclude,pagination:t.pagination,asin:t.asin});$SendToKindle.Widget.init(e)}},!0))}},n.ButtonItem["hatena-bookmark"].prototype={getItem:function(){var t=this.button,e="none"==t.showCounts?"standard-noballoon":"top"==t.showCounts?"vertical-balloon":"standard-balloon",n=gigya.utils.validation.isExplicitTrue(t.plugin._p.iconsOnly);null!=t.oButton.iconOnly&&(n=gigya.utils.validation.isExplicitTrue(t.oButton.iconOnly)),n&&(e="none"==t.showCounts?"simple":"top"==t.showCounts?"simple":"simple-balloon");var i=(t.pluginInstance,"ja");"en"==t.oButton.lang&&(i="en");var o=gigya._.apiAdapter.getTokenParam(t.plugin._c.APIKey,"UUID"),a={uu:o,s:t.plugin._p.source,p:t.id},s={protocol:gigya.localInfo.protocol,id:t.containerID+(new Date).getTime(),buttonType:"share",className:this.className+" gig-hatenaBookmarkButton-"+e,buttonContainer:t.plugin.templates.get("hatenaBookmarkButton"),layout:e,containerID:t.containerID,ref:gigya.utils.keyValue.serialize(a,":"),lang:i,title:t.getUserAction().title};return this.id=s.id,s},render:function(){"https"!==gigya.localInfo.protocol&&gigya.utils.script.load(gigya.localInfo.protocol+"://b.hatena.ne.jp/js/bookmark_button.js")}},n.ButtonItem.lineit.prototype={constant:{LINE_BASE_URL:"//line.me/R/msg/text/",IMG_BASE_URL:"//media.line.me/img/button/",ALT:{ja:"LINEで送る",en:"LINE it!","zh-hans":"LINE it!","zh-hant":"LINE it!"},IMG_SIZE:{ja:{a:[82,20],b:[20,20],c:[30,30],d:[40,40],e:[36,60]},en:{a:[78,20],b:[20,20],c:[30,30],d:[40,40],e:[36,60]},"zh-hans":{a:[84,20],b:[20,20],c:[30,30],d:[40,40],e:[36,60]},"zh-hant":{a:[84,20],b:[20,20],c:[30,30],d:[40,40],e:[36,60]}}},getItem:function(){var t=this.button,e=t.getUserAction(),n=this.constant,i=t.plugin._p.lang;"zh-hk"==i||"zh-tw"==i?i="zh-hans":"ja"!=i&&"en"!=i&&(i="en");var o="a",a=n.IMG_SIZE[i][o],s=[gigya.localInfo.protocol,":",n.IMG_BASE_URL,i,"/",a[0],"x",a[1],".png"].join(""),r={id:t.containerID+(new Date).getTime(),buttonType:"share",className:this.className+" gig-lineitShareButton",href:gigya.utils.URL.URLEncode(t.getShareURL()),title:gigya.utils.URL.URLEncode(e.title||""),buttonContainer:t.plugin.templates.get("lineitShareButton"),containerID:t.containerID,imgUrl:s,alt:n.ALT[i],w:a[0],h:a[1]};return this.id=r.id,r},render:function(){}},n.Button=function(t,e,i,o){if(this.oButton=t,this.index=e,this.type=i,this.pluginInstance=o,this.containerID=o._p.containerID+"-reaction"+e,this.noButtonBorders=gigya.utils.validation.isExplicitTrue(o._p.noButtonBorders),null!=this.oButton.noButtonBorders&&(this.noButtonBorders=gigya.utils.validation.isExplicitTrue(this.oButton.noButtonBorders)),gigya.utils.validation.isExplicitFalse(t.enableCount)&&(this.showCounts="none"),this.showCounts||(this.showCounts=o._p.showCounts),this.showCounts&&(this.showCounts=this.showCounts.toLowerCase()),"share"==i){var a=gigya.utils.validation.isExplicitTrue(o._p.iconsOnly);null!=this.oButton.iconOnly&&(a=gigya.utils.validation.isExplicitTrue(this.oButton.iconOnly)),a&&(this.noButtonBorders=!0);var s=this.oButton.provider.split(" ").join(""),r=gigya.services.socialize._getProviderByName(s,o.bookmarkSitesArray);r&&!a?this.labelText=r.displayName:this.labelText="",this.id=this.oButton.provider.toLowerCase().split(" ").join(""),"share"==this.id&&gigya.utils.script.load(gigya._.getCdnResource("/js/gigya.services.socialize.plugins.simpleshare.min.js"),null,null,!0),this.showCounts||(this.showCounts="right"),n.providerSupportsCounter(this.id)||(this.showCounts="none")}"reaction"==i&&(this.showCounts||(this.showCounts="none"),this.labelText=t.text,this.id=t.ID,this.id||(this.id=this.labelText)),this.plugin=o,this.plugin.buttonInstances||(this.plugin.buttonInstances={}),this.plugin.buttonInstances[this.containerID]=this},n.Button.prototype={$:function(t){return document.getElementById(t)},getRefString:function(){return this.plugin.getInstanceRefString()+".buttonInstances['"+this.containerID+"']"},state:"Up",onClick:function(){if("share"==this.type&&this.plugin.onShare(this),"reaction"==this.type)if("Down"==this.state){if(gigya.utils.validation.isExplicitFalse(this.plugin._p.cancelReactions))return;if(gigya.utils.validation.isExplicitFalse(this.plugin._p.multipleReactions)){var t=this.plugin.buttonInstances;for(var e in t)e!=this.containerID&&t[e].enable()}this.plugin.onUndoReaction(this),this.unfixDown()}else this.plugin.onReaction(this),this.fixDown()},updateImageElement:function(t,e,n,i){t=t.toLowerCase();var o=t.split("-"),a=document.getElementById(this.containerID+"-"+o[0]+"_img");if(a){var s=i[e]?i[e]:this.plugin.buttonImages[e];if(s&&"img"==a.nodeName.toLowerCase())a.src=s;else if(n&&n.spriteData[t]){var r=n.getSpriteData(t);a.style.backgroundImage!='url("'+n.src+'")'&&(a.style.backgroundImage='url("'+n.src+'")'),a.style.backgroundPosition="-"+r.x+"px 0px"}}},getButtonImageHTML:function(t,e,n,i,o,a,s,r){t=t.toLowerCase();var u=t.split("-"),l=o[e]?o[e]:this.plugin.buttonImages[e];return l?this.plugin.getImageHTML(l,this.containerID+"-"+n+"_img",a,s,r):i&&i.spriteData[t]?i.getHTML(t,null,null,this.containerID+"-"+u[0]+"_img",s,r):""},getShareURL:function(){var t=this.oButton.url;if(!t&&this.oButton.userAction&&(t=this.oButton.userAction.linkBack),!t&&this.plugin._p[this.id+"UserAction"]&&(t=this.plugin._p[this.id+"UserAction"].linkBack),!t&&this.plugin._p.userAction&&(t=this.plugin._p.userAction.linkBack),!t)for(var e=document.getElementsByTagName("meta"),n=0;n<e.length;n++)if("og:url"==e[n].getAttribute("property")&&e[n].getAttribute("content")){t=e[n].getAttribute("content");
break}if(!t)for(var i=document.getElementsByTagName("link"),n=0;n<i.length;n++){var o=i[n];"canonical"==o.getAttribute("rel")&&(t=o.getAttribute("href"))}return t||(t=document.location.href),t},getUserAction:function(){var t;return this.oButton.userAction&&(t=this.oButton.userAction),!t&&this.plugin._p[this.id+"UserAction"]&&(t=this.plugin._p[this.id+"UserAction"]),!t&&this.plugin._p.userAction&&(t=this.plugin._p.userAction),t=new gigya.socialize.UserAction(t),t.linkBack=this.getShareURL(),t},getThumbnailURL:function(){var t,e=this.getUserAction(),n=e.mediaItems;if(n)for(var i=0;i<n.length;i++){var o=n[i];if(null!=o){if("image"==o.type){t=o.src;break}if("video"==o.type||"flash"==o.type){t=o.previewImageURL;break}}}return t},getHTML:function(){var t=n.ButtonItem[this.id];t||(t=n.ButtonItem.generic);var e=new t(this),i=e.item;i.href||(i.href=gigya.utils.sanitize.sanitizeAttribute(this.getShareURL())),e.render&&window.setTimeout(function(){e.render()},300);var o=this.plugin._p.layout;o&&(o=o.toLowerCase()),i.className="gig-button-container gig-button-container-count-"+this.showCounts+" gig-button-container-"+this.id+" gig-button-container-"+this.id+"-count-"+this.showCounts+" gig-$buttonType-button-container gig-button-container-horizontal","vertical"==o&&(i.className="gig-button-container gig-button-container-"+this.id+" gig-button-container-count-"+this.showCounts+" gig-$buttonType-button-container gig-button-container-vertical gig-$buttonType-button-container-vertical"),i.cellValign||(i.cellValign="bottom"),i.id||(i.id=this.containerID),(this.plugin._p.buttonTemplate||this.plugin._p.buttonWithCountTemplate)&&("function"==typeof i.buttonContainer&&(i.buttonContainer=i.buttonContainer(i)),i.buttonContainer='<div id="$id" class="gig-button-up"  title="$tooltip" alt="$tooltip">'+i.buttonContainer+"</div>");var a;return a="vertical"==o?this.plugin.templates.get("buttonRow"):this.plugin._p.wrap?this.plugin.templates.get("buttonWithoutCell"):this.plugin.templates.get("buttonCell"),gigya.utils.templates.fill(a,i)},fixDown:function(t){if(gigya.utils.validation.isExplicitFalse(this.plugin._p.multipleReactions)){var e=this.plugin.buttonInstances;for(var n in e)n!=this.containerID&&e[n].disable()}this.changeState("down"),this.disabled=!0,t||this.saveState()},unfixDown:function(){this.disabled=!1,this.changeState("up"),this.saveState()},disable:function(){this.changeState("disabled"),this.disabled=!0},enable:function(){this.disabled=!1,this.changeState("up")},saveState:function(){var t="Down"==this.state;this.plugin.setDownState(this.id,t)},loadState:function(){var t=this.plugin.getDownState(this.id);t&&this.fixDown(!0)},changeState:function(t){if(!this.disabled){var t=t.substring(0,1).toUpperCase()+t.substring(1),e=this.state;this.state=t;var n=this.containerID,i=this.$(n);i.className=i.className.replace("gig-button-"+e.toLowerCase(),"gig-button-"+t.toLowerCase());var o=(this.$(n+"-left_img"),this.$(n+"-icon")),a=this.$(n+"-text"),s=(this.$(n+"-right_img"),this.$(n+"-icon_img"),this.plugin.buttonImages);this.noButtonBorders&&(s={countBGImg:s.countBGImg});var r=this.plugin.spriteRenderer.button,u=this.plugin.spriteRenderer.icons;if(this.noButtonBorders||this.updateImageElement("left-"+t,"buttonLeftImg"+t,r,s),this.noButtonBorders||this.updateImageElement("right-"+t,"buttonRightImg"+t,r,s),this.updateImageElement("icon-"+t,"iconImg"+t,u,this.oButton),!this.noButtonBorders&&o&&s["buttonCenterBGImg"+t]&&(o.style.backgroundImage='url("'+s["buttonCenterBGImg"+t]+'")'),!this.noButtonBorders&&a&&s["buttonCenterBGImg"+t]&&(a.style.backgroundImage='url("'+s["buttonCenterBGImg"+t]+'")'),i){var l;"Disabled"==t?(i.style.cursor="default",l=this.oButton.disabledTooltip):(i.style.cursor="",l=this.oButton.tooltip),l||(l=""),i.title=l,i.alt=l}}},updateCount:function(t,e,n){if(n||(n=0),null!=t&&!(this.plugin._p.displayCountThreshold&&t<this.plugin._p.displayCountThreshold)){this.countValue=t;var i=document.getElementById(this.containerID+"-count"),o=document.getElementById(this.containerID+"-count-value");i&&(i.style.display="");var a="reaction"==this.type&&this.pluginInstance._p.countType&&"percentage"==this.pluginInstance._p.countType.toLowerCase();if(a){if(t=0==this.pluginInstance._totalCount?"0%":Math.round(100*this.countValue/this.pluginInstance._totalCount)+n+"%",!e){var s=this.plugin.buttonInstances;for(var r in s)r!=this.containerID&&s[r].updateCount(s[r].countValue,!0)}}else t>1e3&&(t=Math.round(t/1e3)+"K");o&&(o.innerHTML=""+t),a&&!e&&this.plugin.normalizePercents()}},hideCount:function(t){var e=document.getElementById(this.containerID+"-count");e&&(e.style.display="none")}},n.reactionsPlugin.prototype={$:function(t){return document.getElementById(t)},TEXT:function(t,e,n){return gigya.pluginUtils.lang.getLocalizedText("gigya.services.socialize.plugins.reactions.js",t,this._p.lang,e,n)},getImageHTML:function(t,e,n,i,o){void 0===o&&(o=-1);var a=this.templates.get("image");return n&&(a=this.templates.get("imageWithSize")),gigya.utils.templates.fill(a,{src:t,imgId:e,size:n,alttext:i,tabindex:o})},reportShare:function(t,e){var n=this._p.sourceData?gigya.utils.object.clone(this._p.sourceData):{};n.provider=t,n.url=e,gigya.reports.report("share",this._c.APIKey,this._c.cid,this._p.source,n,{tags:this._p.tags})},getInstanceRefString:function(){return"gigya.services.socialize.plugins.reactions.instances['"+this._elid+"']"},loadDownStates:function(){var t={},e=gigya.utils.localStorage.getItem("reactionState-down_"+this._barID);if(e){for(var n=e.split(","),i=0;i<n.length;i++)t[n[i]]=!0;this._oDownStates=t}this._oDownStates=t},getDownState:function(t){return this._oDownStates[t]},setDownState:function(t,e){this._oDownStates[t]=e;var n=[];for(var i in this._oDownStates)this._oDownStates[i]&&n.push(i);gigya.utils.localStorage.setItem("reactionState-down_"+this._barID,n.join(","))},draw:function(){var t=this.$(this._elid),e=(t.parentNode,this._elid+"_gig_containerParent");if(t.parentNode&&(t.parentNode.id?e=t.parentNode.id:t.parentNode.id=e),this.loadDownStates(),"vertical"==this._p.layout&&(this._p.wrap=!1),(this._p.cssPrefix||1==n.instances_size)&&(gigya.global.addCSS(n.defaultCss,this._p.cssPrefix),this.isMobileUI?gigya.global.addCSS(n.mobileCss,this._p.cssPrefix):gigya.global.addCSS(n.nonMobileCss,this._p.cssPrefix)),this.templates=n.createDefaultTemplates(),this._p.buttonTemplate){var i=this._p.buttonTemplate;this.templates.set("buttonWithoutCount",i),"reaction"==this._i.buttonsType&&(this.templates.set("buttonWithCountTop",i),this.templates.set("buttonWithCountRight",i),"string"==typeof i&&i.indexOf("$count")!=-1&&(this.usingCountTemplate=!0))}if(this._p.buttonWithCountTemplate&&"share"==this._i.buttonsType){var o=this._p.buttonWithCountTemplate;this.templates.set("buttonWithCountTop",o),this.templates.set("buttonWithCountRight",o),"string"==typeof o&&o.indexOf("$count")!=-1&&(this.usingCountTemplate=!0)}this.buttonImages=this._p.buttonImages;var a={};if(!this.buttonImages)if("share"==this._i.buttonsType)if(this.isMobileUI){var s=gigya._.getCdnResource("/gs/i/shareBar/button/mobile/");this.buttonImages={buttonCenterBGImgUp:s+"buttonCenterImgUp.png"},a.button={path:"/shareBar/button/mobile/button[left,right]Img[up].png",w:5,h:35}}else{var s=gigya._.getCdnResource("/gs/i/shareBar/button/");this.buttonImages={buttonCenterBGImgUp:s+"buttonCenterImgUp.png",buttonCenterBGImgOver:s+"buttonCenterImgUp.png"},a.button={path:"/shareBar/button/button[left,right]Img[up,over].png",w:2,h:20}}else{a.button={path:"/shareBar/button/button[left,right]Img[up,over,down,disabled].png",w:2,h:20};var s=gigya._.getCdnResource("/gs/i/reactions/default/");this.buttonImages={buttonCenterBGImgUp:s+"buttonCenterImgUp.gif",buttonCenterBGImgOver:s+"buttonCenterImgBGOver.gif",buttonCenterBGImgDisabled:s+"buttonCenterBGImgDisabled.gif",buttonCenterBGImgDown:s+"buttonCenterImgBGDown.gif"},"right"==this._p.showCounts&&(this.buttonImages.countBGImg=gigya._.getCdnResource("/gs/i/reactions/default/rightCountImg.gif"))}"top"==this._p.showCounts?this.isMobileUI?a.count={path:"/shareBar/button/mobile/topCountImg.png",w:87,h:53}:a.count={path:"/shareBar/button/topCountImg.png",w:55,h:37}:this.isMobileUI?a.count={path:"/shareBar/button/mobile/rightCountImg.png",w:45,h:35}:a.count={path:"/shareBar/button/rightCountImg.png",w:38,h:20},this.imageCache={loadedCount:0,imgs:[],imgCount:0};for(var r in this.buttonImages)this.imageCache.imgCount++;if(this.imageCache.imgCount>0){t.style.visibility="hidden";var u=this.imageCache,l=function(){u.loadedCount++,u.loadedCount==u.imgCount&&(t.style.visibility="visible")}}window.setTimeout(function(){t&&t.style&&(t.style.visibility="visible")},5e3);var g=this;for(btnImg in this.buttonImages){var c=new Image;if(c.onload=l,c.onerror=l,"countBGImg"==btnImg){if("none"==this._p.showCounts){l();continue}c.onload=function(){var e=this,n=t.getElementsByTagName("div");window.setTimeout(function(){for(var t=0;t<n.length;t++)n[t].className.indexOf("gig-counter")!=-1&&(n[t].style.width=e.width+"px",n[t].style.height=e.height+"px",n[t].style.zoom="1",n[t].style.position="relative")},100),l(),this.onload=null}}"buttonCenterBGImgUp"==btnImg&&(c.onload=function(){var e=this,n=t.getElementsByTagName("div");window.setTimeout(function(){for(var t=0;t<n.length;t++)n[t].className.indexOf("gig-button-td")!=-1&&(n[t].style.height=e.height+"px")},100),l(),this.onload=null}),c.src=this.buttonImages[btnImg],u.count++,u.imgs.push(c)}var d,p,h=[],b=this._i.buttonsType;switch(b){case"share":var m=this._p.shareButtons;if("string"==typeof m){d=[];for(var f=m.split(","),v=0;v<f.length;v++){var I={},y=f[v];I.provider=y,d.push(I)}}else d=m;var B=[],w=[],C="/sharebar/icons/",k=16;this.isMobileUI&&(C+="mobile/",k=25);for(var v=0;v<d.length;v++){var I=d[v];if(I){var y=I.provider;if(y){y=y.split(" ").join("");var _=gigya.services.socialize._getProviderByName(y,this.bookmarkSitesArray);if(null!=_){var x=_.name.split("-")[0];w.push(x),I.iconImgUp||(I.defaultIconImgUp=gigya._.getCdnResource("/gs/i"+C+x+".png"),I.iconSize=k),B.push(d[v])}}}}a.icons={path:C+"["+w.join(",")+"].png",w:k,h:k},d=B,p=this.updateShareCounts;break;case"reaction":default:p=this.updateReactionsCounts,d=this._p.reactions}this.spriteRenderer=gigya.global.getSpriteRenderers(a);var D=this._p.layout;D&&(D=D.toLowerCase());var T="vertical"==D,$=this._p.showCounts;$&&($=$.toLowerCase()),this._p.wrap||(h.push('<table cellspacing="0" cellpadding="0" role="presentation">'),T||h.push("<tr>"));var S="first";this._p.facebookLikeButton&&this._p.facebookLikeButton.position&&(S=this._p.facebookLikeButton.position),S=S.toLowerCase();var L="gig-facebookLikeButton";if(T||("first"==S&&(L="gig-facebookLikeButton-first"),"last"==S&&(L="gig-facebookLikeButton-last")),"share"==b&&this._p.facebookLikeButton){var U=gigya.utils.object.clone(this._p.facebookLikeButton);U.provider="facebook-like","first"==S?d.splice(0,0,U):"last"==S&&d.push(U)}for(var v=0;v<d.length;v++)if(d[v]){var E=new n.Button(d[v],v,b,this);h.push(E.getHTML())}this._p.wrap||T||h.push("</tr>"),h.push("</table>"),t.innerHTML='<div class="gig-bar-container gig-'+b+'-bar-container">'+h.join("")+"</div>";for(var R in this.buttonInstances)this.buttonInstances[R].loadState();p.apply(this,[$]),gigya.events.dispatchForWidget({eventName:"load",containerID:this._p.containerID},this._p),this.isMobileUI&&(gigya.utils.DOM.addEventListener(window,"resize",function(){return g.onResize()}),this.onResize())},onResize:function(){var t=this.$(this._elid);t&&(t.style.width=document.body.offsetWidth+"px")},updateShareCounts:function(t){if("none"!=t){var e=this,n="",i={enabledProviders:"",URL:this._p.userAction.linkBack,callback:function(t){e.updateCounts(t.shareCounts,"id")},cacheTimeout:this._p.shareCountCacheTimeout};for(var o in this.buttonInstances){var a=this.buttonInstances[o].oButton.provider.toLowerCase().split("-")[0];n.indexOf(a)==-1&&(n+=a+",")}for(var o in this.buttonInstances){var s=this.buttonInstances[o].oButton.provider.toLowerCase().split(" ").join("");"share"==s?i.enabledProviders=n:(i[s+"URL"]=this._p.countURL||this.buttonInstances[o].oButton.countURL||this.buttonInstances[o].getShareURL(),i.enabledProviders!=n&&(i.enabledProviders+=s+","))}gigya.services.socialize.getProviderShareCounts(this._c,i)}},updateReactionsCounts:function(t){var e="",n=this;for(var i in this.buttonInstances){var o=this.buttonInstances[i].id;e+=o+","}if(e){var a={barID:this._barID,buttonIDs:e,callback:function(t){if(t.errorCode>0&&gigya.events.dispatchErrorFromResponse(n._p,t),t.counts){for(var e={},i=0;i<t.counts.length;i++)e[t.counts[i].buttonId]=t.counts[i].count;n.updateCounts(e,"id")}}};this.usingCountTemplate||null!=t&&"none"!=t?a.reportLoad="yes":a.reportLoad="reportOnly",gigya.services.socialize.getReactionsCount(this._c,a)}},normalizePercents:function(){var t=0;for(var e in this.buttonInstances){var n=this.buttonInstances[e];n.delta=Math.round(n.countValue/this._totalCount*100)-n.countValue/this._totalCount*100,t+=Math.round(n.countValue/this._totalCount*100)}for(var i=t-100;i<0;){var o;for(var e in this.buttonInstances){var n=this.buttonInstances[e];(!o||n.delta<o.delta)&&(o=n)}o.updateCount(o.countValue,!0,1),o.delta=0,i++}for(;i>0;){var a;for(var e in this.buttonInstances){var n=this.buttonInstances[e];(!a||n.delta>a.delta)&&(a=n)}a.updateCount(a.countValue,!0,-1),a.delta=0,i--}},updateCounts:function(t,e){if(t){var n=0;for(var i in t)n+=t[i];this._totalCount=n;for(var o in this.buttonInstances){var a=this.buttonInstances[o],s=a[e];"share"==s?a.updateCount(n):a.updateCount(t[s])}}},onShare:function(t){var e=t.oButton;"share"==t.id||"comments"==t.id||isNaN(t.countValue)||t.sharedOnce||(this._totalCount+=1,t.updateCount(t.countValue+1),t.sharedOnce=!0);var n=gigya.utils.object.clone(this._p,!1,!0);n.onSendDone=this._p.onSendDone,n.userAction=t.getUserAction(),t.oButton.userMessage&&(n.userAction.userMessage=t.oButton.userMessage);var i=e.provider.toLowerCase().split(" ").join("");switch(i){case"foursquare":break;case"kindle":break;case"print":window.print();break;case"comments":break;case"email":this.isMobileUI?gigya._.sendEmailNative(n):(n.operationMode="multiSelect",n.hideSidebar=!0,n.initialView="email",n.containerID="",gigya.services.socialize.showShareUI(n));break;case"share":n.operationMode||(n.operationMode="simpleShare"),delete n.containerID,n.snapToElementID=t.containerID,gigya.services.socialize.showShareUI(n);break;default:n.provider=i,n.description=n.userAction.description,n.title=n.userAction.title,n.url=n.userAction.linkBack,n.providerKey=this._p[i+"Key"];var o,a=["enablePopupLocation","popupWidth","popupHeight","popupPositionY","popupPositionX"];for(var s in a)o=a[s],void 0!==t.oButton[o]&&null!==t.oButton[o]&&(n[o]=t.oButton[o]);var r=t.getThumbnailURL();r&&(n.thumbnailURL=r),gigya.services.socialize.postBookmark(n);var u={eventName:"sendDone",providers:i,userMessage:n.userAction.userMessage,targetURL:n.userAction.linkBack};gigya.events.dispatchForWidget(u,this._p)}gigya.utils.sessionCache.remove("getProviderShareCount_"+i.toLowerCase()+"_"+encodeURIComponent(n.url)),gigya.events.dispatchForWidget({eventName:"shareButtonClicked",shareItem:e},this._p)},onUndoReaction:function(t){var e=this._c.sourceData?gigya.utils.object.clone(this._c.sourceData,!1,!0):{};e.buttonID=t.id,e.buttonText=t.labelText,gigya.services.socialize.incrementReactionsCount(this._c,{barID:this._barID,buttonID:t.id,count:-1,sourceData:e}),isNaN(t.countValue)||(this._totalCount-=1,t.updateCount(t.countValue-1)),gigya.events.dispatchForWidget({eventName:"reactionUnclicked",reaction:t.oButton},this._p)},onReaction:function(t){if(!t.disabled){var e=this._c.sourceData?gigya.utils.object.clone(this._c.sourceData,!1,!0):{};e.buttonID=t.id,e.buttonText=t.labelText,gigya.services.socialize.incrementReactionsCount(this._c,{reactionBarId:this._barID,buttonID:t.id,count:1,sourceData:e}),isNaN(t.countValue)||(this._totalCount+=1,t.updateCount(t.countValue+1));var n=this.$(t.containerID),i=t.oButton;if(this._p.scope&&"internal"==this._p.scope.toLowerCase())gigya.services.socialize.publishUserAction(this._c,{sourceData:e});else if(n&&!gigya.utils.validation.isExplicitFalse(this._p.promptShare)){var o=t.index,a=this._p.containerID+"-share"+o,s=document.getElementById(a);if(s&&"none"!=s.style.display)return;s||(s=gigya.utils.DOM.createTopLevelDiv(a),s.style.position="absolute");var r,u,l=320,g=156,c=s.style,d=document.documentElement;if(window.innerHeight&&(r=window.innerHeight,u=window.innerWidth),"undefined"==typeof r){var d=document.documentElement;r=d.clientHeight,u=d.clientWidth}("undefined"==typeof r||0==r)&&document.body&&document.body.clientHeight&&(r=document.body.clientHeight,u=document.body.clientWidth);var p=gigya.utils.viewport.getScroll(),h=p.top,b=p.left,m=h+Math.floor(r/2),f=b+Math.floor(u/2),v=gigya.global._GetElementPos(n);if(v.top>m&&v.top>g?c.top=v.top-g+"px":c.top=v.top+n.offsetHeight+5+"px",v.left>f){var I=v.left+n.offsetWidth-l;I<0&&(I=0),c.left=I+"px"}else c.left=v.left+"px";c.width=""+l+"px",c.height=""+g+"px";var y=document.getElementById("gigya_ifr_"+a);null!=y&&(y.style.top=parseInt(c.top)+5+"px",y.style.left=parseInt(c.left)+5+"px",y.style.width=l-10+"px",y.style.height=g-10+"px");var B=gigya.utils.object.clone(this._p,!0,!0);B.containerID=a,B.autoShareActionID=this._p.autoShareActionID?this._p.autoShareActionID:this._barID,B.onSendDone=this._p.onSendDone,B.onError=this._p.onError,B.sourceData=e,i.bodyText&&(B.bodyText=i.bodyText),i.headerText&&(B.headerText=i.headerText),i.userAction&&(B.userAction=new gigya.services.socialize.UserAction(gigya.utils.object.clone(i.userAction,!1,!0)));var w;if(t.oButton.userMessage&&(w=t.oButton.userMessage),t.oButton.feedMessage&&(w=t.oButton.feedMessage),w){var C=B.userAction.title;B.userAction.title=w,C&&""!=C&&(B.userAction.title+=" - "+C)}n.fncHide||(n.fncHide=function(t){var e;if(t)for(e=t.target,e||(e=t.srcElement);null!=e&&e.offsetParent&&e.id.indexOf(a)==-1;)e=e.offsetParent;if(!e||e.id.indexOf(a)==-1){var i=document.getElementById(a),o=document.getElementById("gigya_ifr_"+a);i&&(i.style.display="none"),o&&(o.style.display="none"),document.attachEvent?document.detachEvent("onclick",n.fncHide):document.addEventListener&&document.removeEventListener("click",n.fncHide,!1)}}),B.onClose=n.fncHide,document.attachEvent?window.setTimeout(function(){document.attachEvent("onclick",n.fncHide)},100):document.addEventListener&&window.setTimeout(function(){document.addEventListener("click",n.fncHide,!1)},100),gigya.services.socialize.showMiniShareUI(B)}gigya.events.dispatchForWidget({eventName:"reactionClicked",reaction:i},this._p)}}},t[e]={instances:{},showReactionsBarUI:function(t,e,i){i.buttonsType="reaction",n.createInstance(t,e,i)},showShareBarUI:function(t,e,i){i.buttonsType="share",n.createInstance(t,e,i)}}}}();
});