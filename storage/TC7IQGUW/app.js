!function(e){"use strict";function n(e){return new RegExp("(^|\\s+)"+e+"(\\s+|$)")}var i,a,r;function t(e,t){(i(e,t)?r:a)(e,t)}"classList"in document.documentElement?(i=function(e,t){return e.classList.contains(t)},a=function(e,t){e.classList.add(t)},r=function(e,t){e.classList.remove(t)}):(i=function(e,t){return n(t).test(e.className)},a=function(e,t){i(e,t)||(e.className=e.className+" "+t)},r=function(e,t){e.className=e.className.replace(n(t)," ")});var s={hasClass:i,addClass:a,removeClass:r,toggleClass:t,has:i,add:a,remove:r,toggle:t};"function"==typeof define&&define.amd?define(s):e.classie=s}(window);var SCM=SCM||{};SCM.JSUtility=function($,$win,$body,undefined){var publicApi={equalHeights:equalHeights,debounce:debounce,smoothScrollLinks:smoothScrollLinks,addStateToggle:addStateToggle,toggleVisibility:toggleVisibility,toggleVisibilityMobile:toggleVisibilityMobile,toggleTabs:toggleTabs,removeEmptyTabs:removeEmptyTabs,toggleHoverState:toggleHoverState,logErrors:logErrors,accordion:accordion,printPortionOfPage:printPortionOfPage,triggerClickOnAnotherElement:triggerClickOnAnotherElement,scrollToLocation:scrollToLocation,openDeepLinkedTab:openDeepLinkedTab};return publicApi;function equalHeights(e,n){var i=$(e);function t(){if(viewport=updateViewportDimensions(),i.attr("style",""),i.length&&viewport.width>n){var t=0;i.attr("style",""),i.each(function(){var e=$(this).outerHeight();t<e&&(t=e)}),i.css("height",t)}}var a=debounce(function(){t()},100,!1);t(),$win.resize(function(){a()})}function triggerClickOnAnotherElement(){$("[data-trigger-click]").click(function(e){e.preventDefault();var t=$($(this).attr("data-trigger-click"))[0];t&&t.click()})}function smoothScrollLinks(){$(".smooth-scroll").click(function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var e=$(this.hash),t=e.offset().top-100;if((e=e.length?e:$("[name="+this.hash.slice(1)+"]")).length)return $("html,body").animate({scrollTop:t},500),!1}})}function scrollToLocation(e,t){var n=$(e);if(t=t||500,n.length){var i=n.offset().top-92;$("html,body").animate({scrollTop:i},t)}}function addStateToggle(e,t,n,i,a){var r=$(e),s="active-state",o="target-active",l=$("html, body"),c=t.replace(/.|#/,"")+"-active",u="click."+c,d=n||".close",p=$(t).find(d);function h(){$(t).removeClass(s),r.removeClass(o),i&&l.removeClass(c)}i=i||!1,a=a||!1,r.click(function(e){e.preventDefault(),$(t).toggleClass(s),r.toggleClass(o),i&&l.toggleClass(c)}),l.off(u),l.on(u,function(e){$(e.target).closest(r.add($(t))).length||h()}),$(document).ajaxComplete(function(){a&&h()}),p.click(function(){h()})}function toggleVisibility(){var e=$("[data-tog-target]");e.click(function(){var e=$(this),t=$(e.attr("data-tog-target"));e.toggleClass("target-active"),t.slideToggle({duration:300,done:function(){t.css("overflow","inherit")}}).toggleClass("active")})}function openDeepLinkedTab(){var e;if(location.hash&&(e=window.location.hash.substr(1)),e){var t=$('[data-toggle="#'+e+'"]');t.length&&(t.hasClass("target-active")||t.click(),setTimeout(function(){var e=t.offset().top-92;$("html, body").animate({scrollTop:e},"200")},210))}}function accordion(){var e=$(".accordion");if(e.length){var r="target-active",s="active",o={duration:200,done:function(){$(this).css("overflow","inherit")}};e.each(function(){var e=$(this),i=e.find("[data-toggle]"),a=e.find("[data-tab]");i.click(function(){var e=$(this),t=e.attr("data-toggle"),n=$(t);e.hasClass(r)?(e.removeClass(r),n.removeClass(s),n.slideUp(o)):(window.location.hash=t,window.scroll(0,n[0]),i.removeClass(r),a.removeClass(s),a.slideUp(o),e.addClass(r),n.addClass(s),n.slideDown(o))})}),openDeepLinkedTab()}}function toggleVisibilityMobile(n,e){var t=$(n),i="target-active",a=function(){var e=$(this),t=$(e.attr("data-mobile-tog-target"));".toolbar-search-trigger"===n&&$(".header-wrap").addClass("z2010"),e.toggleClass(i),t.slideToggle({duration:300,done:function(){t.css("overflow","inherit"),$(".toolbar-search-trigger").hasClass("target-active")||$(".header-wrap").removeClass("z2010")}}).toggleClass("active")};var r=debounce(function(){viewport=updateViewportDimensions(),viewport.width>e?(t.off("click.tog-vis"),t.removeClass(i),t.each(function(){$($(this).attr("data-mobile-tog-target")).removeAttr("style").removeClass("active")})):(t.off("click.tog-vis"),t.on("click.tog-vis",a))},150,!1);r(),$win.resize(function(){r()})}function toggleTabs(e,t,n,i,a){var r,s,o=$(e);if(o.length){var l=o.find(t),c=$(n),u="target-tab-active",d="tab-active";a=a||!1;r=i?$(i):l.first(),s=r.attr("href")||r.attr("data-href"),l.removeClass(u).filter(r).addClass(u),c.removeClass(d).filter(s).addClass(d),l.click(function(e){var t=$(this),n=$(t.attr("href")||t.attr("data-href"));t.is("a")&&e.preventDefault();var i=function(){c.removeClass(d),n.addClass(d),l.removeClass(u),t.addClass(u)};a&&t.hasClass(u)?(l.removeClass(u),c.removeClass(d)):i()})}}function removeEmptyTabs(e,r,s){r=r||[],$(e).each(function(){var e=$(this),t=e.attr("href"),n=$(t);if(-1<r.indexOf(t))return!0;var i=s?n.find("*").not(s):n.find("*");if(i.length<10){var a=i.text();0===(a!==undefined?$.trim(a):1).length&&(e.attr("style","display: none!important").addClass("tab-no-content"),n.attr("style","display: none!important"))}})}function toggleHoverState(e,t,n){var i,a=$(e);t=t||150,n=n||"target-active",a.hover(function(){var e=$(this);i=setTimeout(function(){e.addClass(n)},t)},function(){clearTimeout(i);var e=$(this);setTimeout(function(){e.removeClass(n)},t)})}function logErrors(jqXHR,textStatus,errorThrown){if(window.console){var err=eval("("+jqXHR.responseText+")");console.log("error: "+err.Messages),console.log("status: "+textStatus)}}function printPortionOfPage(e,t){var n="print--hide-all",i="print--section",a=$(t),r=$(e);a.click(function(){$body.addClass(n),r.addClass(i),setTimeout(function(){window.print()},100)})}function debounce(i,a,r){var s;return function(){var e=this,t=arguments,n=r&&!s;clearTimeout(s),s=setTimeout(function(){s=null,r||i.apply(e,t)},a),n&&i.apply(e,t)}}}(jQuery,jQuery(window),jQuery("body")),function(l){"use strict";function n(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function e(e,t){this.el=e,this.options=n({},this.options),n(this.options,t),this._init()}e.prototype.options={newTab:!0,stickyPlaceholder:!0,onChange:function(e){return!1}},e.prototype._init=function(){var e=this.el.querySelector("option[selected]");this.hasDefaultPlaceholder=e&&e.disabled,this.selectedOpt=e||this.el.querySelector("option"),this._createSelectEl(),this.selOpts=[].slice.call(this.selEl.querySelectorAll("li[data-option]")),this.selOptsCount=this.selOpts.length,this.current=this.selOpts.indexOf(this.selEl.querySelector("li.cs-selected"))||-1,this.selPlaceholder=this.selEl.querySelector("span.cs-placeholder"),this._initEvents()},e.prototype._createSelectEl=function(){var n="",i=function(e){var t="",n="",i="";return!e.selectedOpt||this.foundSelected||this.hasDefaultPlaceholder||(n+="cs-selected ",this.foundSelected=!0),e.getAttribute("data-class")&&(n+=e.getAttribute("data-class")),e.getAttribute("data-link")&&(i="data-link="+e.getAttribute("data-link")),""!==n&&(t='class="'+n+'" '),"<li "+t+i+' data-option data-value="'+e.value+'"><span>'+e.textContent+"</span></li>"};[].slice.call(this.el.children).forEach(function(e){if(!e.disabled){var t=e.tagName.toLowerCase();"option"===t?n+=i(e):"optgroup"===t&&(n+='<li class="cs-optgroup"><span>'+e.label+"</span><ul>",[].slice.call(e.children).forEach(function(e){n+=i(e)}),n+="</ul></li>")}});var e=SCM.SiteJS.getCookie("persistentSearchFilters");0===e.length&&(e=l.location.search);var t=e.match(/f_JournalDisplayName=([^&]*)/),a=this.selectedOpt.textContent,r="";if(t){var s=decodeURI(t[1]).replace(/\+/g," ").replace(/\%26/g,"&");a=SCM.SiteJS.getGlobalSearchDropdownDisplayValue(s)}else App.isLucy&&(a="JAMA Network Open",r=' data-value="J187"');(App.isLearningContent||App.isLearningSelfServe)&&(a="JN Learning",r=' data-value="L*"',$(".site-search-bar").find(".search-term").attr("placeholder","Search for CME by topic"));var o='<div class="cs-options"><ul>'+n+"</ul></div>";this.selEl=document.createElement("div"),this.selEl.className=this.el.className,this.selEl.tabIndex=this.el.tabIndex,this.selEl.innerHTML='<span class="cs-placeholder is-a"'+r+">"+a+"</span>"+o,this.el.parentNode.insertBefore(this.selEl,this.el.parentNode.firstChild),this.selEl.appendChild(this.el)},e.prototype._initEvents=function(){var n=this;this.selPlaceholder.addEventListener("click",function(){n._toggleSelect()}),this.selOpts.forEach(function(e,t){e.addEventListener("click",function(){n.current=t,n._changeOption(),n._toggleSelect()})}),document.addEventListener("click",function(e){var t=e.target;n._isOpen()&&t!==n.selEl&&!function(e,t){if(!e)return!1;for(var n=e.target||e.srcElement||e||!1;n&&n!=t;)n=n.parentNode||!1;return!1!==n}(t,n.selEl)&&n._toggleSelect()}),this.selEl.addEventListener("keydown",function(e){switch(e.keyCode||e.which){case 38:e.preventDefault(),n._navigateOpts("prev");break;case 40:e.preventDefault(),n._navigateOpts("next");break;case 32:e.preventDefault(),n._isOpen()&&void 0!==n.preSelCurrent&&-1!==n.preSelCurrent&&n._changeOption(),n._toggleSelect();break;case 13:e.preventDefault(),n._isOpen()&&void 0!==n.preSelCurrent&&-1!==n.preSelCurrent&&(n._changeOption(),n._toggleSelect());break;case 27:e.preventDefault(),n._isOpen()&&n._toggleSelect()}})},e.prototype._navigateOpts=function(e){this._isOpen()||this._toggleSelect();var t=void 0!==this.preSelCurrent&&-1!==this.preSelCurrent?this.preSelCurrent:this.current;("prev"===e&&0<t||"next"===e&&t<this.selOptsCount-1)&&(this.preSelCurrent="next"===e?t+1:t-1,this._removeFocus(),classie.add(this.selOpts[this.preSelCurrent],"cs-focus"))},e.prototype._toggleSelect=function(){this._removeFocus(),this._isOpen()?(-1!==this.current&&(this.selPlaceholder.textContent=this.selOpts[this.current].textContent),classie.remove(this.selEl,"cs-active")):(this.hasDefaultPlaceholder&&this.options.stickyPlaceholder&&(this.selPlaceholder.textContent=this.selectedOpt.textContent),classie.add(this.selEl,"cs-active"))},e.prototype._changeOption=function(){void 0!==this.preSelCurrent&&-1!==this.preSelCurrent&&(this.current=this.preSelCurrent,this.preSelCurrent=-1);var e=this.selOpts[this.current];this.selPlaceholder.textContent=e.textContent;var t=$(".site-search-bar").find(".search-term");"JN Learning"===this.selPlaceholder.textContent?t.attr("placeholder","Search for CME by topic"):t.attr("placeholder","Enter Search Term"),this.el.value=e.getAttribute("data-value");var n=this.selEl.querySelector("li.cs-selected");n&&classie.remove(n,"cs-selected"),classie.add(e,"cs-selected"),e.getAttribute("data-link")&&(this.options.newTab?l.open(e.getAttribute("data-link"),"_blank"):l.location=e.getAttribute("data-link")),this.options.onChange(this.el.value)},e.prototype._isOpen=function(e){return classie.has(this.selEl,"cs-active")},e.prototype._removeFocus=function(e){var t=this.selEl.querySelector("li.cs-focus");t&&classie.remove(t,"cs-focus")},l.SelectFx=e}(window),jQuery.fn.fastLiveFilter=function(e,r){r=r||{},e=jQuery(e);var t,s=this,n="",i=r.timeout||0,o=r.callback||function(){},l=r.type||"filter",c=e.children(),u=c.length,d=0<u?c[0].style.display:"block";if(o(u),"search"===l)for(var a=0;a<u;a++)c[a].style.display="none";return s.change(function(){for(var e,t,n=s.val().toLowerCase(),i=0,a=0;a<u;a++)e=c[a],t=r.selector?$(e).find(r.selector).text():e.textContent||e.innerText||"","search"!==l||0<n.trim().length?0<=t.toLowerCase().indexOf(n)?("none"==e.style.display&&(e.style.display=d),i++):"none"!=e.style.display&&(e.style.display="none"):e.style.display="none";return o(i),!1}).keydown(function(){clearTimeout(t),t=setTimeout(function(){s.val()!==n&&(n=s.val(),s.change())},i)}),this},$("#filter_input").fastLiveFilter("#filter_list"),$("#search_input").fastLiveFilter("#search_list",{type:"search"});var SCM=SCM||{};!function(e,t,n){var i={},a=i.hasOwnProperty;e.subscribe=function(e,t){a.call(i,e)||(i[e]=[]);var n=i[e].push(t)-1;return{remove:function(){delete i[e][n]}}},e.publish=function(e,n){a.call(i,e)&&t.each(i[e],function(e,t){t(void 0!==n?n:{})})}}(SCM.EventEmitter=SCM.EventEmitter||{},jQuery);var SCM=SCM||{};!function(n,o){var i="CookieBanner_Closed";n.getGdprCookie=function(e){for(var t=e+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){var a=n[i].trim();if(0===a.indexOf(t))return a.substring(t.length,a.length)}return""},n.createGdprCookie=function(e,t,n){var i;if(n){var a=new Date;a.setTime(a.getTime()+24*n*60*60*1e3),i="; expires="+a.toGMTString()}else i="";var r=encodeURIComponent(e)+"="+encodeURIComponent(t)+i+"; path=/",s=o("#hdnDomain");0<s.length&&(r=r+";domain="+encodeURIComponent(s.val())),document.cookie=r},n.hideGdprBanner=function(){var e=o(".gdpr-cookie-wrapper");if(navigator.cookieEnabled){var t=n.getGdprCookie(i);null!=t&&""!=t&&"true"==t&&e.hide()}else e.hide()},n.gdprAcceptLinkClick=function(){o(".js-gdpr-cookie-acceptLink, .js-gdpr-cookie-close").on("click",function(e){n.createGdprCookie(i,!0,365),n.hideGdprBanner(),SCM.ClientStatsMaster&&SCM.ClientStatsMaster.trackGdprCookieAcceptance&&SCM.ClientStatsMaster.trackGdprCookieAcceptance("1050","0","Cookie Acceptance")})},n.init=function(){o(".gdpr-cookie-wrapper").show(),n.gdprAcceptLinkClick(),n.hideGdprBanner()}}(SCM.gdprCookieBanner=SCM.gdprCookieBanner||{},jQuery);var App=App||{};App.notifyViewportChange=debounce(function(){App.cachedViewport!==App.activeViewport&&(App.cachedViewport=App.activeViewport,SCM.EventEmitter.publish("viewport-changed"))},50,!1),function(e,s,t){function n(){s(".title-image").width()+s("#BodyContent_Header_divAccessProvidedBy").width()+s(".auth--provided-by").width()+30>s(window).width()?s("#BodyContent_Header_divAccessProvidedBy").hide():s("#BodyContent_Header_divAccessProvidedBy").show()}e.addJnLogoParamToRefererUrl=function(){if(window.history){var e=window.location.href+(window.location.href.indexOf("?")<0?"?":"&")+"appId=scweb";window.history.replaceState(null,null,e)}},e.queryParameters=function(){var e={};if(window.location.search)for(var t=window.location.search.slice(1).split("&"),n=0;n<t.length;n++){var i=t[n].split("=");e[i[0]]=decodeURI(i[1])}return e},e.init=function(){SCM.JSUtility.addStateToggle(".nav-toggler",".nav",".close",!0),SCM.JSUtility.addStateToggle(".auth--trigger",".auth--dropdown",".close",!0),SCM.JSUtility.toggleVisibilityMobile(".toolbar-search-trigger",App.mobileUpperBreakpoint),n(),s(window).resize(function(){n()}),[].slice.call(document.querySelectorAll("select.cs-select")).forEach(function(e){new SelectFx(e)}),App.isMobile&&s(".nav").on("touchmove",function(e){e.stopPropagation()}),App.isMyAccount&&s(".footer-service-link").click(function(e){-1<this.href.indexOf("myaccount")&&(e.preventDefault(),window.location.hash=this.hash,SCM.JSUtility.openDeepLinkedTab())}),s(".auth--ind-sign-in, .auth--ind-create, .sign-in--personal-link, .sign-in--create-link, .btn--free-cme, .cme-info.no-access a, .quiz-no-access .sign-in, #no-access-follow-collection .sign-in--personal-link, #no-access-follow-collection .sign-in--create-link").click(function(){e.addJnLogoParamToRefererUrl()})},e.windowLoadInit=function(){SCM.JSUtility.toggleVisibilityMobile(".footer-heading",App.mobileUpperBreakpoint),s(".email-signup--submit").click(function(e){e.preventDefault();var t=s(this),n=t.closest(".email-signup"),i=n.find(".email-signup--input").val(),a=n.find(".email-signup--user-message"),r=s(".footer-social-links > a").first().data("emailid");/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(i)?(console.log("Valid email address was entered"),s.ajax({url:"https://silverchair.emailcampaigns.net/CSB/Public/ProcessHostedForm.aspx",type:"POST",dataType:"html",data:{4711343:i,FormInfo:r},success:function(e){0<=e.search(/Thank/)?(console.log("Submission was a success!"),n.find(".email-signup--input-wrap").hide(),t.hide(),a.html("<p style='color: #449141'>Thank you! You will receive an email shortly to verify your email address.</p>")):(a.html("<p style='color: #d71635'>Unable to submit request, please try again later.</p>"),console.log("unexpected error"))},error:function(e){console.log(e),a.html("<p style='color: #d71635'>Unable to submit request, please try again later.</p>")}})):(console.log("ERROR: invalid email address was entered"),a.html("<p style='color: #d71635'>Invalid email address, please try again.</p>"))})},e.bindInterestsButton=function(){s(".js-btn-interests").on("click",function(e){(e.preventDefault(),App.isIndividual)?(App.Collection.setInitialCategories(),s(".manage-interests-modal").foundation("reveal","open"),s(".followed").parent().css("list-style-type","disc").css("color","#000")):(s("#no-access-follow-collection").foundation("reveal","open"),App.Collection.toggleCollectionAlertSignupFlag())})}}(App.Global=App.Global||{},jQuery),function(d,l,a,r){"use strict";!function(e){for(var t=e.length,n=d("head");t--;)0===n.has("."+e[t]).length&&n.append('<meta class="'+e[t]+'" />')}(["foundation-mq-small","foundation-mq-small-only","foundation-mq-medium","foundation-mq-medium-only","foundation-mq-large","foundation-mq-large-only","foundation-mq-xlarge","foundation-mq-xlarge-only","foundation-mq-xxlarge","foundation-data-attribute-namespace"]),d(function(){"undefined"!=typeof FastClick&&void 0!==a.body&&FastClick.attach(a.body)});var c=function(e,t){if("string"==typeof e){if(t){var n;if(t.jquery){if(!(n=t[0]))return t}else n=t;return d(n.querySelectorAll(e))}return d(a.querySelectorAll(e))}return d(e,t)},t=function(e){var t=[];return e||t.push("data"),0<this.namespace.length&&t.push(this.namespace),t.push(this.name),t.join("-")},n=function(e){for(var t=e.split("-"),n=t.length,i=[];n--;)0!==n?i.push(t[n]):0<this.namespace.length?i.push(this.namespace,t[n]):i.push(t[n]);return i.reverse().join("-")},i=function(n,i){var a=this,e=function(){var e=c(this),t=!e.data(a.attr_name(!0)+"-init");e.data(a.attr_name(!0)+"-init",d.extend({},a.settings,i||n,a.data_options(e))),t&&a.events(this)};if(c(this.scope).is("["+this.attr_name()+"]")?e.call(this.scope):c("["+this.attr_name()+"]",this.scope).each(e),"string"==typeof n)return this[n].call(this,i)};l.matchMedia||(l.matchMedia=function(){var t=l.styleMedia||l.media;if(!t){var n,i=a.createElement("style"),e=a.getElementsByTagName("script")[0];i.type="text/css",i.id="matchmediajs-test",e.parentNode.insertBefore(i,e),n="getComputedStyle"in l&&l.getComputedStyle(i,null)||i.currentStyle,t={matchMedium:function(e){var t="@media "+e+"{ #matchmediajs-test { width: 1px; } }";return i.styleSheet?i.styleSheet.cssText=t:i.textContent=t,"1px"===n.width}}}return function(e){return{matches:t.matchMedium(e||"all"),media:e||"all"}}}()),function(t){for(var n,a=0,e=["webkit","moz"],i=l.requestAnimationFrame,r=l.cancelAnimationFrame,s=void 0!==t.fx;a<e.length&&!i;a++)i=l[e[a]+"RequestAnimationFrame"],r=r||l[e[a]+"CancelAnimationFrame"]||l[e[a]+"CancelRequestAnimationFrame"];function o(){n&&(i(o),s&&t.fx.tick())}i?(l.requestAnimationFrame=i,l.cancelAnimationFrame=r,s&&(t.fx.timer=function(e){e()&&t.timers.push(e)&&!n&&(n=!0,o())},t.fx.stop=function(){n=!1})):(l.requestAnimationFrame=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-a)),i=l.setTimeout(function(){e(t+n)},n);return a=t+n,i},l.cancelAnimationFrame=function(e){clearTimeout(e)})}(d),l.Foundation={name:"Foundation",version:"5.5.2",media_queries:{small:c(".foundation-mq-small").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),"small-only":c(".foundation-mq-small-only").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),medium:c(".foundation-mq-medium").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),"medium-only":c(".foundation-mq-medium-only").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),large:c(".foundation-mq-large").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),"large-only":c(".foundation-mq-large-only").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),xlarge:c(".foundation-mq-xlarge").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),"xlarge-only":c(".foundation-mq-xlarge-only").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),xxlarge:c(".foundation-mq-xxlarge").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,"")},stylesheet:d("<style></style>").appendTo("head")[0].sheet,global:{namespace:r},init:function(e,t,n,i,a){var r=[e,n,i,a],s=[];if(this.rtl=/rtl/i.test(c("html").attr("dir")),this.scope=e||this.scope,this.set_namespace(),t&&"string"==typeof t&&!/reflow/i.test(t))this.libs.hasOwnProperty(t)&&s.push(this.init_lib(t,r));else for(var o in this.libs)s.push(this.init_lib(o,t));return c(l).load(function(){c(l).trigger("resize.fndtn.clearing").trigger("resize.fndtn.dropdown").trigger("resize.fndtn.equalizer").trigger("resize.fndtn.interchange").trigger("resize.fndtn.joyride").trigger("resize.fndtn.magellan").trigger("resize.fndtn.topbar").trigger("resize.fndtn.slider")}),e},init_lib:function(e,t){return this.libs.hasOwnProperty(e)?(this.patch(this.libs[e]),t&&t.hasOwnProperty(e)?(void 0!==this.libs[e].settings?d.extend(!0,this.libs[e].settings,t[e]):void 0!==this.libs[e].defaults&&d.extend(!0,this.libs[e].defaults,t[e]),this.libs[e].init.apply(this.libs[e],[this.scope,t[e]])):(t=t instanceof Array?t:new Array(t),this.libs[e].init.apply(this.libs[e],t))):function(){}},patch:function(e){e.scope=this.scope,e.namespace=this.global.namespace,e.rtl=this.rtl,e.data_options=this.utils.data_options,e.attr_name=t,e.add_namespace=n,e.bindings=i,e.S=this.utils.S},inherit:function(e,t){for(var n=t.split(" "),i=n.length;i--;)this.utils.hasOwnProperty(n[i])&&(e[n[i]]=this.utils[n[i]])},set_namespace:function(){var e=this.global.namespace===r?d(".foundation-data-attribute-namespace").css("font-family"):this.global.namespace;this.global.namespace=e===r||/false/i.test(e)?"":e},libs:{},utils:{S:c,throttle:function(n,i){var a=null;return function(){var e=this,t=arguments;null==a&&(a=setTimeout(function(){n.apply(e,t),a=null},i))}},debounce:function(i,a,r){var s,o;return function(){var e=this,t=arguments,n=r&&!s;return clearTimeout(s),s=setTimeout(function(){s=null,r||(o=i.apply(e,t))},a),n&&(o=i.apply(e,t)),o}},data_options:function(e,t){t=t||"options";var n,i,a,r,s,o,l={},c=(r=e,0<(s=Foundation.global.namespace).length?r.data(s+"-"+t):r.data(t));if("object"==typeof c)return c;function u(e){return"string"==typeof e?d.trim(e):e}for(n=(a=(c||":").split(";")).length;n--;)i=[(i=a[n].split(":"))[0],i.slice(1).join(":")],/true/i.test(i[1])&&(i[1]=!0),/false/i.test(i[1])&&(i[1]=!1),o=i[1],isNaN(o-0)||null===o||""===o||!1===o||!0===o||(-1===i[1].indexOf(".")?i[1]=parseInt(i[1],10):i[1]=parseFloat(i[1])),2===i.length&&0<i[0].length&&(l[u(i[0])]=u(i[1]));return l},register_media:function(e,t){var n;Foundation.media_queries[e]===r&&(d("head").append('<meta class="'+t+'"/>'),Foundation.media_queries[e]=(("string"==typeof(n=d("."+t).css("font-family"))||n instanceof String)&&(n=n.replace(/^['\\/"]+|(;\s?})+|['\\/"]+$/g,"")),n))},add_custom_rule:function(e,t){t===r&&Foundation.stylesheet?Foundation.stylesheet.insertRule(e,Foundation.stylesheet.cssRules.length):Foundation.media_queries[t]!==r&&Foundation.stylesheet.insertRule("@media "+Foundation.media_queries[t]+"{ "+e+" }",Foundation.stylesheet.cssRules.length)},image_loaded:function(e,t){var n=this,i=e.length;(0===i||function(e){for(var t=e.length-1;0<=t;t--)if(e.attr("height")===r)return!1;return!0}(e))&&t(e),e.each(function(){!function(e,t){function n(){t(e[0])}e.attr("src")?e[0].complete||4===e[0].readyState?n():function(){if(this.one("load",n),/MSIE (\d+\.\d+);/.test(navigator.userAgent)){var e=this.attr("src"),t=e.match(/\?/)?"&":"?";t+="random="+(new Date).getTime(),this.attr("src",e+t)}}.call(e):n()}(n.S(this),function(){0===(i-=1)&&t(e)})})},random_str:function(){return this.fidx||(this.fidx=0),this.prefix=this.prefix||[this.name||"F",(+new Date).toString(36)].join("-"),this.prefix+(this.fidx++).toString(36)},match:function(e){return l.matchMedia(e).matches},is_small_up:function(){return this.match(Foundation.media_queries.small)},is_medium_up:function(){return this.match(Foundation.media_queries.medium)},is_large_up:function(){return this.match(Foundation.media_queries.large)},is_xlarge_up:function(){return this.match(Foundation.media_queries.xlarge)},is_xxlarge_up:function(){return this.match(Foundation.media_queries.xxlarge)},is_small_only:function(){return!(this.is_medium_up()||this.is_large_up()||this.is_xlarge_up()||this.is_xxlarge_up())},is_medium_only:function(){return this.is_medium_up()&&!this.is_large_up()&&!this.is_xlarge_up()&&!this.is_xxlarge_up()},is_large_only:function(){return this.is_medium_up()&&this.is_large_up()&&!this.is_xlarge_up()&&!this.is_xxlarge_up()},is_xlarge_only:function(){return this.is_medium_up()&&this.is_large_up()&&this.is_xlarge_up()&&!this.is_xxlarge_up()},is_xxlarge_only:function(){return this.is_medium_up()&&this.is_large_up()&&this.is_xlarge_up()&&this.is_xxlarge_up()}}},d.fn.foundation=function(){var e=Array.prototype.slice.call(arguments,0);return this.each(function(){return Foundation.init.apply(Foundation,[this].concat(e)),this})}}(jQuery,window,window.document),function(c,u,t,e){"use strict";function l(e){var t=/fade/i.test(e),n=/pop/i.test(e);return{animate:t||n,pop:n,fade:t}}Foundation.libs.reveal={name:"reveal",version:"5.5.2",locked:!1,settings:{animation:"fadeAndPop",animation_speed:250,close_on_background_click:!0,close_on_esc:!0,dismiss_modal_class:"close-reveal-modal",multiple_opened:!1,bg_class:"reveal-modal-bg",root_element:"body",open:function(){},opened:function(){},close:function(){},closed:function(){},on_ajax_error:c.noop,bg:c(".reveal-modal-bg"),css:{open:{opacity:0,visibility:"visible",display:"block"},close:{opacity:1,visibility:"hidden",display:"none"}}},init:function(e,t,n){c.extend(!0,this.settings,t,n),this.bindings(t,n)},events:function(e){var r=this,s=r.S;return s(this.scope).off(".reveal").on("click.fndtn.reveal","["+this.add_namespace("data-reveal-id")+"]:not([disabled])",function(e){if(e.preventDefault(),!r.locked){var t=s(this),n=t.data(r.data_attr("reveal-ajax")),i=t.data(r.data_attr("reveal-replace-content"));if(r.locked=!0,void 0===n)r.open.call(r,t);else{var a=!0===n?t.attr("href"):n;r.open.call(r,t,{url:a},{replaceContentSel:i})}}}),s(t).on("click.fndtn.reveal",this.close_targets(),function(e){if(e.preventDefault(),!r.locked){var t=s("["+r.attr_name()+"].open").data(r.attr_name(!0)+"-init")||r.settings,n=s(e.target)[0]===s("."+t.bg_class)[0];if(n){if(!t.close_on_background_click)return;e.stopPropagation()}r.locked=!0,r.close.call(r,n?s("["+r.attr_name()+"].open:not(.toback)"):s(this).closest("["+r.attr_name()+"]"))}}),0<s("["+r.attr_name()+"]",this.scope).length?s(this.scope).on("open.fndtn.reveal",this.settings.open).on("opened.fndtn.reveal",this.settings.opened).on("opened.fndtn.reveal",this.open_video).on("close.fndtn.reveal",this.settings.close).on("closed.fndtn.reveal",this.settings.closed).on("closed.fndtn.reveal",this.close_video):s(this.scope).on("open.fndtn.reveal","["+r.attr_name()+"]",this.settings.open).on("opened.fndtn.reveal","["+r.attr_name()+"]",this.settings.opened).on("opened.fndtn.reveal","["+r.attr_name()+"]",this.open_video).on("close.fndtn.reveal","["+r.attr_name()+"]",this.settings.close).on("closed.fndtn.reveal","["+r.attr_name()+"]",this.settings.closed).on("closed.fndtn.reveal","["+r.attr_name()+"]",this.close_video),!0},key_up_on:function(e){var i=this;return i.S("body").off("keyup.fndtn.reveal").on("keyup.fndtn.reveal",function(e){var t=i.S("["+i.attr_name()+"].open"),n=t.data(i.attr_name(!0)+"-init")||i.settings;n&&27===e.which&&n.close_on_esc&&!i.locked&&i.close.call(i,t)}),!0},key_up_off:function(e){return this.S("body").off("keyup.fndtn.reveal"),!0},open:function(e,t){var a,r=this;e?void 0!==e.selector?a=r.S("#"+e.data(r.data_attr("reveal-id"))).first():(a=r.S(this.scope),t=e):a=r.S(this.scope);var s=a.data(r.attr_name(!0)+"-init");if(s=s||this.settings,a.hasClass("open")&&e.attr("data-reveal-id")==a.attr("id"))return r.close(a);if(!a.hasClass("open")){var o=r.S("["+r.attr_name()+"].open");if(void 0===a.data("css-top")&&a.data("css-top",parseInt(a.css("top"),10)).data("offset",this.cache_offset(a)),a.attr("tabindex","0").attr("aria-hidden","false"),this.key_up_on(a),a.on("open.fndtn.reveal",function(e){e.namespace}),a.on("open.fndtn.reveal").trigger("open.fndtn.reveal"),o.length<1&&this.toggle_bg(a,!0),"string"==typeof t&&(t={url:t}),void 0!==t&&t.url){var l=void 0!==t.success?t.success:null;c.extend(t,{success:function(e,t,n){if(c.isFunction(l)){var i=l(e,t,n);"string"==typeof i&&(e=i)}"undefined"!=typeof options&&void 0!==options.replaceContentSel?a.find(options.replaceContentSel).html(e):a.html(e),r.S(a).foundation("section","reflow"),r.S(a).children().foundation(),0<o.length&&(s.multiple_opened?r.to_back(o):r.hide(o,s.css.close)),r.show(a,s.css.open)}}),s.on_ajax_error!==c.noop&&c.extend(t,{error:s.on_ajax_error}),c.ajax(t)}else 0<o.length&&(s.multiple_opened?r.to_back(o):r.hide(o,s.css.close)),this.show(a,s.css.open)}r.S(u).trigger("resize")},close:function(e){e=e&&e.length?e:this.S(this.scope);var t=this.S("["+this.attr_name()+"].open"),n=e.data(this.attr_name(!0)+"-init")||this.settings,i=this;0<t.length&&(e.removeAttr("tabindex","0").attr("aria-hidden","true"),this.locked=!0,this.key_up_off(e),e.trigger("close.fndtn.reveal"),(n.multiple_opened&&1===t.length||!n.multiple_opened||1<e.length)&&(i.toggle_bg(e,!1),i.to_front(e)),n.multiple_opened?(i.hide(e,n.css.close,n),i.to_front(c(c.makeArray(t).reverse()[1]))):i.hide(t,n.css.close,n))},close_targets:function(){var e="."+this.settings.dismiss_modal_class;return this.settings.close_on_background_click?e+", ."+this.settings.bg_class:e},toggle_bg:function(e,t){0===this.S("."+this.settings.bg_class).length&&(this.settings.bg=c("<div />",{class:this.settings.bg_class}).appendTo("body").hide());var n=0<this.settings.bg.filter(":visible").length;t!=n&&((null==t?n:!t)?this.hide(this.settings.bg):this.show(this.settings.bg))},show:function(e,t){if(t){var n=(o=e.data(this.attr_name(!0)+"-init")||this.settings).root_element,i=this;if(0===e.parent(n).length){var a=e.wrap('<div style="display: none;" />').parent();e.on("closed.fndtn.reveal.wrapped",function(){e.detach().appendTo(a),e.unwrap().unbind("closed.fndtn.reveal.wrapped")}),e.detach().appendTo(n)}var r=l(o.animation);if(r.animate||(this.locked=!1),r.pop){t.top=c(u).scrollTop()-e.data("offset")+"px";var s={top:c(u).scrollTop()+e.data("css-top")+"px",opacity:1};return setTimeout(function(){return e.css(t).animate(s,o.animation_speed,"linear",function(){i.locked=!1,e.trigger("opened.fndtn.reveal")}).addClass("open")},o.animation_speed/2)}if(r.fade){t.top=c(u).scrollTop()+e.data("css-top")+"px";s={opacity:1};return setTimeout(function(){return e.css(t).animate(s,o.animation_speed,"linear",function(){i.locked=!1,e.trigger("opened.fndtn.reveal")}).addClass("open")},o.animation_speed/2)}return e.css(t).show().css({opacity:1}).addClass("open").trigger("opened.fndtn.reveal")}var o;return l((o=this.settings).animation).fade?e.fadeIn(o.animation_speed/2):(this.locked=!1,e.show())},to_back:function(e){e.addClass("toback")},to_front:function(e){e.removeClass("toback")},hide:function(e,t){if(t){var n=e.data(this.attr_name(!0)+"-init"),i=this,a=l((n=n||this.settings).animation);if(a.animate||(this.locked=!1),a.pop){var r={top:-c(u).scrollTop()-e.data("offset")+"px",opacity:0};return setTimeout(function(){return e.animate(r,n.animation_speed,"linear",function(){i.locked=!1,e.css(t).trigger("closed.fndtn.reveal")}).removeClass("open")},n.animation_speed/2)}if(a.fade){r={opacity:0};return setTimeout(function(){return e.animate(r,n.animation_speed,"linear",function(){i.locked=!1,e.css(t).trigger("closed.fndtn.reveal")}).removeClass("open")},n.animation_speed/2)}return e.hide().css(t).removeClass("open").trigger("closed.fndtn.reveal")}return l((n=this.settings).animation).fade?e.fadeOut(n.animation_speed/2):e.hide()},close_video:function(e){var t=c(".flex-video",e.target),n=c("iframe",t);0<n.length&&(n.attr("data-src",n[0].src),n.attr("src",n.attr("src")),t.hide())},open_video:function(e){var t=c(".flex-video",e.target),n=t.find("iframe");if(0<n.length){if("string"==typeof n.attr("data-src"))n[0].src=n.attr("data-src");else{var i=n[0].src;n[0].src=void 0,n[0].src=i}t.show()}},data_attr:function(e){return 0<this.namespace.length?this.namespace+"-"+e:e},cache_offset:function(e){var t=e.show().height()+parseInt(e.css("top"),10)+e.scrollY;return e.hide(),t},off:function(){c(this.scope).off(".fndtn.reveal")},reflow:function(){}}}(jQuery,window,window.document),function(l){var r="unobtrusiveAjaxClick",i="unobtrusiveValidation";function c(e,t){for(var n=window,i=(e||"").split(".");n&&i.length;)n=n[i.shift()];return"function"==typeof n?n:(t.push(e),Function.constructor.apply(null,t))}function u(e){return"GET"===e||"POST"===e}function a(s,e){var t,a,r,o;(t=s.getAttribute("data-ajax-confirm"))&&!window.confirm(t)||(a=l(s.getAttribute("data-ajax-loading")),o=s.getAttribute("data-ajax-loading-duration")||0,l.extend(e,{type:s.getAttribute("data-ajax-method")||void 0,url:s.getAttribute("data-ajax-url")||void 0,beforeSend:function(e){var t,n,i;return n=e,u(i=r)||n.setRequestHeader("X-HTTP-Method-Override",i),!1!==(t=c(s.getAttribute("data-ajax-begin"),["xhr"]).apply(this,arguments))&&a.show(o),t},complete:function(){a.hide(o),c(s.getAttribute("data-ajax-complete"),["xhr","status"]).apply(this,arguments)},success:function(e,t,n){var i,a,r;i=s,a=e,-1===(n.getResponseHeader("Content-Type")||"text/html").indexOf("application/x-javascript")&&(r=(i.getAttribute("data-ajax-mode")||"").toUpperCase(),l(i.getAttribute("data-ajax-update")).each(function(e,t){var n;switch(r){case"BEFORE":n=t.firstChild,l("<div />").html(a).contents().each(function(){t.insertBefore(this,n)});break;case"AFTER":l("<div />").html(a).contents().each(function(){t.appendChild(this)});break;default:l(t).html(a)}})),c(s.getAttribute("data-ajax-success"),["data","status","xhr"]).apply(this,arguments)},error:c(s.getAttribute("data-ajax-failure"),["xhr","status","error"])}),e.data.push({name:"X-Requested-With",value:"XMLHttpRequest"}),u(r=e.type.toUpperCase())||(e.type="POST",e.data.push({name:"X-HTTP-Method-Override",value:r})),l.ajax(e))}l(document).on("click","a[data-ajax=true]",function(e){e.preventDefault(),a(this,{url:this.href,type:"GET",data:[]})}),l(document).on("click","form[data-ajax=true] input[type=image]",function(e){var t=e.target.name,n=l(e.target),i=n.parents("form")[0],a=n.offset();l(i).data(r,[{name:t+".x",value:Math.round(e.pageX-a.left)},{name:t+".y",value:Math.round(e.pageY-a.top)}]),setTimeout(function(){l(i).removeData(r)},0)}),l(document).on("click","form[data-ajax=true] :submit",function(e){var t=e.target.name,n=l(e.target).parents("form")[0];l(n).data(r,t?[{name:t,value:e.target.value}]:[]),setTimeout(function(){l(n).removeData(r)},0)}),l(document).on("submit","form[data-ajax=true]",function(e){var t,n=l(this).data(r)||[];(e.preventDefault(),(t=l(this).data(i))&&t.validate&&!t.validate())||a(this,{url:this.action,type:this.method||"GET",data:n.concat(l(this).serializeArray())})})}(jQuery),function(c){c.extend(c.fn,{validate:function(e){if(this.length){var n=c.data(this[0],"validator");return n||(this.attr("novalidate","novalidate"),n=new c.validator(e,this[0]),c.data(this[0],"validator",n),n.settings.onsubmit&&(this.validateDelegate(":submit","click",function(e){n.settings.submitHandler&&(n.submitButton=e.target),c(e.target).hasClass("cancel")&&(n.cancelSubmit=!0)}),this.submit(function(t){function e(){var e;return!n.settings.submitHandler||(n.submitButton&&(e=c("<input type='hidden'/>").attr("name",n.submitButton.name).val(n.submitButton.value).appendTo(n.currentForm)),n.settings.submitHandler.call(n,n.currentForm,t),n.submitButton&&e.remove(),!1)}return n.settings.debug&&t.preventDefault(),n.cancelSubmit?(n.cancelSubmit=!1,e()):n.form()?n.pendingRequest?!(n.formSubmitted=!0):e():(n.focusInvalid(),!1)})),n)}e&&e.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing")},valid:function(){if(c(this[0]).is("form"))return this.validate().form();var e=!0,t=c(this[0].form).validate();return this.each(function(){e&=t.element(this)}),e},removeAttrs:function(e){var n={},i=this;return c.each(e.split(/\s/),function(e,t){n[t]=i.attr(t),i.removeAttr(t)}),n},rules:function(e,t){var n=this[0];if(e){var i=c.data(n.form,"validator").settings,a=i.rules,r=c.validator.staticRules(n);switch(e){case"add":c.extend(r,c.validator.normalizeRule(t)),a[n.name]=r,t.messages&&(i.messages[n.name]=c.extend(i.messages[n.name],t.messages));break;case"remove":if(!t)return delete a[n.name],r;var s={};return c.each(t.split(/\s/),function(e,t){s[t]=r[t],delete r[t]}),s}}var o=c.validator.normalizeRules(c.extend({},c.validator.metadataRules(n),c.validator.classRules(n),c.validator.attributeRules(n),c.validator.staticRules(n)),n);if(o.required){var l=o.required;delete o.required,o=c.extend({required:l},o)}return o}}),c.extend(c.expr[":"],{blank:function(e){return!c.trim(""+e.value)},filled:function(e){return!!c.trim(""+e.value)},unchecked:function(e){return!e.checked}}),c.validator=function(e,t){this.settings=c.extend(!0,{},c.validator.defaults,e),this.currentForm=t,this.init()},c.validator.format=function(n,e){return 1===arguments.length?function(){var e=c.makeArray(arguments);return e.unshift(n),c.validator.format.apply(this,e)}:(2<arguments.length&&e.constructor!==Array&&(e=c.makeArray(arguments).slice(1)),e.constructor!==Array&&(e=[e]),c.each(e,function(e,t){n=n.replace(new RegExp("\\{"+e+"\\}","g"),t)}),n)},c.extend(c.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:c([]),errorLabelContainer:c([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(e,t){this.lastActive=e,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(e)).hide())},onfocusout:function(e,t){this.checkable(e)||!(e.name in this.submitted)&&this.optional(e)||this.element(e)},onkeyup:function(e,t){9===t.which&&""===this.elementValue(e)||(e.name in this.submitted||e===this.lastActive)&&this.element(e)},onclick:function(e,t){e.name in this.submitted?this.element(e):e.parentNode.name in this.submitted&&this.element(e.parentNode)},highlight:function(e,t,n){"radio"===e.type?this.findByName(e.name).addClass(t).removeClass(n):c(e).addClass(t).removeClass(n)},unhighlight:function(e,t,n){"radio"===e.type?this.findByName(e.name).removeClass(t).addClass(n):c(e).removeClass(t).addClass(n)}},setDefaults:function(e){c.extend(c.validator.defaults,e)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:c.validator.format("Please enter no more than {0} characters."),minlength:c.validator.format("Please enter at least {0} characters."),rangelength:c.validator.format("Please enter a value between {0} and {1} characters long."),range:c.validator.format("Please enter a value between {0} and {1}."),max:c.validator.format("Please enter a value less than or equal to {0}."),min:c.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){this.labelContainer=c(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||c(this.currentForm),this.containers=c(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var i=this.groups={};c.each(this.settings.groups,function(n,e){c.each(e.split(/\s/),function(e,t){i[t]=n})});var n=this.settings.rules;function e(e){var t=c.data(this[0].form,"validator"),n="on"+e.type.replace(/^validate/,"");t.settings[n]&&t.settings[n].call(t,this[0],e)}c.each(n,function(e,t){n[e]=c.validator.normalizeRule(t)}),c(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",e).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",e),this.settings.invalidHandler&&c(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),c.extend(this.submitted,this.errorMap),this.invalid=c.extend({},this.errorMap),this.valid()||c(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var e=0,t=this.currentElements=this.elements();t[e];e++)this.check(t[e]);return this.valid()},element:function(e){e=this.validationTargetFor(this.clean(e)),this.lastElement=e,this.prepareElement(e),this.currentElements=c(e);var t=!1!==this.check(e);return t?delete this.invalid[e.name]:this.invalid[e.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),t},showErrors:function(t){if(t){for(var e in c.extend(this.errorMap,t),this.errorList=[],t)this.errorList.push({message:t[e],element:this.findByName(e)[0]});this.successList=c.grep(this.successList,function(e){return!(e.name in t)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){c.fn.resetForm&&c(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass).removeData("previousValue")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var t=0;for(var n in e)t++;return t},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{c(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(e){}},findLastActive:function(){var t=this.lastActive;return t&&1===c.grep(this.errorList,function(e){return e.element.name===t.name}).length&&t},elements:function(){var e=this,t={};return c(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return!this.name&&e.settings.debug&&window.console&&console.error("%o has no name assigned",this),!(this.name in t||!e.objectLength(c(this).rules()))&&(t[this.name]=!0)})},clean:function(e){return c(e)[0]},errors:function(){var e=this.settings.errorClass.replace(" ",".");return c(this.settings.errorElement+"."+e,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=c([]),this.toHide=c([]),this.currentElements=c([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(e){this.reset(),this.toHide=this.errorsFor(e)},elementValue:function(e){var t=c(e).attr("type"),n=c(e).val();return"radio"===t||"checkbox"===t?c('input[name="'+c(e).attr("name")+'"]:checked').val():"string"==typeof n?n.replace(/\r/g,""):n},check:function(t){t=this.validationTargetFor(this.clean(t));var e,n=c(t).rules(),i=!1,a=this.elementValue(t);for(var r in n){var s={method:r,parameters:n[r]};try{if("dependency-mismatch"===(e=c.validator.methods[r].call(this,a,t,s.parameters))){i=!0;continue}if(i=!1,"pending"===e)return void(this.toHide=this.toHide.not(this.errorsFor(t)));if(!e)return this.formatAndAdd(t,s),!1}catch(e){throw this.settings.debug&&window.console&&console.log("exception occured when checking element "+t.id+", check the '"+s.method+"' method",e),e}}if(!i)return this.objectLength(n)&&this.successList.push(t),!0},customMetaMessage:function(e,t){if(c.metadata){var n=this.settings.meta?c(e).metadata()[this.settings.meta]:c(e).metadata();return n&&n.messages&&n.messages[t]}},customDataMessage:function(e,t){return c(e).data("msg-"+t.toLowerCase())||e.attributes&&c(e).attr("data-msg-"+t.toLowerCase())},customMessage:function(e,t){var n=this.settings.messages[e];return n&&(n.constructor===String?n:n[t])},findDefined:function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e]},defaultMessage:function(e,t){return this.findDefined(this.customMessage(e.name,t),this.customDataMessage(e,t),this.customMetaMessage(e,t),!this.settings.ignoreTitle&&e.title||void 0,c.validator.messages[t],"<strong>Warning: No message defined for "+e.name+"</strong>")},formatAndAdd:function(e,t){var n=this.defaultMessage(e,t.method),i=/\$?\{(\d+)\}/g;"function"==typeof n?n=n.call(this,t.parameters,e):i.test(n)&&(n=c.validator.format(n.replace(i,"{$1}"),t.parameters)),this.errorList.push({message:n,element:e}),this.errorMap[e.name]=n,this.submitted[e.name]=n},addWrapper:function(e){return this.settings.wrapper&&(e=e.add(e.parent(this.settings.wrapper))),e},defaultShowErrors:function(){var e,t;for(e=0;this.errorList[e];e++){var n=this.errorList[e];this.settings.highlight&&this.settings.highlight.call(this,n.element,this.settings.errorClass,this.settings.validClass),this.showLabel(n.element,n.message)}if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(e=0;this.successList[e];e++)this.showLabel(this.successList[e]);if(this.settings.unhighlight)for(e=0,t=this.validElements();t[e];e++)this.settings.unhighlight.call(this,t[e],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return c(this.errorList).map(function(){return this.element})},showLabel:function(e,t){var n=this.errorsFor(e);n.length?(n.removeClass(this.settings.validClass).addClass(this.settings.errorClass),n.attr("generated")&&n.html(t)):(n=c("<"+this.settings.errorElement+"/>").attr({for:this.idOrName(e),generated:!0}).addClass(this.settings.errorClass).html(t||""),this.settings.wrapper&&(n=n.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(n).length||(this.settings.errorPlacement?this.settings.errorPlacement(n,c(e)):n.insertAfter(e))),!t&&this.settings.success&&(n.text(""),"string"==typeof this.settings.success?n.addClass(this.settings.success):this.settings.success(n,e)),this.toShow=this.toShow.add(n)},errorsFor:function(e){var t=this.idOrName(e);return this.errors().filter(function(){return c(this).attr("for")===t})},idOrName:function(e){return this.groups[e.name]||(this.checkable(e)?e.name:e.id||e.name)},validationTargetFor:function(e){return this.checkable(e)&&(e=this.findByName(e.name).not(this.settings.ignore)[0]),e},checkable:function(e){return/radio|checkbox/i.test(e.type)},findByName:function(e){return c(this.currentForm).find('[name="'+e+'"]')},getLength:function(e,t){switch(t.nodeName.toLowerCase()){case"select":return c("option:selected",t).length;case"input":if(this.checkable(t))return this.findByName(t.name).filter(":checked").length}return e.length},depend:function(e,t){return!this.dependTypes[typeof e]||this.dependTypes[typeof e](e,t)},dependTypes:{boolean:function(e,t){return e},string:function(e,t){return!!c(e,t.form).length},function:function(e,t){return e(t)}},optional:function(e){var t=this.elementValue(e);return!c.validator.methods.required.call(this,t,e)&&"dependency-mismatch"},startRequest:function(e){this.pending[e.name]||(this.pendingRequest++,this.pending[e.name]=!0)},stopRequest:function(e,t){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[e.name],t&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(c(this.currentForm).submit(),this.formSubmitted=!1):!t&&0===this.pendingRequest&&this.formSubmitted&&(c(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(e){return c.data(e,"previousValue")||c.data(e,"previousValue",{old:null,valid:!0,message:this.defaultMessage(e,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(e,t){e.constructor===String?this.classRuleSettings[e]=t:c.extend(this.classRuleSettings,e)},classRules:function(e){var t={},n=c(e).attr("class");return n&&c.each(n.split(" "),function(){this in c.validator.classRuleSettings&&c.extend(t,c.validator.classRuleSettings[this])}),t},attributeRules:function(e){var t={},n=c(e);for(var i in c.validator.methods){var a;"required"===i?(""===(a=n.get(0).getAttribute(i))&&(a=!0),a=!!a):a=n.attr(i),a?t[i]=a:n[0].getAttribute("type")===i&&(t[i]=!0)}return t.maxlength&&/-1|2147483647|524288/.test(t.maxlength)&&delete t.maxlength,t},metadataRules:function(e){if(!c.metadata)return{};var t=c.data(e.form,"validator").settings.meta;return t?c(e).metadata()[t]:c(e).metadata()},staticRules:function(e){var t={},n=c.data(e.form,"validator");return n.settings.rules&&(t=c.validator.normalizeRule(n.settings.rules[e.name])||{}),t},normalizeRules:function(i,a){return c.each(i,function(e,t){if(!1!==t){if(t.param||t.depends){var n=!0;switch(typeof t.depends){case"string":n=!!c(t.depends,a.form).length;break;case"function":n=t.depends.call(a,a)}n?i[e]=void 0===t.param||t.param:delete i[e]}}else delete i[e]}),c.each(i,function(e,t){i[e]=c.isFunction(t)?t(a):t}),c.each(["minlength","maxlength","min","max"],function(){i[this]&&(i[this]=Number(i[this]))}),c.each(["rangelength","range"],function(){i[this]&&(i[this]=[Number(i[this][0]),Number(i[this][1])])}),c.validator.autoCreateRanges&&(i.min&&i.max&&(i.range=[i.min,i.max],delete i.min,delete i.max),i.minlength&&i.maxlength&&(i.rangelength=[i.minlength,i.maxlength],delete i.minlength,delete i.maxlength)),i.messages&&delete i.messages,i},normalizeRule:function(e){if("string"==typeof e){var t={};c.each(e.split(/\s/),function(){t[this]=!0}),e=t}return e},addMethod:function(e,t,n){c.validator.methods[e]=t,c.validator.messages[e]=void 0!==n?n:c.validator.messages[e],t.length<3&&c.validator.addClassRules(e,c.validator.normalizeRule(e))},methods:{required:function(e,t,n){if(!this.depend(n,t))return"dependency-mismatch";if("select"===t.nodeName.toLowerCase()){var i=c(t).val();return i&&0<i.length}return this.checkable(t)?0<this.getLength(e,t):0<c.trim(e).length},remote:function(r,s,e){if(this.optional(s))return"dependency-mismatch";var o=this.previousValue(s);if(this.settings.messages[s.name]||(this.settings.messages[s.name]={}),o.originalMessage=this.settings.messages[s.name].remote,this.settings.messages[s.name].remote=o.message,e="string"==typeof e&&{url:e}||e,this.pending[s.name])return"pending";if(o.old===r)return o.valid;o.old=r;var l=this;this.startRequest(s);var t={};return t[s.name]=r,c.ajax(c.extend(!0,{url:e,mode:"abort",port:"validate"+s.name,dataType:"json",data:t,success:function(e){l.settings.messages[s.name].remote=o.originalMessage;var t=!0===e||"true"===e;if(t){var n=l.formSubmitted;l.prepareElement(s),l.formSubmitted=n,l.successList.push(s),delete l.invalid[s.name],l.showErrors()}else{var i={},a=e||l.defaultMessage(s,"remote");i[s.name]=o.message=c.isFunction(a)?a(r):a,l.invalid[s.name]=!0,l.showErrors(i)}o.valid=t,l.stopRequest(s,t)}},e)),"pending"},minlength:function(e,t,n){var i=c.isArray(e)?e.length:this.getLength(c.trim(e),t);return this.optional(t)||n<=i},maxlength:function(e,t,n){var i=c.isArray(e)?e.length:this.getLength(c.trim(e),t);return this.optional(t)||i<=n},rangelength:function(e,t,n){var i=c.isArray(e)?e.length:this.getLength(c.trim(e),t);return this.optional(t)||i>=n[0]&&i<=n[1]},min:function(e,t,n){return this.optional(t)||n<=e},max:function(e,t,n){return this.optional(t)||e<=n},range:function(e,t,n){return this.optional(t)||e>=n[0]&&e<=n[1]},email:function(e,t){return this.optional(t)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(e)},url:function(e,t){return this.optional(t)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)},date:function(e,t){return this.optional(t)||!/Invalid|NaN/.test(new Date(e))},dateISO:function(e,t){return this.optional(t)||/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(e)},number:function(e,t){return this.optional(t)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},digits:function(e,t){return this.optional(t)||/^\d+$/.test(e)},creditcard:function(e,t){if(this.optional(t))return"dependency-mismatch";if(/[^0-9 \-]+/.test(e))return!1;for(var n=0,i=0,a=!1,r=(e=e.replace(/\D/g,"")).length-1;0<=r;r--){var s=e.charAt(r);i=parseInt(s,10),a&&9<(i*=2)&&(i-=9),n+=i,a=!a}return n%10==0},equalTo:function(e,t,n){var i=c(n);return this.settings.onfocusout&&i.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){c(t).valid()}),e===i.val()}}}),c.format=c.validator.format}(jQuery),function(i){var a={};if(i.ajaxPrefilter)i.ajaxPrefilter(function(e,t,n){var i=e.port;"abort"===e.mode&&(a[i]&&a[i].abort(),a[i]=n)});else{var r=i.ajax;i.ajax=function(e){var t=("mode"in e?e:i.ajaxSettings).mode,n=("port"in e?e:i.ajaxSettings).port;return"abort"===t?(a[n]&&a[n].abort(),a[n]=r.apply(this,arguments)):r.apply(this,arguments)}}}(jQuery),function(a){jQuery.event.special.focusin||jQuery.event.special.focusout||!document.addEventListener||a.each({focus:"focusin",blur:"focusout"},function(e,n){function t(e){return(e=a.event.fix(e)).type=n,a.event.handle.call(this,e)}a.event.special[n]={setup:function(){this.addEventListener(e,t,!0)},teardown:function(){this.removeEventListener(e,t,!0)},handler:function(e){var t=arguments;return t[0]=a.event.fix(e),t[0].type=n,a.event.handle.apply(this,t)}}}),a.extend(a.fn,{validateDelegate:function(n,e,i){return this.bind(e,function(e){var t=a(e.target);if(t.is(n))return i.apply(t,arguments)})}})}(jQuery),function(l){var e,n=l.validator,a="unobtrusiveValidation";function s(e,t,n){e.rules[t]=n,e.message&&(e.messages[t]=e.message)}function o(e){return e.replace(/([!"#$%&'()*+,./:;<=>?@\[\\\]^`{|}~])/g,"\\$1")}function c(e){return e.substr(0,e.lastIndexOf(".")+1)}function u(e,t){return 0===e.indexOf("*.")&&(e=e.replace("*.",t)),e}function r(e,t){var n=l(this).find("[data-valmsg-for='"+o(t[0].name)+"']"),i=n.attr("data-valmsg-replace"),a=i?!1!==l.parseJSON(i):null;n.removeClass("field-validation-valid").addClass("field-validation-error"),e.data("unobtrusiveContainer",n),a?(n.empty(),e.removeClass("input-validation-error").appendTo(n)):e.hide()}function d(e,t){var n=l(this).find("[data-valmsg-summary=true]"),i=n.find("ul");i&&i.length&&t.errorList.length&&(i.empty(),n.addClass("validation-summary-errors").removeClass("validation-summary-valid"),l.each(t.errorList,function(){l("<li />").html(this.message).appendTo(i)}))}function p(e){var t=e.data("unobtrusiveContainer"),n=t.attr("data-valmsg-replace"),i=n?l.parseJSON(n):null;t&&(t.addClass("field-validation-valid").removeClass("field-validation-error"),e.removeData("unobtrusiveContainer"),i&&t.empty())}function h(e){var t=l(this);t.data("validator").resetForm(),t.find(".validation-summary-errors").addClass("validation-summary-valid").removeClass("validation-summary-errors"),t.find(".field-validation-error").addClass("field-validation-valid").removeClass("field-validation-error").removeData("unobtrusiveContainer").find(">*").removeData("unobtrusiveContainer")}function m(e){var t=l(e),n=t.data(a),i=l.proxy(h,e);return n||(n={options:{errorClass:"input-validation-error",errorElement:"span",errorPlacement:l.proxy(r,e),invalidHandler:l.proxy(d,e),messages:{},rules:{},success:l.proxy(p,e)},attachValidation:function(){t.unbind("reset."+a,i).bind("reset."+a,i).validate(this.options)},validate:function(){return t.validate(),t.valid()}},t.data(a,n)),n}n.unobtrusive={adapters:[],parseElement:function(i,e){var t,a,r,s=l(i),o=s.parents("form")[0];o&&((t=m(o)).options.rules[i.name]=a={},t.options.messages[i.name]=r={},l.each(this.adapters,function(){var e="data-val-"+this.name,t=s.attr(e),n={};void 0!==t&&(e+="-",l.each(this.params,function(){n[this]=s.attr(e+this)}),this.adapt({element:i,form:o,message:t,params:n,rules:a,messages:r}))}),l.extend(a,{__dummy__:!0}),e||t.attachValidation())},parse:function(e){var t=l(e).parents("form").andSelf().add(l(e).find("form")).filter("form");l(e).find(":input[data-val=true]").each(function(){n.unobtrusive.parseElement(this,!0)}),t.each(function(){var e=m(this);e&&e.attachValidation()})}},(e=n.unobtrusive.adapters).add=function(e,t,n){return n||(n=t,t=[]),this.push({name:e,params:t,adapt:n}),this},e.addBool=function(t,n){return this.add(t,function(e){s(e,n||t,!0)})},e.addMinMax=function(e,i,a,r,t,n){return this.add(e,[t||"min",n||"max"],function(e){var t=e.params.min,n=e.params.max;t&&n?s(e,r,[t,n]):t?s(e,i,t):n&&s(e,a,n)})},e.addSingleVal=function(t,n,i){return this.add(t,[n||"val"],function(e){s(e,i||t,e.params[n])})},n.addMethod("__dummy__",function(e,t,n){return!0}),n.addMethod("regex",function(e,t,n){var i;return!!this.optional(t)||(i=new RegExp(n).exec(e))&&0===i.index&&i[0].length===e.length}),n.addMethod("nonalphamin",function(e,t,n){var i;return n&&(i=(i=e.match(/\W/g))&&i.length>=n),i}),e.addSingleVal("accept","exts").addSingleVal("regex","pattern"),e.addBool("creditcard").addBool("date").addBool("digits").addBool("email").addBool("number").addBool("url"),e.addMinMax("length","minlength","maxlength","rangelength").addMinMax("range","min","max","range"),e.add("equalto",["other"],function(e){var t=c(e.element.name),n=u(e.params.other,t);s(e,"equalTo",l(e.form).find(":input[name='"+o(n)+"']")[0])}),e.add("required",function(e){"INPUT"===e.element.tagName.toUpperCase()&&"CHECKBOX"===e.element.type.toUpperCase()||s(e,"required",!0)}),e.add("remote",["url","type","additionalfields"],function(i){var a={url:i.params.url,type:i.params.type||"GET",data:{}},r=c(i.element.name);l.each((i.params.additionalfields||i.element.name).replace(/^\s+|\s+$/g,"").split(/\s*,\s*/g),function(e,t){var n=u(t,r);a.data[n]=function(){return l(i.form).find(":input[name='"+o(n)+"']").val()}}),s(i,"remote",a)}),e.add("password",["min","nonalphamin","regex"],function(e){e.params.min&&s(e,"minlength",e.params.min),e.params.nonalphamin&&s(e,"nonalphamin",e.params.nonalphamin),e.params.regex&&s(e,"regex",e.params.regex)}),l(function(){n.unobtrusive.parse(document)})}(jQuery),function(s,i,e,o){var l=s(i);s.fn.lazyload=function(e){var t,a=this,r={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:i,data_attribute:"original",skip_invisible:!0,appear:null,load:null};function n(){var t=0;a.each(function(){var e=s(this);if(!r.skip_invisible||e.is(":visible"))if(s.abovethetop(this,r)||s.leftofbegin(this,r));else if(s.belowthefold(this,r)||s.rightoffold(this,r)){if(++t>r.failure_limit)return!1}else e.trigger("appear"),t=0})}return e&&(o!==e.failurelimit&&(e.failure_limit=e.failurelimit,delete e.failurelimit),o!==e.effectspeed&&(e.effect_speed=e.effectspeed,delete e.effectspeed),s.extend(r,e)),t=r.container===o||r.container===i?l:s(r.container),0===r.event.indexOf("scroll")&&t.bind(r.event,function(e){return n()}),this.each(function(){var n=this,i=s(n);n.loaded=!1,i.one("appear",function(){if(!this.loaded){if(r.appear){var e=a.length;r.appear.call(n,e,r)}s("<img />").bind("load",function(){i.hide().attr("src",i.data(r.data_attribute))[r.effect](r.effect_speed),n.loaded=!0;var e=s.grep(a,function(e){return!e.loaded});if(a=s(e),r.load){var t=a.length;r.load.call(n,t,r)}}).attr("src",i.data(r.data_attribute))}}),0!==r.event.indexOf("scroll")&&i.bind(r.event,function(e){n.loaded||i.trigger("appear")})}),l.bind("resize",function(e){n()}),/iphone|ipod|ipad.*os 5/gi.test(navigator.appVersion)&&l.bind("pageshow",function(e){e.originalEvent&&e.originalEvent.persisted&&a.each(function(){s(this).trigger("appear")})}),SCM.EventEmitter.subscribe("AppearTriggerBound",function(){n()}),SCM.EventEmitter.subscribe("LearningSearchImageBound",function(){n()}),this},s.belowthefold=function(e,t){return(t.container===o||t.container===i?l.height()+l.scrollTop():s(t.container).offset().top+s(t.container).height())<=s(e).offset().top-t.threshold},s.rightoffold=function(e,t){return(t.container===o||t.container===i?l.width()+l.scrollLeft():s(t.container).offset().left+s(t.container).width())<=s(e).offset().left-t.threshold},s.abovethetop=function(e,t){return(t.container===o||t.container===i?l.scrollTop():s(t.container).offset().top)>=s(e).offset().top+t.threshold+s(e).height()},s.leftofbegin=function(e,t){return(t.container===o||t.container===i?l.scrollLeft():s(t.container).offset().left)>=s(e).offset().left+t.threshold+s(e).width()},s.inviewport=function(e,t){return!(s.rightoffold(e,t)||s.leftofbegin(e,t)||s.belowthefold(e,t)||s.abovethetop(e,t))},s.extend(s.expr[":"],{"below-the-fold":function(e){return s.belowthefold(e,{threshold:0})},"above-the-top":function(e){return!s.belowthefold(e,{threshold:0})},"right-of-screen":function(e){return s.rightoffold(e,{threshold:0})},"left-of-screen":function(e){return!s.rightoffold(e,{threshold:0})},"in-viewport":function(e){return s.inviewport(e,{threshold:0})},"above-the-fold":function(e){return!s.belowthefold(e,{threshold:0})},"right-of-fold":function(e){return s.rightoffold(e,{threshold:0})},"left-of-fold":function(e){return!s.rightoffold(e,{threshold:0})}})}(jQuery,window,document),function(p,u){"$:nomunge";var h,a,d,n,t,i,o,m,r=Array.prototype.slice,f=decodeURIComponent,g=p.param,e=p.bbq=p.bbq||{},s=p.event.special,l="hashchange",v="querystring",S="fragment",c="elemUrlAttr",y="location",C="href",A="src",b=/^.*\?|#.*$/g,w=/^.*\#/,x={};function k(e){return"string"==typeof e}function I(e){var t=r.call(arguments,1);return function(){return e.apply(this,t.concat(r.call(arguments)))}}function $(e,t,n,i,a){var r,s,o,l,c;return i!==h?(c=(o=n.match(e?/^([^#]*)\#?(.*)$/:/^([^#?]*)\??([^#]*)(#?.*)/))[3]||"",2===a&&k(i)?s=i.replace(e?w:b,""):(l=d(o[2]),i=k(i)?d[e?S:v](i):i,s=2===a?i:1===a?p.extend({},i,l):p.extend({},l,i),s=g(s),e&&(s=s.replace(m,f))),r=o[1]+(e?"#":s||!o[1]?"?":"")+s+c):r=t(n!==h?n:u[y][C]),r}function T(e,t,n){return t===h||"boolean"==typeof t?(n=t,t=g[e?S:v]()):t=k(t)?t.replace(e?w:b,""):t,d(t,n)}function D(i,a,r,s){return k(r)||"object"==typeof r||(s=r,r=a,a=h),this.each(function(){var e=p(this),t=a||o()[(this.nodeName||"").toLowerCase()]||"",n=t&&e.attr(t)||"";e.attr(t,g[i](n,r,s))})}g[v]=I($,0,function(e){return e.replace(/(?:^[^?#]*\?([^#]*).*$)?.*/,"$1")}),g[S]=a=I($,1,function(e){return e.replace(/^[^#]*#?(.*)$/,"$1")}),a.noEscape=function(e){e=e||"";var t=p.map(e.split(""),encodeURIComponent);m=new RegExp(t.join("|"),"g")},a.noEscape(",/"),p.deparam=d=function(e,c){var u={},d={true:!0,false:!1,null:null};return p.each(e.replace(/\+/g," ").split("&"),function(e,t){var n,i=t.split("="),a=f(i[0]),r=u,s=0,o=a.split("]["),l=o.length-1;if(/\[/.test(o[0])&&/\]$/.test(o[l])?(o[l]=o[l].replace(/\]$/,""),l=(o=o.shift().split("[").concat(o)).length-1):l=0,2===i.length)if(n=f(i[1]),c&&(n=n&&!isNaN(n)?+n:"undefined"===n?h:d[n]!==h?d[n]:n),l)for(;s<=l;s++)r=r[a=""===o[s]?r.length:o[s]]=s<l?r[a]||(o[s+1]&&isNaN(o[s+1])?{}:[]):n;else p.isArray(u[a])?u[a].push(n):u[a]!==h?u[a]=[u[a],n]:u[a]=n;else a&&(u[a]=c?h:"")}),u},d[v]=I(T,0),d[S]=n=I(T,1),p[c]||(p[c]=function(e){return p.extend(x,e)})({a:C,base:C,iframe:A,img:A,input:A,form:"action",link:C,script:A}),o=p[c],p.fn[v]=I(D,v),p.fn[S]=I(D,S),e.pushState=t=function(e,t){k(e)&&/^#/.test(e)&&t===h&&(t=2);var n=e!==h,i=a(u[y][C],n?e:{},n?t:2);u[y][C]=i+(/#/.test(i)?"":"#")},e.getState=i=function(e,t){return e===h||"boolean"==typeof e?n(e):n(t)[e]},e.removeState=function(e){var n={};e!==h&&(n=i(),p.each(p.isArray(e)?e:arguments,function(e,t){delete n[t]})),t(n,2)},s[l]=p.extend(s[l],{add:function(e){var t;function n(e){var n=e[S]=a();e.getState=function(e,t){return e===h||"boolean"==typeof e?d(n,e):d(n,t)[e]},t.apply(this,arguments)}if(p.isFunction(e))return t=e,n;t=e.handler,e.handler=n}})}(jQuery,this),function(a,r,e){"$:nomunge";var t,s,o,l,c,n,i=a.event.special,u="location",d="hashchange",p="href",h=a.browser,m=document.documentMode,f=h.msie&&(void 0===m||m<8),g="on"+d in r&&!f;function v(e){return(e=e||r[u][p]).replace(/^[^#]*#?(.*)$/,"$1")}a[d+"Delay"]=100,i[d]=a.extend(i[d],{setup:function(){if(g)return!1;a(t.start)},teardown:function(){if(g)return!1;a(t.stop)}}),(n={}).start=function(){if(!s){var i=v();l||(l=c=function(e){return e},f&&(o=a('<iframe src="javascript:0"/>').hide().insertAfter("body")[0].contentWindow,c=function(){return v(o.document[u][p])},(l=function(e,t){if(e!==t){var n=o.document;n.open().close(),n[u].hash="#"+e}})(v()))),function e(){var t=v(),n=c(i);t!==i?(l(i=t,n),a(r).trigger(d)):n!==i&&(r[u][p]=r[u][p].replace(/#.*/,"")+"#"+n),s=setTimeout(e,a[d+"Delay"])}()}},n.stop=function(){o||(s&&clearTimeout(s),s=0)},t=n}(jQuery,this);var SCM=SCM||{};SCM.AdvancedSearch={};var definedLimit=$("#hfSolrMaxAllowSearchChar").val(),charactorLimit=definedLimit||255,activeSavedSearchCookieName=App.isLearningContent||App.isMyAccount?"ActiveSavedLearningSearch":"ActiveSavedJournalSearch";function AppendSubscriptionParameterToUrl(e){var t=e;return"true"===$("#hfEnableSubscriptionFilter").val().toLowerCase()&&(t=e+"&subonly=true"),t}function isValidDate(e){var t=/^(\d{2})[-\/](\d{2})[-\/](\d{4})$/.exec(e);if(null===t)return!1;var n=parseInt(t[2]),i=parseInt(t[1]),a=parseInt(t[3]);if(NaN===n||NaN===i||NaN===a)return!1;var r=new Date(a,i-1,n),s=r.getDate().toString(),o=(r.getMonth()+1).toString(),l=r.getFullYear().toString();return s===n.toString()&&o===i.toString()&&l===a.toString()}function isYearOnly(e){var t=/^(\d{4})$/.exec(e);return t&&-1<t[1]}function updateYearOnlyToFullDate(e,t){var n=e.val(),i=t?"01":"12",a=t?"01":"31";return e.val(i+"/"+a+"/"+n),e.val()}Date.prototype.today=function(){return(this.getMonth()+1<10?"0":"")+(this.getMonth()+1)+"/"+(this.getDate()<10?"0":"")+this.getDate()+"/"+this.getFullYear()};var micrositeJournalDisplayName="",micrositeJournalId="",solrsearchScope=$("#hfSolrJournalID").val();void 0===solrsearchScope?solrsearchScope="":null!==solrsearchScope&&(solrsearchScope=solrsearchScope.replace("J","")),$(document).ready(function(){function t(e){if(null!==e&&""!==e)if(e.length>parseInt(charactorLimit))alert("Please enter a term between 1 to "+charactorLimit+" characters");else{var t,n='"'+e+'"',i="";solrsearchScope&&(i="&fl_JournalID="+micrositeJournalId+"&f_JournalDisplayName="+encodeURIComponent($.trim(micrositeJournalDisplayName))),t="/searchresults?fd_ArticleTitle="+encodeURIComponent(n),t+=""!==i?i:"&allJournals=1",SCM.SiteJS.saveDomainCookie(activeSavedSearchCookieName,"",document.domain),window.location.href=AppendSubscriptionParameterToUrl(t)}else alert("Please enter a term to search")}function n(){var e=$("#citationYear").val(),t=$("#citationVolume").val(),n=$("#citationPage").val(),i=$(".citationJournal").val(),a=$(".citationJournal option:selected").text(),r=!1,s={},o="";if(null!==i&&""!==i&&"- Select a Journal"!==i||(o="Please select a journal.\n"),null!==e&&""!==e&&"Yr"!==e)if(isNaN(e))o+="Year must be numeric.\n";else{var l="01/01/"+e+" TO 12/31/"+e;s.rg_ArticleDate=l}if(null!==t&&""!==t&&"Vol"!==t&&(isNaN(t)?o+="Volume must be numeric.":s.fd_Volume=t),""!==n&&"1st Pg"!==n&&(s.fd_StartPage=n),0<o.length)return alert(o),!1;var c=i.split(",");"C"===c[0]?(s.fl_JournalID=c[1],r=!0):s.fl_JournalHistID=c[2];var u=$.param.querystring("/searchresults",s);u+=r?"&f_JournalDisplayName="+encodeURIComponent($.trim(a)):"&fd_LegacyJournalDisplayName="+encodeURIComponent($.trim(a)),SCM.SiteJS.saveDomainCookie(activeSavedSearchCookieName,"",document.domain),window.location.href=AppendSubscriptionParameterToUrl(u)}function i(){var e,t,n="1",i=null,a=null,r=[],s=[],o=[],l=[],c={},u=null,d=!1,p=!1;if(null!==(e=$("#advancedSearch .search-field").val())&&""!==e)if(e.length>parseInt(charactorLimit))alert("Please enter a term between 1 to "+charactorLimit+" characters.");else{switch(c.q=e,$("#advancedSearch input.anyAllExact[type=radio]").each(function(){this.checked&&(n=$(this).attr("id"))}),t='"'+e+'"',n){case"1":c.hd="advancedAny",u=e;break;case"2":c.hd="advancedAll",u=e;break;case"3":u=t}c.q=encodeURIComponent($.trim(u));var h=$("#advancedSearch .authorSearch").val();if(null!==h&&""!==h&&(c.author=h),null!==(i=$("#startDateSemanticSearch").val())&&""!==i&&"mm/dd/yyyy"!==i){if(isYearOnly(i))i=updateYearOnlyToFullDate($("#startDateSemanticSearch"),!0);else if(!isValidDate(i))return void alert("please enter valid start date");var m=$("#endDateSemanticSearch");if(""===m.val())a=(new Date).today();else if(isYearOnly(a=m.val()))a=updateYearOnlyToFullDate(m,!1);else if(!isValidDate(a)||new Date(a)<new Date(i))return void alert("please enter valid end date");c.rg_ArticleDate=i+" TO "+a}$("#advancedSearch input.rbPublication[type=radio]").each(function(){this.checked&&(d="J*"===$(this).attr("value"))}),$("#advancedSearch .chk-journal:checked").each(function(){d=!0;var e=$(this);e.attr("data-display-name"),s.push(e.attr("data-display-name")),o.push(e.attr("value")),r.push(e.attr("jid"))}),$("#advancedSearch .chk-articletype:checked").each(function(){p=!0;var e=$(this);e.attr("text"),l.push(e.attr("value"))});var f=$.param.querystring("/searchresults",c);if(d){o.join(" OR "),r.join(" OR ");var g=s.join("AND");if(f+="&restypeid=3",0===s.length)f+="&allJournals=1";else f+="&f_JournalDisplayName="+encodeURIComponent($.trim(g))}else f+="&allJournals=1";if(p){var v=l.join("AND");f+="&f_ArticleTypeDisplayName="+encodeURIComponent($.trim(v))}SCM.SiteJS.saveDomainCookie(activeSavedSearchCookieName,"",document.domain),window.location.href=AppendSubscriptionParameterToUrl(f)}else alert("Please enter a term to search")}function a(){var e,t=null,n=null,i=[],a=[],r={},s=null,o=null,l=!1;if(null!==(e=$(".advancedAuthorSearch .search-field").val())&&""!==e)if(e.length>parseInt(charactorLimit))alert("Please enter a term between 1 to "+charactorLimit+" characters.");else{if(r.author=encodeURIComponent($.trim(e)),r.q=encodeURIComponent($.trim(e)),null!==(t=$("#startDateAuthor").val())&&""!==t&&"mm/dd/yyyy"!==t){if(isYearOnly(t)&&(t=updateYearOnlyToFullDate($("#startDateAuthor"),!0)),!isValidDate(t))return void alert("please enter valid start date");var c=$("#endDateAuthor");if(""===c.val()?n=(new Date).today():isYearOnly(n=c.val())&&(n=updateYearOnlyToFullDate(c,!1)),!isValidDate(n)||new Date(n)<new Date(t))return void alert("please enter valid end date");r.rg_ArticleDate=t+" TO "+n}$(".advancedAuthorSearch input.rbPublication[type=radio]").each(function(){this.checked&&(l="J*"===$(this).attr("value"))}),$(".advancedAuthorSearch .chk-journal:checked").each(function(){var e=$(this);l=!0,o=e.attr("data-display-name"),s=e.attr("text"),a.push(e.attr("value")),i.push(e.attr("jid"))});var u=$.param.querystring("/searchresults",r);if(l){var d=a.join(" OR "),p=i.join(" OR ");if(u+="&restypeid=3",1===a.length){var h=encodeURIComponent($.trim(s));journalQuery=s===o?"&fl_JournalID="+p+"&f_JournalDisplayName="+h:"&fl_JournalID="+p+"&f_JournalDisplayName="+encodeURIComponent($.trim(o))+"&fd_LegacyJournalDisplayName="+h,u+=journalQuery}else if(1<a.length){u+="&fl_JournalHistID="+d}else 0===a.length&&(u+="&allJournals=1")}else u+="&allJournals=1";SCM.SiteJS.saveDomainCookie(activeSavedSearchCookieName,"",document.domain),window.location.href=AppendSubscriptionParameterToUrl(u)}else alert("Please enter a term to search")}App.isAdvancedSearch&&(null!==solrsearchScope&&""!==solrsearchScope&&($(".advancedAuthorSearch input:checkbox").each(function(){var e=$(this),t=e.attr("currentjournaldisplayname"),n=e.attr("text"),i=e.attr("jid");if(null!==t&null!==n&&t===n&&i===solrsearchScope)return this.checked=!0,micrositeJournalDisplayName=n,micrositeJournalId=i,!1}),$("#advancedSearch input:checkbox").each(function(){var e=$(this),t=e.attr("currentjournaldisplayname"),n=e.attr("text"),i=e.attr("jid");if(null!==t&null!==n&&t===n&&i===solrsearchScope)return this.checked=!0,micrositeJournalDisplayName=n,micrositeJournalId=i,!1}),$(".citationJournal").each(function(){$("option",this).each(function(){var e=$(this).val().split(",");null!==e&&"C"===e[0]&&(e[1]===solrsearchScope&&$(this).attr("selected","selected"))})})),$("#btnAdvancedTitleSearch").click(function(){t($("#articleTitle").val())}),$("#articleTitle").keydown(function(e){13===e.keyCode&&t($("#articleTitle").val())}),$("#btnAdvancedCitationSearch").click(function(){n()}),$("#btnAdvancedCitationSearch").keydown(function(e){13===e.keyCode&&n()}),$("#advancedSearchQueryTerm").keydown(function(e){13===e.keyCode&&i()}),$("#btnAdvancedSearch, #btnAdvancedSearchTop").on("click",function(){i()}),$("#btnAdvancedAuthorSearch, #btnAdvancedAuthorSearchTop").on("click",function(){a()}),$("#advancedAuthorSearchQueryTerm").keydown(function(e){13===e.keyCode&&a()}),$("#Doi").keydown(function(e){13===e.keyCode&&(GetDoiUrl(),$("#aDoiSearch").click())}))}),$(function(){try{$("#startDateSemanticSearch, #endDateSemanticSearch, #startDateAuthor, #endDateAuthor").bind("keydown",function(e){if(13===e.which){var t=$(this);if(isYearOnly(t.val()))return updateYearOnlyToFullDate(t,!0),e.preventDefault(),e.stopImmediatePropagation(),!1}})}catch(e){}});var SCM=SCM||{};!function(d,p){var t=p(document);function l(e){window.location.href=e}d.$noAccessModal=p("#no-access-reveal"),d.$registerFreePdfModal=p("#register-free-pdf-reveal"),d.$learningNoAccessModal=p("#no-access-reveal-learning"),d.openNoAccessModalArticle=function(e,t){var n,i,a,r,s,o=".free-access, .open-access, .icon-free";if(n=e.find(".free-access").length,App.isAnyArticle?n=App.isFreeArticle:App.isSearch?n=e.closest(".search-result").find(o).length:App.isIssue?n=e.closest(".article").find(o).length:App.isCollection&&(n=e.closest(".article").find(o).length),n)d.$registerFreePdfModal.foundation("reveal","open"),i=p(".register-free-pdf"),a=i.find(".no-access--alerts-input"),r=i.find(".sign-in--create-link"),s=i.find(".sign-in--personal-link"),SCM.SiteJS.toggleAlertFlagForSignInSignUpUrls(i,a,r,s,"article");else if(0<App.Quiz.quizId)d.$learningNoAccessModal.foundation("reveal","open");else{var l=d.$noAccessModal.find("#articleLinkToPurchase"),c=l.attr("data-storeurl")+"/productDetails.aspx?articleId="+t;l.attr("href",c);var u=c+"&isJournalSubscription=1";d.$noAccessModal.find("#journalLinkToSubscribe").attr("href",u),p("#modal_rent_this_article").load("/RentArticle/"+t),d.$noAccessModal.foundation("reveal","open")}},d.checkArticlePDFAccess=function(t){var n=t.attr("data-article-id"),i=t.attr("data-article-url"),e=t.attr("data-ajax-url"),a=!1;App.isAnyArticle?a=App.isFreeArticle:App.isIssue&&(a=t.closest(".article").find(".free-access, .open-access, .icon-free").length),a&&App.isReferredFromGoogle?l(i):p.ajax({type:"POST",url:e,data:{aId:n},traditional:!0,success:function(e){e.Success?l(i):(d.openNoAccessModalArticle(t,n),SCM.ClientStatsMaster.trackPdfTurnAwayAction(n,i))},error:function(e,t,n){SCM.JSUtility.logErrors(e,t,n)}})},d.checkIssuePDFAccess=function(e){var r=e.attr("data-issue-id"),s=e.attr("data-issue-url"),t=e.attr("data-ajax-issue-url"),o=d.$noAccessModal.find(".aIssuePurchaseLink").attr("href");-1<s.toLowerCase().indexOf("/toc.pdf")?window.location.href=s:p.ajax({type:"POST",url:t,data:{issueId:r},traditional:!0,success:function(e){var t,n,i,a;e.Success?l(s):(i=r,0<=(a=n=o).toLowerCase().indexOf("resourceid=")&&(a=n.replace(/resourceID=\{0\}|resourceID=\d+/i,"resourceid="+i)),t=a,d.$noAccessModal.find(".aIssuePurchaseLink").attr("href",t),d.$noAccessModal.foundation("reveal","open"))},error:function(e,t,n){SCM.JSUtility.logErrors(e,t,n)}})},d.bindUiEvents=function(){t.on("click",".pdfaccess, .pdfaccess-text",function(){var e=p(this);t.foundation(),d.$noAccessModal.foundation("reveal","close"),d.checkArticlePDFAccess(e)}),t.on("click",".close-reveal-modal",function(){p(this).parents(".reveal-modal").foundation("reveal","close")}),t.on("click",".al-link.issue-pdfLink",function(){d.$noAccessModal.foundation("reveal","close"),d.checkIssuePDFAccess(p(this))}),t.on("click",".article-pdf-only",function(){p("#pdf-link").click()}),t.on("click",".meta-journal-club",function(){p("h1.has-jc-ppt")||p("#pdf-link").click()})},d.init=function(){d.bindUiEvents()}}(SCM.PDFAccess=SCM.PDFAccess||{},jQuery);var SCM=SCM||{};SCM.SearchResults={},SCM.SearchResults.defaults={controller:"Solr",action:"SolrSearch",instanceName:"AMAv2_SearchResults",updateTargetSelector:encodeURIComponent("#divSearch"),onHashChange:function(e){}},$(function(){if(App.isSearch){var e=$("#fromDate"),t=$("#ToDate"),n=$(window),a=function(t,n){t.bind("keydown",function(e){if(13==e.which&&isYearOnly(t.val()))return updateYearOnlyToFullDate(t,n),e.preventDefault(),e.stopImmediatePropagation(),!1}).datepicker()},i={"":$(".bbq-default")};n.bind("hashchange",function(e){var t=$.param.fragment();i[t]?(""==t&&window.location.reload(),i[t].show()):function(t){var e=$.extend(SCM.SearchResults.defaults,t);delete t.controller,delete t.action,delete t.instanceName,delete t.updateTargetSelector;var n=$(decodeURIComponent(e.updateTargetSelector)),i="/"+e.controller+"/"+e.action+"/"+e.instanceName;void 0!==e.baseSiteUrl&&""!=e.baseSiteUrl&&(i="//"+e.baseSiteUrl+i),$.ajax({url:i,data:t,success:function(e){n.html(e),setTimeout(function(){$("html,body").animate({scrollTop:0},"slow")},10),a($("#fromDate"),!0),a($("#ToDate"),!1),SCM.SearchResults.defaults.onHashChange(t)},error:function(e){SCM.JSUtility.logErrors(e)}})}(e.getState())}),$.param.fragment()&&n.trigger("hashchange"),a(e,!0),a(t,!1)}});var SCM=SCM||{},App=App||{};SCM.SolrSearch={},App.SavedSearchUserAlert={},App.SavedSearchUserAlert.defaults={savedSearchAlertScheduleId:11},SCM.SolrSearch.defaults={controller:App.isLearningSearchResults?"AMA":"Solr",action:App.isLearningSearchResults?"LearningSolrSearch":"SolrSearch",instanceName:App.isLearningSearchResults?"AMAv2_LearningSearchResults":"AMAv2_SearchResults",updateTargetSelector:"#divSearch",cookieValue:App.isLearningSearchResults?"persistentLearningSearchFilters":"persistentSearchFilters",defaultSearchUrl:App.isLearningSearchResults?"/learning/searchresults?q=*&hd=learning&allJournals=1&f_HasCME=true":'/searchresults?q=*&allJournals=1&SearchSourceType=1&exPrm_qqq={!payloadDisMaxQParser%20pf=Tags%20qf=Tags^0.0000001%20payloadFields=Tags%20bf=}" * "&exPrm_hl.q=*'};var SolrDateErrorEnum={VALID:0,INVALID:1,INVALID_YEAR:2};Date.prototype.today=function(){return(this.getMonth()+1<10?"0":"")+(this.getMonth()+1)+"/"+(this.getDate()<10?"0":"")+this.getDate()+"/"+this.getFullYear()},Date.prototype.format=function(){var e=this.getDate(),t=this.getMonth()+1;return e<10&&(e="0"+e),t<10&&(t="0"+t),t+"/"+e+"/"+this.getFullYear()},function(SolrSearch,$,undefined){var $body=$("body"),hfSolrJournalID=$("#hfSolrJournalID"),hfGlobalSearchSiteURL=$("#hfGlobalSearchSiteURL"),journalScope=hfSolrJournalID.val(),$ajaxWrap=$(".ajax-container"),$selectedSaveSearch=$(".selected-save-search, .selected-save-search-learning"),$selectedSaveSearchTxt=$(".selected-save-search-txt"),$saveSearchLink=$(".save-search-link, .save-search-link-learning"),$savedSearchNameTxtBox=$(".saved-search-name-textbox"),queryText="",activeSavedSearchCookieName=App.isLearningContent||App.isMyAccount?"ActiveSavedLearningSearch":"ActiveSavedJournalSearch",testSearchInput=function(e,t){return""===$.trim(e)||null===e?(alert("Please enter a term to search: "),!1):e?(doSolrSearch(e,t),!0):(alert("SCM.SolrSearch.testSearchInput() fail"),!1)},testKeypress=function(e,t){if(13===e.keyCode){e.preventDefault();var n=determineScope();testSearchInput(t,n)}};function doSolrSearch(e,t){window.location.href=buildSolrSearchQuery(e,t)}function doSolrFacetSearch(t){var n=$.extend(SCM.SolrSearch.defaults,t),i=$(n.updateTargetSelector),e="/"+n.controller+"/"+n.action+"/"+n.instanceName;e+="?"+t.queryString,$.ajax({url:e,success:function(e){i.html(e),refreshResults(i,t,n),SCM.JSUtility.addStateToggle("#narrow-filter",".search-facets",undefined,!0),App.isSearch&&(bindKeyToDate($("#fromDate"),!0),bindKeyToDate($("#ToDate"),!1))},error:function(e){console.log(e)}})}function buildSolrSearchQuery(e,t){resetActiveSavedSearch();var n,i,a=[["J67","JAMA"],["J68","JAMA Dermatology"],["J69","JAMA Facial Plastic Surgery"],["J70","JAMA Psychiatry"],["J71","JAMA Internal Medicine"],["J72","JAMA Neurology"],["J73","JAMA Ophthalmology"],["J74","JAMA Otolaryngology–Head & Neck Surgery"],["J75","JAMA Pediatrics"],["J76","JAMA Surgery"],["J91","Archives of Neurology & Psychiatry"],["J174","JAMA Oncology"],["J184","JAMA Cardiology"],["J187","JAMA Network Open"]],r="&exPrm_qqq={!payloadDisMaxQParser pf=Tags qf=Tags^0.0000001 payloadFields=Tags bf=}"+('"'+(queryText=encodeURIComponent(e.trim()))+'"'),s="&exPrm_hl.q="+queryText,o="searchresults?",l="",c="",u="",d="",p="",h="",m=null===t||t===undefined||""===t||"J*"===t,f="L*"===t;if(p=f?"persistentLearningSearchFilters":"persistentSearchFilters",(i=SCM.SiteJS.getCookie(p))&&(l=(l="&"+i).replace(/(([?|&]{1})?allJournals[^&]*)/,"")),f)o="/learning/"+o,l||(h="hd=learning&f_HasCME=true&"),-1===l.indexOf("allJournals")&&(c="&allJournals=1");else if(m)-1===l.indexOf("allJournals")&&-1===l.indexOf("JournalDisplayName")&&(c="&allJournals=1"),o=hfGlobalSearchSiteURL.val()!==undefined?hfGlobalSearchSiteURL.val()+o:"/"+o,d="&SearchSourceType=1";else{if(l){l=l.replace(/(([?|&]{1})?f_JournalDisplayName[^&]*)/,"")}for(var g=a.length;g--;)if(a[g][0]===t){u=a[g][1];break}c+="&f_JournalDisplayName="+encodeURIComponent($.trim(u)),d="&SearchSourceType=3",o="/"+o}return saveSolrSearchParams(p,h+(n="q="+queryText)),o+=h+n+c+l+d+r+s}function saveSolrSearchParams(e,t){var n=SCM.SiteJS.formatSearchQueryToSaveToLocalStorage(t);SCM.SiteJS.saveDomainCookie(e,n,document.domain),SCM.SiteJS.saveDomainCookie("currentJournalCount",App.currentJournalCount,document.domain)}function determineScope(){var e=$(".cs-options").find(".cs-selected");return 0===e.length&&(e=$(".cs-placeholder")),e.length?e.attr("data-value"):"J*"}function resetActiveSavedSearch(){SCM.SiteJS.saveDomainCookie(activeSavedSearchCookieName,"",document.domain)}function isValidSolrDate(e){var t=/^(\d{1,2})[-\/](\d{1,2})[-\/](\d{2,4})$/.exec(e);if(null==t)return SolrDateErrorEnum.INVALID;var n=t[2],i=t[1],a=t[3];if(2===a.length)return SolrDateErrorEnum.INVALID_YEAR;1===n.length&&(n="0"+n),1===i.length&&(i="0"+i);var r=new Date(a,i-1,n),s=r.getFullYear().toString(),o=(r.getMonth()+1).toString();return r.getDate()!==n.toString()&&o!==i.toString()&&s!==a.toString()?SolrDateErrorEnum.INVALID:SolrDateErrorEnum.VALID}function isYearOnly(e){var t=/^(\d{4})$/.exec(e);return t&&-1<t[1]}function updateYearOnlyToFullDate(e,t){var n=e.val(),i=null,a=null;return t?a=i="01":(i="12",a="31"),e.val(i+"/"+a+"/"+n),e.val()}function formatDate(e){var t=/^(\d{1,2})[-\/](\d{1,2})[-\/](\d{2,4})$/.exec(e),n=t[1],i=t[2],a=i,r=n,s=t[3];return 1===i.length&&(a="0"+i),1===n.length&&(r="0"+n),r+"/"+a+"/"+s}function isTrue(e){return"string"==typeof e?"true"===e.toLowerCase():!!e}function bindUiEvents(){var e=$(".search-button"),t=$("#search-term"),n=$(".chkSelect");e.off("click"),t.off("keydown"),n.off("click"),e.on("click",function(){var e=determineScope();testSearchInput(t.val(),e)}),t.keydown(function(e){testKeypress(e,t.val())}),(App.isSearch||App.isLearningSearchResults)&&(n.on("click",function(e){doSolrFacetSearch({queryString:$(this).data("redirectUrl")})}),$(".sort-link, .close, .al-pageNumber, .al-nav-next, .al-nav-previous").on("click",function(e){var t=$(this).attr("data-url");null==t||"#"===t||""===t||$(this).hasClass("view-more")||(e.preventDefault(),resetActiveSavedSearch(),"True"===$("#bRetainQueryStringParams").val()?window.location.hash="#"+t:window.location=window.location.pathname+"?"+t)}),$("#btnRangeSearch").on("click",function(e){var t=$("#fromDate"),n=t.val(),i=$("#ToDate"),a=i.val(),r=(new Date).today(),s=new Date("July 14, 1883").format();""===n?(t.val(s),n=s):isYearOnly(n)&&(n=updateYearOnlyToFullDate($("#fromDate"),!0)),""===a?(i.val(r),a=r):isYearOnly(a)&&(a=updateYearOnlyToFullDate($("#ToDate"),!1));var o=isValidSolrDate(n),l=isValidSolrDate(a);if(o!==SolrDateErrorEnum.INVALID&&l!==SolrDateErrorEnum.INVALID)if(o!==SolrDateErrorEnum.INVALID_YEAR&&l!==SolrDateErrorEnum.INVALID_YEAR){var c=formatDate(n),u=formatDate(a);if(new Date(u)<new Date(c))alert("End Date must be greater than Start Date.");else{var d=$(this).attr("data-url").replace("queryText",c+" TO "+u);resetActiveSavedSearch(),window.location=window.location.pathname+"?"+d}}else alert("Please enter a four digit year.");else alert("Please enter valid dates.")})),$("#umbrellaSiteAutoCompleteResults").on("click","a",function(e){e.preventDefault();var t=$(this).attr("href");null!==t&&"#"!==t&&""!==t&&(resetActiveSavedSearch(),window.location=t)}),$("#solrSearchBtn").on("click",function(e){var t=$("#txtSearch").val();null==t||""===t?alert("Please enter a term to search."):(t=encodeURIComponent(t),window.location="?q="+t)})}function bindPaginationEvents(){if(App.isLearningSearchResults){var e=$(".learning-search");e.off("click"),e.on("click",".view-more",function(e){e.preventDefault();var t=$(this).attr("data-url"),n=$(".learning--pagination .loading-cube .sk-folding-cube");$(".pagination-buttons").hide(),n.removeClass("hide"),appendResults(e,t)})}}function moveStartLearningButton(e){0===e.find(".pagination").length&&$(".learning--start-learning").css("width","100%").css("text-align","center")}function appendResults(e,t){e.preventDefault();var n=$(".learning--pagination");getResultsFromSolr($(".learning-search-results-contents").find(".search-results-list"),n,t)}function startLearningButtonEvents(){App.isLearningSearchResults&&$(".learning-results-buttons").on("click",".start-learning",function(e){e.preventDefault();var t=$(".learning-result-title").first().find(".content--title").attr("href");window.location.href=t})}function getResultsFromSolr(s,o,e){var t=window.location.search;if(0===t.length)t="?";else{var n=window.location.toString();t=n.substring(0,n.indexOf("?")+1)}var i=t+=e;$.ajax({url:i,success:function(e){if(e){var t=$(e),n=t.find(".learning--search-results"),i=t.find(".learning--pagination");$ajaxWrap.empty(),$ajaxWrap.html(n);var a=$ajaxWrap.find(".search-results-list");$ajaxWrap.empty(),$ajaxWrap.html(i);var r=$ajaxWrap.find(".learning--pagination");moveStartLearningButton(r),o.html(r),s.append(a.children()),i.html(r.html()),startLearningButtonEvents()}},error:function(e,t,n){console.log("xhr: "+e),console.log("status: "+t),console.log("status code: "+e.statusCode),console.log("error thrown: "+n)}})}function displaySelectedSavedSearch(e){$saveSearchLink.hide(),$selectedSaveSearchTxt.text(e),$selectedSaveSearch.show()}function refreshResults(e,t,n){bindUiEvents(),bindPaginationEvents(),window.history.pushState(t,null,window.location.pathname+"?"+t.queryString),e[0].getBoundingClientRect().top<0&&$("html, body").animate({scrollTop:e[0].offsetTop},1e3);var i=SCM.SiteJS.formatSearchQueryToSaveToLocalStorage(t.queryString);SCM.SiteJS.saveDomainCookie(n.cookieValue,i,document.domain),SCM.SiteJS.saveDomainCookie("currentJournalCount",App.currentJournalCount,document.domain),resetActiveSavedSearch(),SCM.SiteJS.setGlobalSearchDropdownSelectedValue(t.queryString)}var bindKeyToDate=function(t,n){t.bind("keydown",function(e){if(13==e.which&&isYearOnly(t.val()))return updateYearOnlyToFullDate(t,n),e.preventDefault(),e.stopImmediatePropagation(),!1}).datepicker()};function resetSavedSearchListItemsViewAndEdit(){$("[id^=searchListItemEdit_]").hide(),$("[id^=searchListItem_]").show()}function stripExcludedSolrSearchParameters(e){return e.replace(/(([?|&]{1})rg_ArticleDate[^&]*)/,"")}function saveSolrSearchInfo(savedSearchName){var $savedSearchNameErrorLbl=$(".saved-search-name-error");if(""===savedSearchName)return $savedSearchNameErrorLbl.text("Please name your search"),void $savedSearchNameErrorLbl.show();var searchAlertFrequency=0,redirectUrl="",currentUrl=stripExcludedSolrSearchParameters(window.location.href),data=JSON.stringify({searchName:savedSearchName,url:currentUrl,scheduleId:searchAlertFrequency,redirectUrl:redirectUrl,controlId:"AMA_Journal_SaveSearches"}),ajaxUrl="/Solr/SaveSolrSearchInfo";$.ajax({url:ajaxUrl,type:"POST",dataType:"json",cache:!1,data:data,contentType:"application/json; charset=utf-8",success:function(e){if(null!=e){if(!e.Success){var t=e.Html.replace("[searchname]",savedSearchName);$savedSearchNameErrorLbl.text(t),$savedSearchNameErrorLbl.show()}e.Success&&($(".close-reveal-modal").click(),$savedSearchNameErrorLbl.hide(),$savedSearchNameTxtBox.text(""),SCM.SiteJS.saveDomainCookie(activeSavedSearchCookieName,savedSearchName,document.domain),location.reload(!0))}},error:function(xmlHttpRequest,textStatus,errorThrown){if(window.console){var err=eval("("+xmlHttpRequest.responseText+")");console.log("error: "+err),console.log("status: "+textStatus)}}})}function deleteSolrSearchInfo(userSearchId,userAlertId){var success=!1;if(0===userSearchId)return success;var data=JSON.stringify({userSearchId:userSearchId,userAlertId:userAlertId,controlId:"AMA_Journals_DeleteSearches"}),ajaxUrl="/Solr/DeleteSolrSearchInfo";return $.ajax({async:!1,url:ajaxUrl,type:"POST",dataType:"json",cache:!1,data:data,contentType:"application/json; charset=utf-8",success:function(e){e.Success?success=!0:alert(e.Html)},error:function(xmlHttpRequest,textStatus,errorThrown){if(window.console){var err=eval("("+xmlHttpRequest.responseText+")");console.log("error: "+err),console.log("status: "+textStatus)}}}),success}function toggleSavedSearchRename(e,t){$("#"+e).show(),t.hide()}function updateSolrSearchInfo(updatedSearchName,userSearchId,$searchListItem){var $errorLbl=$searchListItem.find(".search-list-item-rename-error");if(""===updatedSearchName||0===userSearchId)return $errorLbl.text("Please name your search"),void $errorLbl.show();var data=JSON.stringify({searchName:updatedSearchName,userSearchId:userSearchId,controlId:"AMA_Journals_RenameSearches"}),ajaxUrl="/Solr/RenameSolrSearchInfo";$.ajax({url:ajaxUrl,type:"POST",dataType:"json",cache:!1,data:data,contentType:"application/json; charset=utf-8",success:function(e){if(e.Success){var t=$searchListItem.find(".search-list-item-link"),n=$searchListItem.find(".search-list-item-link");!0===(SCM.SiteJS.getCookie(activeSavedSearchCookieName)===t.text())&&($selectedSaveSearchTxt.text(updatedSearchName),SCM.SiteJS.saveDomainCookie(activeSavedSearchCookieName,updatedSearchName,document.domain)),t.text(updatedSearchName),n.text(updatedSearchName),resetSavedSearchListItemsViewAndEdit(),$errorLbl.hide(),$errorLbl.text("")}else{var i=e.Html.replace("[searchname]",updatedSearchName);$errorLbl.text(i),$errorLbl.show()}},error:function(xmlHttpRequest,textStatus,errorThrown){if(window.console){var err=eval("("+xmlHttpRequest.responseText+")");console.log("error: "+err),console.log("status: "+textStatus)}}})}function bindSaveSearchEvents(){$(".save-search-btn").off("click"),$savedSearchNameTxtBox.off("keypress"),$(".clear-selected-save-search, .clear-selected-save-search-learning").off("click"),$(".search-list-item-rename-link").off("click"),$(".search-list-item-rename-cancel-btn").off("click"),$(".search-list-item-delete-link").off("click"),$(".search-list-item-rename-btn").off("click"),$(".search-list-item-link").off("click"),$(".search-alert #subscribe").off("click"),$savedSearchNameTxtBox=$(".saved-search-name-textbox");var n="";(App.isSearch||App.isLearningSearchResults)&&($(".save-search-btn").on("click",function(e){e.preventDefault(),saveSolrSearchInfo($savedSearchNameTxtBox.val().trim())}),$savedSearchNameTxtBox.on("keypress",function(e){13===(e.keyCode||e.which)&&saveSolrSearchInfo($savedSearchNameTxtBox.val().trim())}),$(".clear-selected-save-search, .clear-selected-save-search-learning").on("click",function(e){$selectedSaveSearch.hide(),$selectedSaveSearchTxt.text(""),$saveSearchLink.show(),resetActiveSavedSearch(),window.location.href=SCM.SolrSearch.defaults.defaultSearchUrl})),(App.isSearch||App.isLearningContent||App.isMyAccount)&&($(".search-list-item-rename-link").on("click",function(e){e.preventDefault();var t=$(this).parents().eq(1).find(".search-list-item-edit-textbox").val();n=t,resetSavedSearchListItemsViewAndEdit(),toggleSavedSearchRename($(this).attr("data-id"),$(this).parent())}),$(".search-list-item-rename-cancel-btn").on("click",function(e){e.preventDefault(),toggleSavedSearchRename($(this).attr("data-id"),$(this).parents().eq(2));var t=$(this).parents().eq(3).find(".search-list-item-edit-textbox");t.val()!==n&&t.val(n)}),$(".search-list-item-delete-link").on("click",function(e){e.preventDefault();var t=$(this).parents().eq(1),n=$(".saved-searches-list");if(deleteSolrSearchInfo($(this).attr("data-usersearchid"),$(this).attr("data-useralertid"))){if(resetActiveSavedSearch(),t.remove(),0<n.children().length){var i=1;$(".search-list-item-view .search-list-item-view-index").each(function(){$(this).text(i+". "),i++}),i=1,$(".search-list-item-edit .search-list-item-edit-index").each(function(){$(this).text(i+". "),i++})}else $(".saved-searches").hide(),$(".saved-searches-no-result").show();t.find(".search-list-item-link").text()===$selectedSaveSearchTxt.text()&&($selectedSaveSearch.hide(),$selectedSaveSearchTxt.text(""),$saveSearchLink.show());var a=$(".saved-search-status .saved-search-number");0<a.length&&a.each(function(){var e=Number($(this).text())-1;$(this).text(e)})}}),$(".search-list-item-rename-btn").on("click",function(e){e.preventDefault();var t=$(this).parents().eq(3);updateSolrSearchInfo(t.find(".search-list-item-edit-textbox").val(),$(this).attr("data-usersearchid"),t)}),$(".search-list-item-link").on("click",function(e){SCM.SiteJS.saveDomainCookie(activeSavedSearchCookieName,$(this).text(),document.domain);var t="";t=App.isLearningSearchResults?"persistentLearningSearchFilters":"persistentSearchFilters",SCM.SiteJS.saveDomainCookie(t,"",document.domain)}),$(".search-alert #subscribe").click(function(){updateUserSearchAlert($(this).parent())}))}function updateUserSearchAlert($parentElement){var ajaxUrl="/Solr/UpdateUserAlert",dataObj={userSearchId:$parentElement.attr("data-usersearchid"),userAlertId:$parentElement.attr("data-useralertid"),scheduleId:$parentElement.attr("data-scheduleid")};$.ajax({url:ajaxUrl,type:"POST",dataType:"JSON",cache:!1,data:dataObj,success:function(e){if(null!=e&&e.Success){var t=$parentElement.find(".search-alert-subscribe-txt"),n=$parentElement.parent().find(".search-list-item-delete-link");"0"!==e.ReturnId?(t.text("Subscribed"),$parentElement.attr("data-useralertid",e.ReturnId),$parentElement.attr("data-scheduleid",0),n.attr("data-useralertid",e.ReturnId)):(t.text("Get Alerts"),$parentElement.attr("data-useralertid",0),$parentElement.attr("data-scheduleid",App.SavedSearchUserAlert.defaults.savedSearchAlertScheduleId),n.attr("data-useralertid",0))}},error:function(xmlHttpRequest,textStatus,errorThrown){if(window.console){var err=eval("("+xmlHttpRequest.responseText+")");console.log("error: "+err),console.log("status: "+textStatus)}}})}SolrSearch.init=function(){(App=App||{}).LearningSearchResults=App.LearningSearchResults||{};var n="";bindUiEvents(),bindPaginationEvents(),bindSaveSearchEvents(),moveStartLearningButton($(".learning--pagination")),$body.on("click",".sriTopiclink",function(e){var t=(queryText=$(this).text()).replace(",","");doSolrSearch(t,""===(n=hfSolrJournalID.val())||null===n?null:n),e.preventDefault()}),startLearningButtonEvents();var e=SCM.SiteJS.getCookie(activeSavedSearchCookieName);""!==e&&displaySelectedSavedSearch(e),$(document).ajaxComplete(function(){bindSaveSearchEvents()})}}(SCM.SolrSearch=SCM.SolrSearch||{},jQuery),function(e){"use strict";e.Placeholders={Utils:{addEventListener:function(e,t,n){return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):void 0},inArray:function(e,t){var n,i;for(n=0,i=e.length;n<i;n++)if(e[n]===t)return!0;return!1},moveCaret:function(e,t){var n;e.createTextRange?((n=e.createTextRange()).move("character",t),n.select()):e.selectionStart&&(e.focus(),e.setSelectionRange(t,t))},changeType:function(e,t){try{return e.type=t,!0}catch(e){return!1}}}}}(this),function(e){"use strict";function t(){}function o(){try{return document.activeElement}catch(e){}}function l(e,t){var n,i,a=!!t&&e.value!==t,r=e.value===e.getAttribute(k);return!(!a&&!r||"true"!==e.getAttribute(I))&&(e.removeAttribute(I),e.value=e.value.replace(e.getAttribute(k),""),e.className=e.className.replace(x,""),i=e.getAttribute(_),0<=parseInt(i,10)&&(e.setAttribute("maxLength",i),e.removeAttribute(_)),(n=e.getAttribute($))&&(e.type=n),!0)}function c(e){var t=e.getAttribute(k);return!(""!==e.value||!t)&&(e.setAttribute(I,"true"),e.value=t,e.className+=" "+w,e.getAttribute(_)||(e.setAttribute(_,e.maxLength),e.removeAttribute("maxLength")),e.getAttribute($)?e.type="text":"password"===e.type&&P.changeType(e,"text")&&e.setAttribute($,"password"),!0)}function n(e,t){var n,i,a,r,s;if(e&&e.getAttribute(k))t(e);else for(i=e?e.getElementsByTagName("input"):d,a=e?e.getElementsByTagName("textarea"):p,s=0,r=(n=i?i.length:0)+(a?a.length:0);s<r;s++)t(s<n?i[s]:a[s-n])}function u(e){n(e,l)}function i(e){var t,n,i,a,r,s;e.form&&("string"==typeof(v=e.form)&&(v=document.getElementById(v)),v.getAttribute(T)||(P.addEventListener(v,"submit",(s=v,function(){u(s)})),v.setAttribute(T,"true"))),P.addEventListener(e,"focus",(r=e,function(){h&&r.value===r.getAttribute(k)&&"true"===r.getAttribute(I)?P.moveCaret(r,0):l(r)})),P.addEventListener(e,"blur",(a=e,function(){c(a)})),h&&(P.addEventListener(e,"keydown",(i=e,function(e){return m=i.value,"true"===i.getAttribute(I)&&m===i.getAttribute(k)&&P.inArray(b,e.keyCode)?(e.preventDefault&&e.preventDefault(),!1):void 0})),P.addEventListener(e,"keyup",(n=e,function(){l(n,m),""===n.value&&(n.blur(),P.moveCaret(n,0))})),P.addEventListener(e,"click",(t=e,function(){t===o()&&t.value===t.getAttribute(k)&&"true"===t.getAttribute(I)&&P.moveCaret(t,0)}))),e.setAttribute(D,"true"),e.setAttribute(k,f),(h||e!==o())&&c(e)}var d,p,h,a,m,r,s,f,g,v,S,y,C,A=["text","search","url","tel","email","password","number","textarea"],b=[27,33,34,35,36,37,38,39,40,8,46],w="placeholdersjs",x=RegExp("(?:^|\\s)"+w+"(?!\\S)"),k="data-placeholder-value",I="data-placeholder-active",$="data-placeholder-type",T="data-placeholder-submit",D="data-placeholder-bound",_="data-placeholder-maxlength",F=document.createElement("input"),M=document.getElementsByTagName("head")[0],L=document.documentElement,E=e.Placeholders,P=E.Utils;if(E.nativeSupport=void 0!==F.placeholder,!E.nativeSupport){for(d=document.getElementsByTagName("input"),p=document.getElementsByTagName("textarea"),h="false"===L.getAttribute("data-placeholder-focus"),a="false"!==L.getAttribute("data-placeholder-live"),(r=document.createElement("style")).type="text/css",s=document.createTextNode("."+w+" { color:#ccc; }"),r.styleSheet?r.styleSheet.cssText=s.nodeValue:r.appendChild(s),M.insertBefore(r,M.firstChild),C=0,y=d.length+p.length;C<y;C++)S=d.length>C?d[C]:p[C-d.length],(f=S.attributes.placeholder)&&((f=f.nodeValue)&&P.inArray(A,S.type)&&i(S));g=setInterval(function(){for(C=0,y=d.length+p.length;C<y;C++)S=d.length>C?d[C]:p[C-d.length],(f=S.attributes.placeholder)?(f=f.nodeValue)&&P.inArray(A,S.type)&&(S.getAttribute(D)||i(S),(f!==S.getAttribute(k)||"password"===S.type&&!S.getAttribute($))&&("password"===S.type&&!S.getAttribute($)&&P.changeType(S,"text")&&S.setAttribute($,"password"),S.value===S.getAttribute(k)&&(S.value=f),S.setAttribute(k,f))):S.getAttribute(I)&&(l(S),S.removeAttribute(k));a||clearInterval(g)},100)}P.addEventListener(e,"beforeunload",function(){E.disable()}),E.disable=E.nativeSupport?t:u,E.enable=E.nativeSupport?t:function(e){n(e,c)}}(this),function(e){function i(e,t){var n;t=t||{},this._id=i._generateUUID(),this._promise=t.promise||Promise,this._frameId=t.frameId||"CrossStorageClient-"+this._id,this._origin=i._getOrigin(e),this._requests={},this._connected=!1,this._closed=!1,this._count=0,this._timeout=t.timeout||15e3,this._listener=null,this._installListener(),t.frameId&&(n=document.getElementById(t.frameId)),n&&this._poll(),n=n||this._createFrame(e),this._hub=n.contentWindow}i.frameStyle={display:"none",position:"absolute",top:"-999px",left:"-999px"},i._getOrigin=function(e){var t;return(t=document.createElement("a")).href=e,t.host||(t=window.location),((t.protocol&&":"!==t.protocol?t.protocol:window.location.protocol)+"//"+t.host).replace(/:80$|:443$/,"")},i._generateUUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},i.prototype.onConnect=function(){var i=this;return this._connected?this._promise.resolve():this._closed?this._promise.reject(new Error("CrossStorageClient has closed")):(this._requests.connect||(this._requests.connect=[]),new this._promise(function(t,n){i._requests.connect.push(function(e){if(clearTimeout(setTimeout(function(){n(new Error("CrossStorageClient could not connect"))},i._timeout)),e)return n(e);t()})}))},i.prototype.set=function(e,t){return this._request("set",{key:e,value:t})},i.prototype.get=function(e){var t=Array.prototype.slice.call(arguments);return this._request("get",{keys:t})},i.prototype.del=function(){var e=Array.prototype.slice.call(arguments);return this._request("del",{keys:e})},i.prototype.clear=function(){return this._request("clear")},i.prototype.getKeys=function(){return this._request("getKeys")},i.prototype.close=function(){var e=document.getElementById(this._frameId);e&&e.parentNode.removeChild(e),window.removeEventListener?window.removeEventListener("message",this._listener,!1):window.detachEvent("onmessage",this._listener),this._connected=!1,this._closed=!0},i.prototype._installListener=function(){var a=this;this._listener=function(e){var t,n,i;if(!a._closed&&e.data&&"string"==typeof e.data&&("null"===e.origin?"file://":e.origin)===a._origin)if("cross-storage:unavailable"!==e.data){if(-1!==e.data.indexOf("cross-storage:")&&!a._connected){if(a._connected=!0,!a._requests.connect)return;for(t=0;t<a._requests.connect.length;t++)a._requests.connect[t](n);delete a._requests.connect}if("cross-storage:ready"!==e.data){try{i=JSON.parse(e.data)}catch(e){return}i.id&&a._requests[i.id]&&a._requests[i.id](i.error,i.result)}}else{if(a._closed||a.close(),!a._requests.connect)return;for(n=new Error("Closing client. Could not access localStorage in hub."),t=0;t<a._requests.connect.length;t++)a._requests.connect[t](n)}},window.addEventListener?window.addEventListener("message",this._listener,!1):window.attachEvent("onmessage",this._listener)},i.prototype._poll=function(){var e,t,n;n="file://"===(e=this)._origin?"*":e._origin,t=setInterval(function(){if(e._connected)return clearInterval(t);e._hub&&e._hub.postMessage("cross-storage:poll",n)},1e3)},i.prototype._createFrame=function(e){var t,n;for(n in(t=window.document.createElement("iframe")).id=this._frameId,i.frameStyle)i.frameStyle.hasOwnProperty(n)&&(t.style[n]=i.frameStyle[n]);return window.document.body.appendChild(t),t.src=e,t},i.prototype._request=function(e,t){var a,r;return this._closed?this._promise.reject(new Error("CrossStorageClient has closed")):((r=this)._count++,a={id:this._id+":"+r._count,method:"cross-storage:"+e,params:t},new this._promise(function(n,i){var e,t;r._requests[a.id]=function(e,t){if(clearTimeout(setTimeout(function(){r._requests[a.id]&&(delete r._requests[a.id],i(new Error("Timeout: could not perform "+a.method)))},r._timeout)),delete r._requests[a.id],e)return i(new Error(e));n(t)},Array.prototype.toJSON&&(e=Array.prototype.toJSON,Array.prototype.toJSON=null),t="file://"===r._origin?"*":r._origin,r._hub.postMessage(JSON.stringify(a),t),e&&(Array.prototype.toJSON=e)}))},"undefined"!=typeof module&&module.exports?module.exports=i:"undefined"!=typeof exports?exports.CrossStorageClient=i:"function"==typeof define&&define.amd?define([],function(){return i}):e.CrossStorageClient=i}(this);var SCM=SCM||{};SCM.Utilities=SCM.Utilities||{},SCM.Utilities.LocalStorage=function(){"use strict";var s="SCM",i=window.localStorage,a=[],r=[];return{getItem:function(e,t){var n=(t=t||i).getItem(s+"."+e);return JSON.parse(n)},setItem:function(e,t,n){(n=n||i).setItem(s+"."+e,JSON.stringify(t))},removeItem:function(e,t){(t=t||i).removeItem(s+"."+e)},getItemCrossDomainNoCache:o,getItemCrossDomain:function(e,t){var n=l(t)+"."+e;if(void 0===CrossStorageClient)console.error("CrossStorageClient library is not available.  Falling back to localStorage");else{var i=t+"::"+e;-1===a.indexOf(i)&&(a.push(i),o(e,t).then(function(e){e&&SCM.Utilities.LocalStorage.setItem(n,e)}).catch(function(e){console.error("Failed to retrieve from cross-domain localStorage"),console.error(e)}))}return SCM.Utilities.LocalStorage.getItem(n)},setItemCrossDomain:function(e,t,n){var i,a=l(n)+"."+e;if(void 0===CrossStorageClient)console.error("CrossStorageClient library is not available.  Falling back to localStorage"),i=Promise.reject("CrossStorageClient library is not available");else{var r=c(n);(i=r.onConnect().then(function(){return r.set(s+"."+e,JSON.stringify(t))})).then(function(){SCM.Utilities.LocalStorage.setItem(a,t)}).catch(function(e){console.error("Failed to retrieve / set cross-domain localStorage"),console.error(e)})}return i},removeItemCrossDomain:function(e,t){if(void 0===CrossStorageClient)console.error("CrossStorageClient library is not available.  Falling back to localStorage");else{var n=c(t);n.onConnect().then(function(){return n.del(s+"."+e)}).catch(function(e){console.error("Failed to save to cross-domain localStorage"),console.error(e)})}SCM.Utilities.LocalStorage.removeItem(l(t)+"."+e)}};function o(t,e){var n;l(e);if(void 0===CrossStorageClient)console.error("CrossStorageClient library is not available."),n=Promise.reject("CrossStorageClient library is not available");else{var i=c(e);n=i.onConnect().then(function(e){return i.get(s+"."+t)}).then(function(e){return JSON.parse(e)}).catch(function(e){throw console.error("Failed to retrieve from cross-domain localStorage (nocache)"),console.error(e),e})}return n}function l(e){return $("<a>",{href:e}).prop("hostname")}function c(e){for(var t=0;t<r.length;t++)if(r[t].hubUrl===e)return r[t].storage;var n=new CrossStorageClient(e,{timeout:15e3});return r.push({hubUrl:e,storage:n}),n}}();var SCM=SCM||{};SCM.Utilities=SCM.Utilities||{},SCM.Utilities.LocalStorage=SCM.Utilities.LocalStorage||{},SCM.SharedWidgets=SCM.SharedWidgets||{},SCM.SharedWidgets.UserPersonalization=function(){var l="SharedWidgets.UserPersonalization";return{AddToLocalStorage:function(e,n){var t=$(e),i=r(),a=(i=i||{Items:[]}).Items;t.each(function(){var e=$(this).attr(n),t=JSON.parse(e);"0"!=t.id&&a.push(t)}),i.Items=c(a,200),SCM.Utilities.LocalStorage.setItem(l,i)},GetFromLocalStorage:r,AddToCrossDomainLocalStorage:function(e,t,o){$(e).each(function(){var r=$(this),s=r.attr(t);SCM.Utilities.LocalStorage.getItemCrossDomainNoCache(l,s).then(function(e){var t=e||{Items:[]},n=t.Items,i=r.attr(o),a=JSON.parse(i);"0"!=a.id&&n.push(a),t.Items=c(n,200),SCM.Utilities.LocalStorage.setItemCrossDomain(l,t,s)}).catch(function(e){console.error("Failed to get value from cross-domain storage"),console.error(e)})})},GetFromCrossDomainLocalStorage:function(e){return SCM.Utilities.LocalStorage.getItemCrossDomain(l,e)}};function r(){return SCM.Utilities.LocalStorage.getItem(l)}function c(e,t){var n=e.length-t;return 0<n&&e.splice(0,n),e}}(),jQuery(document).ready(function(e){SCM.SharedWidgets.UserPersonalization.AddToLocalStorage(".SCM-SharedWidgets-LocalStorage-UserContentAccessWrite","data-values")});var SCM=SCM||{};SCM.SharedWidgets=SCM.SharedWidgets||{},SCM.SharedWidgets.UserPersonalization=SCM.SharedWidgets.UserPersonalization||{},SCM.SharedWidgets.AsyncWidgetLoader=function(){return{LoadWidget:loadWidget};function loadWidget(elementClass,elementAttrUrl,elementAttrParams,requestType){var domItems=$(elementClass);domItems.each(function(){var domObj=$(this),dataUrl=domObj.attr(elementAttrUrl),dataParams=domObj.attr(elementAttrParams),params=buildParameters(dataParams);$.ajax({url:dataUrl,data:params,type:requestType,success:function(e){domObj.parent().replaceWith(e),"object"==typeof SCM.EventEmitter&&SCM.EventEmitter.publish(elementClass+"_LOADED")},error:function(xmlHttpRequest,textStatus,errorThrown){if(window.console){var err=eval("("+xmlHttpRequest.responseText+")");console.log("error: "+err),console.log("status: "+textStatus)}}})})}function buildParameters(e){var t,n=JSON.parse(e),i=n.parameters,a=n.dynamicParameters;return void 0!==a&&void 0!==a.localParams&&"[REPLACE_WITH_LOCAL]"===a.localParams&&(t=SCM.SharedWidgets.UserPersonalization.GetFromLocalStorage(),a.localParams=t,i.Items=JSON.stringify(t||{Items:[]})),void 0!==a&&void 0!==a.localParams&&"[REPLACE_WITH_CROSSDOMAIN_LOCAL]"===a.localParams&&void 0!==a.crossDomainUrl&&(t=SCM.SharedWidgets.UserPersonalization.GetFromCrossDomainLocalStorage(a.crossDomainUrl),a.localParams=t,i.Items=JSON.stringify(t||{Items:[]})),i}}(),jQuery(document).ready(function(e){SCM.SharedWidgets.AsyncWidgetLoader.LoadWidget(".SCM-SharedWidgets-AsyncWidgetLoader","data-url","data-params","POST")});var SCM=SCM||{},App=App||{};!function(i,a,r,e){var s="instOpenUrlKey_";i.replaceOpenUrlPlaceHolders=function(e,n){null!==n&&""!==n&&e.each(function(){var e=a(this).attr("data-targetId"),t=n.replace("{openUrlTargetId}",e);a(this).after(t),a(this).parent().show(),a(this).remove()})},i.getAndReplaceOpenUrlPlaceHolders=function(n){a.ajax({type:"POST",url:"/ThirdParty/InstitutionOpenUrlTemplate",dataType:"json",success:function(e){if(null!==e&&"undefined"!==e){var t="";1==e.DisplayOpenUrlLink&&(t=null!==e.LinkImageSource&&""!==e.LinkImageSource?" <a target='_blank' href='"+e.TargetUrl+"'><img src='"+e.LinkImageSource+"'/></a> ":" <a target='_blank' href='"+e.TargetUrl+"'> "+e.LinkImageText+" </a> "),i.replaceOpenUrlPlaceHolders(n,t),null!==r&&null!==window.sessionStorage&&void 0!==window.App.LoginUserInfo&&void 0!==window.App.LoginUserInfo.currentSessionId&&r.setItem(s+window.App.LoginUserInfo.currentSessionId,t,window.sessionStorage)}},error:function(e){}})},i.checkAndReplaceOpenUrlPlaceHolders=function(){if(void 0!==window.App.LoginUserInfo&&0<window.App.LoginUserInfo.isInstLoggedIn){var e=a('span[class="inst-open-url-holders"]');if(null!=e&&0<e.length)if(null!==r&&null!==window.sessionStorage&&void 0!==window.App.LoginUserInfo.currentSessionId){var t=r.getItem(s+window.App.LoginUserInfo.currentSessionId,window.sessionStorage);null!==t?i.replaceOpenUrlPlaceHolders(e,t):i.getAndReplaceOpenUrlPlaceHolders(e)}else i.getAndReplaceOpenUrlPlaceHolders(e)}else a('span[class="inst-open-url-holders"]').remove()},i.init=function(){i.checkAndReplaceOpenUrlPlaceHolders()}}(SCM.InstitutionOpenUrl=SCM.InstitutionOpenUrl||{},jQuery,SCM.Utilities.LocalStorage),"function"!=typeof Object.create&&(Object.create=function(e){function t(){}return t.prototype=e,new t}),function(o,l,c){var n={init:function(e,t){this.$elem=o(t),this.options=o.extend({},o.fn.owlCarousel.options,this.$elem.data(),e),this.userOptions=e,this.loadContent()},loadContent:function(){var e,i=this;"function"==typeof i.options.beforeInit&&i.options.beforeInit.apply(this,[i.$elem]),"string"==typeof i.options.jsonPath?(e=i.options.jsonPath,o.getJSON(e,function(e){var t,n="";if("function"==typeof i.options.jsonSuccess)i.options.jsonSuccess.apply(this,[e]);else{for(t in e.owl)e.owl.hasOwnProperty(t)&&(n+=e.owl[t].item);i.$elem.html(n)}i.logIn()})):i.logIn()},logIn:function(){this.$elem.data("owl-originalStyles",this.$elem.attr("style")),this.$elem.data("owl-originalClasses",this.$elem.attr("class")),this.$elem.css({opacity:0}),this.orignalItems=this.options.items,this.checkBrowser(),this.wrapperWidth=0,this.checkVisible=null,this.setVars()},setVars:function(){if(0===this.$elem.children().length)return!1;this.baseClass(),this.eventTypes(),this.$userItems=this.$elem.children(),this.itemsAmount=this.$userItems.length,this.wrapItems(),this.$owlItems=this.$elem.find(".owl-item"),this.$owlWrapper=this.$elem.find(".owl-wrapper"),this.playDirection="next",this.prevItem=0,this.prevArr=[0],this.currentItem=0,this.customEvents(),this.onStartup()},onStartup:function(){this.updateItems(),this.calculateAll(),this.buildControls(),this.updateControls(),this.response(),this.moveEvents(),this.stopOnHover(),this.owlStatus(),!1!==this.options.transitionStyle&&this.transitionTypes(this.options.transitionStyle),!0===this.options.autoPlay&&(this.options.autoPlay=5e3),this.play(),this.$elem.find(".owl-wrapper").css("display","block"),this.$elem.is(":visible")?this.$elem.css("opacity",1):this.watchVisibility(),this.onstartup=!1,this.eachMoveUpdate(),"function"==typeof this.options.afterInit&&this.options.afterInit.apply(this,[this.$elem])},eachMoveUpdate:function(){!0===this.options.lazyLoad&&this.lazyLoad(),!0===this.options.autoHeight&&this.autoHeight(),this.onVisibleItems(),"function"==typeof this.options.afterAction&&this.options.afterAction.apply(this,[this.$elem])},updateVars:function(){"function"==typeof this.options.beforeUpdate&&this.options.beforeUpdate.apply(this,[this.$elem]),this.watchVisibility(),this.updateItems(),this.calculateAll(),this.updatePosition(),this.updateControls(),this.eachMoveUpdate(),"function"==typeof this.options.afterUpdate&&this.options.afterUpdate.apply(this,[this.$elem])},reload:function(){var e=this;l.setTimeout(function(){e.updateVars()},0)},watchVisibility:function(){var e=this;if(!1!==e.$elem.is(":visible"))return!1;e.$elem.css({opacity:0}),l.clearInterval(e.autoPlayInterval),l.clearInterval(e.checkVisible),e.checkVisible=l.setInterval(function(){e.$elem.is(":visible")&&(e.reload(),e.$elem.animate({opacity:1},200),l.clearInterval(e.checkVisible))},500)},wrapItems:function(){this.$userItems.wrapAll('<div class="owl-wrapper">').wrap('<div class="owl-item"></div>'),this.$elem.find(".owl-wrapper").wrap('<div class="owl-wrapper-outer">'),this.wrapperOuter=this.$elem.find(".owl-wrapper-outer"),this.$elem.css("display","block")},baseClass:function(){var e=this.$elem.hasClass(this.options.baseClass),t=this.$elem.hasClass(this.options.theme);e||this.$elem.addClass(this.options.baseClass),t||this.$elem.addClass(this.options.theme)},updateItems:function(){var e,t;if(!1===this.options.responsive)return!1;if(!0===this.options.singleItem)return this.options.items=this.orignalItems=1,this.options.itemsCustom=!1,this.options.itemsDesktop=!1,this.options.itemsDesktopSmall=!1,this.options.itemsTablet=!1,this.options.itemsTabletSmall=!1,this.options.itemsMobile=!1;if((e=o(this.options.responsiveBaseWidth).width())>(this.options.itemsDesktop[0]||this.orignalItems)&&(this.options.items=this.orignalItems),!1!==this.options.itemsCustom)for(this.options.itemsCustom.sort(function(e,t){return e[0]-t[0]}),t=0;t<this.options.itemsCustom.length;t+=1)this.options.itemsCustom[t][0]<=e&&(this.options.items=this.options.itemsCustom[t][1]);else e<=this.options.itemsDesktop[0]&&!1!==this.options.itemsDesktop&&(this.options.items=this.options.itemsDesktop[1]),e<=this.options.itemsDesktopSmall[0]&&!1!==this.options.itemsDesktopSmall&&(this.options.items=this.options.itemsDesktopSmall[1]),e<=this.options.itemsTablet[0]&&!1!==this.options.itemsTablet&&(this.options.items=this.options.itemsTablet[1]),e<=this.options.itemsTabletSmall[0]&&!1!==this.options.itemsTabletSmall&&(this.options.items=this.options.itemsTabletSmall[1]),e<=this.options.itemsMobile[0]&&!1!==this.options.itemsMobile&&(this.options.items=this.options.itemsMobile[1]);this.options.items>this.itemsAmount&&!0===this.options.itemsScaleUp&&(this.options.items=this.itemsAmount)},response:function(){var e,t,n=this;if(!0!==n.options.responsive)return!1;t=o(l).width(),n.resizer=function(){o(l).width()!==t&&(!1!==n.options.autoPlay&&l.clearInterval(n.autoPlayInterval),l.clearTimeout(e),e=l.setTimeout(function(){t=o(l).width(),n.updateVars()},n.options.responsiveRefreshRate))},o(l).resize(n.resizer)},updatePosition:function(){this.jumpTo(this.currentItem),!1!==this.options.autoPlay&&this.checkAp()},appendItemsSizes:function(){var n=this,i=0,a=n.itemsAmount-n.options.items;n.$owlItems.each(function(e){var t=o(this);t.css({width:n.itemWidth}).data("owl-item",Number(e)),0!=e%n.options.items&&e!==a||a<e||(i+=1),t.data("owl-roundPages",i)})},appendWrapperSizes:function(){this.$owlWrapper.css({width:this.$owlItems.length*this.itemWidth*2,left:0}),this.appendItemsSizes()},calculateAll:function(){this.calculateWidth(),this.appendWrapperSizes(),this.loops(),this.max()},calculateWidth:function(){this.itemWidth=Math.round(this.$elem.width()/this.options.items)},max:function(){var e=-1*(this.itemsAmount*this.itemWidth-this.options.items*this.itemWidth);return this.options.items>this.itemsAmount?this.maximumPixels=e=this.maximumItem=0:(this.maximumItem=this.itemsAmount-this.options.items,this.maximumPixels=e),e},min:function(){return 0},loops:function(){var e,t,n=0,i=0;for(this.positionsInArray=[0],this.pagesInArray=[],e=0;e<this.itemsAmount;e+=1)i+=this.itemWidth,this.positionsInArray.push(-i),!0===this.options.scrollPerPage&&((t=(t=o(this.$owlItems[e])).data("owl-roundPages"))!==n&&(this.pagesInArray[n]=this.positionsInArray[e],n=t))},buildControls:function(){!0!==this.options.navigation&&!0!==this.options.pagination||(this.owlControls=o('<div class="owl-controls"/>').toggleClass("clickable",!this.browser.isTouch).appendTo(this.$elem)),!0===this.options.pagination&&this.buildPagination(),!0===this.options.navigation&&this.buildButtons()},buildButtons:function(){var t=this,e=o('<div class="owl-buttons"/>');t.owlControls.append(e),t.buttonPrev=o("<div/>",{class:"owl-prev",html:t.options.navigationText[0]||""}),t.buttonNext=o("<div/>",{class:"owl-next",html:t.options.navigationText[1]||""}),e.append(t.buttonPrev).append(t.buttonNext),e.on("touchstart.owlControls mousedown.owlControls",'div[class^="owl"]',function(e){e.preventDefault()}),e.on("touchend.owlControls mouseup.owlControls",'div[class^="owl"]',function(e){e.preventDefault(),o(this).hasClass("owl-next")?t.next():t.prev()})},buildPagination:function(){var t=this;t.paginationWrapper=o('<div class="owl-pagination"/>'),t.owlControls.append(t.paginationWrapper),t.paginationWrapper.on("touchend.owlControls mouseup.owlControls",".owl-page",function(e){e.preventDefault(),Number(o(this).data("owl-page"))!==t.currentItem&&t.goTo(Number(o(this).data("owl-page")),!0)})},updatePagination:function(){var e,t,n,i,a,r;if(!1===this.options.pagination)return!1;for(this.paginationWrapper.html(""),e=0,t=this.itemsAmount-this.itemsAmount%this.options.items,i=0;i<this.itemsAmount;i+=1)0==i%this.options.items&&(e+=1,t===i&&(n=this.itemsAmount-this.options.items),a=o("<div/>",{class:"owl-page"}),r=o("<span></span>",{text:!0===this.options.paginationNumbers?e:"",class:!0===this.options.paginationNumbers?"owl-numbers":""}),a.append(r),a.data("owl-page",t===i?n:i),a.data("owl-roundPages",e),this.paginationWrapper.append(a));this.checkPagination()},checkPagination:function(){var e=this;if(!1===e.options.pagination)return!1;e.paginationWrapper.find(".owl-page").each(function(){o(this).data("owl-roundPages")===o(e.$owlItems[e.currentItem]).data("owl-roundPages")&&(e.paginationWrapper.find(".owl-page").removeClass("active"),o(this).addClass("active"))})},checkNavigation:function(){if(!1===this.options.navigation)return!1;!1===this.options.rewindNav&&(0===this.currentItem&&0===this.maximumItem?(this.buttonPrev.addClass("disabled"),this.buttonNext.addClass("disabled")):0===this.currentItem&&0!==this.maximumItem?(this.buttonPrev.addClass("disabled"),this.buttonNext.removeClass("disabled")):this.currentItem===this.maximumItem?(this.buttonPrev.removeClass("disabled"),this.buttonNext.addClass("disabled")):0!==this.currentItem&&this.currentItem!==this.maximumItem&&(this.buttonPrev.removeClass("disabled"),this.buttonNext.removeClass("disabled")))},updateControls:function(){this.updatePagination(),this.checkNavigation(),this.owlControls&&(this.options.items>=this.itemsAmount?this.owlControls.hide():this.owlControls.show())},destroyControls:function(){this.owlControls&&this.owlControls.remove()},next:function(e){if(this.isTransition)return!1;if(this.currentItem+=!0===this.options.scrollPerPage?this.options.items:1,this.currentItem>this.maximumItem+(!0===this.options.scrollPerPage?this.options.items-1:0)){if(!0!==this.options.rewindNav)return this.currentItem=this.maximumItem,!1;this.currentItem=0,e="rewind"}this.goTo(this.currentItem,e)},prev:function(e){if(this.isTransition)return!1;if(this.currentItem=!0===this.options.scrollPerPage&&0<this.currentItem&&this.currentItem<this.options.items?0:this.currentItem-(!0===this.options.scrollPerPage?this.options.items:1),this.currentItem<0){if(!0!==this.options.rewindNav)return this.currentItem=0,!1;this.currentItem=this.maximumItem,e="rewind"}this.goTo(this.currentItem,e)},goTo:function(e,t,n){var i=this;return!i.isTransition&&("function"==typeof i.options.beforeMove&&i.options.beforeMove.apply(this,[i.$elem]),e>=i.maximumItem?e=i.maximumItem:e<=0&&(e=0),i.currentItem=i.owl.currentItem=e,!1!==i.options.transitionStyle&&"drag"!==n&&1===i.options.items&&!0===i.browser.support3d?(i.swapSpeed(0),!0===i.browser.support3d?i.transition3d(i.positionsInArray[e]):i.css2slide(i.positionsInArray[e],1),i.afterGo(),i.singleItemTransition(),!1):(e=i.positionsInArray[e],!0===i.browser.support3d?(!(i.isCss3Finish=!1)===t?(i.swapSpeed("paginationSpeed"),l.setTimeout(function(){i.isCss3Finish=!0},i.options.paginationSpeed)):"rewind"===t?(i.swapSpeed(i.options.rewindSpeed),l.setTimeout(function(){i.isCss3Finish=!0},i.options.rewindSpeed)):(i.swapSpeed("slideSpeed"),l.setTimeout(function(){i.isCss3Finish=!0},i.options.slideSpeed)),i.transition3d(e)):!0===t?i.css2slide(e,i.options.paginationSpeed):"rewind"===t?i.css2slide(e,i.options.rewindSpeed):i.css2slide(e,i.options.slideSpeed),void i.afterGo()))},jumpTo:function(e){"function"==typeof this.options.beforeMove&&this.options.beforeMove.apply(this,[this.$elem]),e>=this.maximumItem||-1===e?e=this.maximumItem:e<=0&&(e=0),this.swapSpeed(0),!0===this.browser.support3d?this.transition3d(this.positionsInArray[e]):this.css2slide(this.positionsInArray[e],1),this.currentItem=this.owl.currentItem=e,this.afterGo()},afterGo:function(){this.prevArr.push(this.currentItem),this.prevItem=this.owl.prevItem=this.prevArr[this.prevArr.length-2],this.prevArr.shift(0),this.prevItem!==this.currentItem&&(this.checkPagination(),this.checkNavigation(),this.eachMoveUpdate(),!1!==this.options.autoPlay&&this.checkAp()),"function"==typeof this.options.afterMove&&this.prevItem!==this.currentItem&&this.options.afterMove.apply(this,[this.$elem])},stop:function(){this.apStatus="stop",l.clearInterval(this.autoPlayInterval)},checkAp:function(){"stop"!==this.apStatus&&this.play()},play:function(){var e=this;if(!(e.apStatus="play")===e.options.autoPlay)return!1;l.clearInterval(e.autoPlayInterval),e.autoPlayInterval=l.setInterval(function(){e.next(!0)},e.options.autoPlay)},swapSpeed:function(e){"slideSpeed"===e?this.$owlWrapper.css(this.addCssSpeed(this.options.slideSpeed)):"paginationSpeed"===e?this.$owlWrapper.css(this.addCssSpeed(this.options.paginationSpeed)):"string"!=typeof e&&this.$owlWrapper.css(this.addCssSpeed(e))},addCssSpeed:function(e){return{"-webkit-transition":"all "+e+"ms ease","-moz-transition":"all "+e+"ms ease","-o-transition":"all "+e+"ms ease",transition:"all "+e+"ms ease"}},removeTransition:function(){return{"-webkit-transition":"","-moz-transition":"","-o-transition":"",transition:""}},doTranslate:function(e){return{"-webkit-transform":"translate3d("+e+"px, 0px, 0px)","-moz-transform":"translate3d("+e+"px, 0px, 0px)","-o-transform":"translate3d("+e+"px, 0px, 0px)","-ms-transform":"translate3d("+e+"px, 0px, 0px)",transform:"translate3d("+e+"px, 0px,0px)"}},transition3d:function(e){this.$owlWrapper.css(this.doTranslate(e))},css2move:function(e){this.$owlWrapper.css({left:e})},css2slide:function(e,t){var n=this;n.isCssFinish=!1,n.$owlWrapper.stop(!0,!0).animate({left:e},{duration:t||n.options.slideSpeed,complete:function(){n.isCssFinish=!0}})},checkBrowser:function(){var e=c.createElement("div");e.style.cssText="  -moz-transform:translate3d(0px, 0px, 0px); -ms-transform:translate3d(0px, 0px, 0px); -o-transform:translate3d(0px, 0px, 0px); -webkit-transform:translate3d(0px, 0px, 0px); transform:translate3d(0px, 0px, 0px)",e=e.style.cssText.match(/translate3d\(0px, 0px, 0px\)/g),this.browser={support3d:null!==e&&1===e.length,isTouch:"ontouchstart"in l||l.navigator.msMaxTouchPoints}},moveEvents:function(){!1===this.options.mouseDrag&&!1===this.options.touchDrag||(this.gestures(),this.disabledEvents())},eventTypes:function(){var e=["s","e","x"];this.ev_types={},!0===this.options.mouseDrag&&!0===this.options.touchDrag?e=["touchstart.owl mousedown.owl","touchmove.owl mousemove.owl","touchend.owl touchcancel.owl mouseup.owl"]:!1===this.options.mouseDrag&&!0===this.options.touchDrag?e=["touchstart.owl","touchmove.owl","touchend.owl touchcancel.owl"]:!0===this.options.mouseDrag&&!1===this.options.touchDrag&&(e=["mousedown.owl","mousemove.owl","mouseup.owl"]),this.ev_types.start=e[0],this.ev_types.move=e[1],this.ev_types.end=e[2]},disabledEvents:function(){this.$elem.on("dragstart.owl",function(e){e.preventDefault()}),this.$elem.on("mousedown.disableTextSelect",function(e){return o(e.target).is("input, textarea, select, option")})},gestures:function(){function n(e){if(void 0!==e.touches)return{x:e.touches[0].pageX,y:e.touches[0].pageY};if(void 0===e.touches){if(void 0!==e.pageX)return{x:e.pageX,y:e.pageY};if(void 0===e.pageX)return{x:e.clientX,y:e.clientY}}}function i(e){"on"===e?(o(c).on(r.ev_types.move,t),o(c).on(r.ev_types.end,a)):"off"===e&&(o(c).off(r.ev_types.move),o(c).off(r.ev_types.end))}function t(e){e=e.originalEvent||e||l.event,r.newPosX=n(e).x-s.offsetX,r.newPosY=n(e).y-s.offsetY,r.newRelativeX=r.newPosX-s.relativePos,"function"==typeof r.options.startDragging&&!0!==s.dragging&&0!==r.newRelativeX&&(s.dragging=!0,r.options.startDragging.apply(r,[r.$elem])),(8<r.newRelativeX||r.newRelativeX<-8)&&!0===r.browser.isTouch&&(void 0!==e.preventDefault?e.preventDefault():e.returnValue=!1,s.sliding=!0),(10<r.newPosY||r.newPosY<-10)&&!1===s.sliding&&o(c).off("touchmove.owl"),r.newPosX=Math.max(Math.min(r.newPosX,r.newRelativeX/5),r.maximumPixels+r.newRelativeX/5),!0===r.browser.support3d?r.transition3d(r.newPosX):r.css2move(r.newPosX)}function a(e){var t;(e=e.originalEvent||e||l.event).target=e.target||e.srcElement,!(s.dragging=!1)!==r.browser.isTouch&&r.$owlWrapper.removeClass("grabbing"),r.dragDirection=r.newRelativeX<0?r.owl.dragDirection="left":r.owl.dragDirection="right",0!==r.newRelativeX&&(t=r.getNewPosition(),r.goTo(t,!1,"drag"),s.targetElement===e.target&&!0!==r.browser.isTouch&&(o(e.target).on("click.disable",function(e){e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),o(e.target).off("click.disable")}),t=(e=o._data(e.target,"events").click).pop(),e.splice(0,0,t))),i("off")}var r=this,s={offsetX:0,offsetY:0,baseElWidth:0,relativePos:0,position:null,minSwipe:null,maxSwipe:null,sliding:null,dargging:null,targetElement:null};r.isCssFinish=!0,r.$elem.on(r.ev_types.start,".owl-wrapper",function(e){var t;if(3===(e=e.originalEvent||e||l.event).which)return!1;if(!(r.itemsAmount<=r.options.items)){if(!1===r.isCssFinish&&!r.options.dragBeforeAnimFinish||!1===r.isCss3Finish&&!r.options.dragBeforeAnimFinish)return!1;!1!==r.options.autoPlay&&l.clearInterval(r.autoPlayInterval),!0===r.browser.isTouch||r.$owlWrapper.hasClass("grabbing")||r.$owlWrapper.addClass("grabbing"),r.newPosX=0,r.newRelativeX=0,o(this).css(r.removeTransition()),t=o(this).position(),s.relativePos=t.left,s.offsetX=n(e).x-t.left,s.offsetY=n(e).y-t.top,i("on"),s.sliding=!1,s.targetElement=e.target||e.srcElement}})},getNewPosition:function(){var e=this.closestItem();return e>this.maximumItem?e=this.currentItem=this.maximumItem:0<=this.newPosX&&(this.currentItem=e=0),e},closestItem:function(){var n=this,i=!0===n.options.scrollPerPage?n.pagesInArray:n.positionsInArray,a=n.newPosX,r=null;return o.each(i,function(e,t){a-n.itemWidth/20>i[e+1]&&a-n.itemWidth/20<t&&"left"===n.moveDirection()?(r=t,n.currentItem=!0===n.options.scrollPerPage?o.inArray(r,n.positionsInArray):e):a+n.itemWidth/20<t&&a+n.itemWidth/20>(i[e+1]||i[e]-n.itemWidth)&&"right"===n.moveDirection()&&(!0===n.options.scrollPerPage?(r=i[e+1]||i[i.length-1],n.currentItem=o.inArray(r,n.positionsInArray)):(r=i[e+1],n.currentItem=e+1))}),n.currentItem},moveDirection:function(){var e;return this.newRelativeX<0?(e="right",this.playDirection="next"):(e="left",this.playDirection="prev"),e},customEvents:function(){var n=this;n.$elem.on("owl.next",function(){n.next()}),n.$elem.on("owl.prev",function(){n.prev()}),n.$elem.on("owl.play",function(e,t){n.options.autoPlay=t,n.play(),n.hoverStatus="play"}),n.$elem.on("owl.stop",function(){n.stop(),n.hoverStatus="stop"}),n.$elem.on("owl.goTo",function(e,t){n.goTo(t)}),n.$elem.on("owl.jumpTo",function(e,t){n.jumpTo(t)})},stopOnHover:function(){var e=this;!0===e.options.stopOnHover&&!0!==e.browser.isTouch&&!1!==e.options.autoPlay&&(e.$elem.on("mouseover",function(){e.stop()}),e.$elem.on("mouseout",function(){"stop"!==e.hoverStatus&&e.play()}))},lazyLoad:function(){var e,t,n,i;if(!1===this.options.lazyLoad)return!1;for(e=0;e<this.itemsAmount;e+=1)"loaded"!==(t=o(this.$owlItems[e])).data("owl-loaded")&&(n=t.data("owl-item"),"string"!=typeof(i=t.find(".lazyOwl")).data("src")?t.data("owl-loaded","loaded"):(void 0===t.data("owl-loaded")&&(i.hide(),t.addClass("loading").data("owl-loaded","checked")),(!0!==this.options.lazyFollow||n>=this.currentItem)&&n<this.currentItem+this.options.items&&i.length&&this.lazyPreload(t,i)))},lazyPreload:function(e,t){function n(){e.data("owl-loaded","loaded").removeClass("loading"),t.removeAttr("data-src"),"fade"===a.options.lazyEffect?t.fadeIn(400):t.show(),"function"==typeof a.options.afterLazyLoad&&a.options.afterLazyLoad.apply(this,[a.$elem])}var i,a=this,r=0;"DIV"===t.prop("tagName")?(t.css("background-image","url("+t.data("src")+")"),i=!0):t[0].src=t.data("src"),function e(){r+=1,a.completeImg(t.get(0))||!0===i?n():r<=100?l.setTimeout(e,100):n()}()},autoHeight:function(){function t(){var e=o(i.$owlItems[i.currentItem]).height();i.wrapperOuter.css("height",e+"px"),i.wrapperOuter.hasClass("autoHeight")||l.setTimeout(function(){i.wrapperOuter.addClass("autoHeight")},0)}var n,i=this,a=o(i.$owlItems[i.currentItem]).find("img");void 0!==a.get(0)?(n=0,function e(){n+=1,i.completeImg(a.get(0))?t():n<=100?l.setTimeout(e,100):i.wrapperOuter.css("height","")}()):t()},completeImg:function(e){return!(!e.complete||void 0!==e.naturalWidth&&0===e.naturalWidth)},onVisibleItems:function(){var e;for(!0===this.options.addClassActive&&this.$owlItems.removeClass("active"),this.visibleItems=[],e=this.currentItem;e<this.currentItem+this.options.items;e+=1)this.visibleItems.push(e),!0===this.options.addClassActive&&o(this.$owlItems[e]).addClass("active");this.owl.visibleItems=this.visibleItems},transitionTypes:function(e){this.outClass="owl-"+e+"-out",this.inClass="owl-"+e+"-in"},singleItemTransition:function(){var e=this,t=e.outClass,n=e.inClass,i=e.$owlItems.eq(e.currentItem),a=e.$owlItems.eq(e.prevItem),r=Math.abs(e.positionsInArray[e.currentItem])+e.positionsInArray[e.prevItem],s=Math.abs(e.positionsInArray[e.currentItem])+e.itemWidth/2;e.isTransition=!0,e.$owlWrapper.addClass("owl-origin").css({"-webkit-transform-origin":s+"px","-moz-perspective-origin":s+"px","perspective-origin":s+"px"}),a.css({position:"relative",left:r+"px"}).addClass(t).on("webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend",function(){e.endPrev=!0,a.off("webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend"),e.clearTransStyle(a,t)}),i.addClass(n).on("webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend",function(){e.endCurrent=!0,i.off("webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend"),e.clearTransStyle(i,n)})},clearTransStyle:function(e,t){e.css({position:"",left:""}).removeClass(t),this.endPrev&&this.endCurrent&&(this.$owlWrapper.removeClass("owl-origin"),this.isTransition=this.endCurrent=this.endPrev=!1)},owlStatus:function(){this.owl={userOptions:this.userOptions,baseElement:this.$elem,userItems:this.$userItems,owlItems:this.$owlItems,currentItem:this.currentItem,prevItem:this.prevItem,visibleItems:this.visibleItems,isTouch:this.browser.isTouch,browser:this.browser,dragDirection:this.dragDirection}},clearEvents:function(){this.$elem.off(".owl owl mousedown.disableTextSelect"),o(c).off(".owl owl"),o(l).off("resize",this.resizer)},unWrap:function(){0!==this.$elem.children().length&&(this.$owlWrapper.unwrap(),this.$userItems.unwrap().unwrap(),this.owlControls&&this.owlControls.remove()),this.clearEvents(),this.$elem.attr("style",this.$elem.data("owl-originalStyles")||"").attr("class",this.$elem.data("owl-originalClasses"))},destroy:function(){this.stop(),l.clearInterval(this.checkVisible),this.unWrap(),this.$elem.removeData()},reinit:function(e){e=o.extend({},this.userOptions,e),this.unWrap(),this.init(e,this.$elem)},addItem:function(e,t){var n;return!!e&&(0===this.$elem.children().length?(this.$elem.append(e),this.setVars(),!1):(this.unWrap(),(n=void 0===t||-1===t?-1:t)>=this.$userItems.length||-1===n?this.$userItems.eq(-1).after(e):this.$userItems.eq(n).before(e),void this.setVars()))},removeItem:function(e){if(0===this.$elem.children().length)return!1;e=void 0===e||-1===e?-1:e,this.unWrap(),this.$userItems.eq(e).remove(),this.setVars()}};o.fn.owlCarousel=function(t){return this.each(function(){if(!0===o(this).data("owl-init"))return!1;o(this).data("owl-init",!0);var e=Object.create(n);e.init(t,this),o.data(this,"owlCarousel",e)})},o.fn.owlCarousel.options={items:5,itemsCustom:!1,itemsDesktop:[1199,4],itemsDesktopSmall:[979,3],itemsTablet:[768,2],itemsTabletSmall:!1,itemsMobile:[479,1],singleItem:!1,itemsScaleUp:!1,slideSpeed:200,paginationSpeed:800,rewindSpeed:1e3,autoPlay:!1,stopOnHover:!1,navigation:!1,navigationText:["prev","next"],rewindNav:!0,scrollPerPage:!1,pagination:!0,paginationNumbers:!1,responsive:!0,responsiveRefreshRate:200,responsiveBaseWidth:l,baseClass:"owl-carousel",theme:"owl-theme",lazyLoad:!1,lazyFollow:!0,lazyEffect:"fade",autoHeight:!1,jsonPath:!1,jsonSuccess:!1,dragBeforeAnimFinish:!0,mouseDrag:!0,touchDrag:!0,addClassActive:!1,transitionStyle:!1,beforeUpdate:!1,afterUpdate:!1,beforeInit:!1,afterInit:!1,beforeMove:!1,afterMove:!1,afterAction:!1,startDragging:!1,afterLazyLoad:!1}}(jQuery,window,document),function(){var _,F;_=this.jQuery||window.jQuery,F=_(window),_.fn.stick_in_parent=function(e){var w,t,x,n,i,k,a,I,$,r,T,D;for(null==e&&(e={}),D=e.sticky_class,k=e.inner_scrolling,T=e.recalc_every,r=e.parent,$=e.offset_top,I=e.spacer,x=e.bottoming,null==$&&($=0),null==r&&(r=void 0),null==k&&(k=!0),null==D&&(D="is_stuck"),w=_(document),null==x&&(x=!0),n=function(s,o,l,c,u,d,p,h){var m,e,f,g,v,S,y,C,t,A,b,i;if(!s.data("sticky_kit")){if(s.data("sticky_kit",!0),v=w.height(),y=s.parent(),null!=r&&(y=y.closest(r)),!y.length)throw"failed to find stick parent";if(m=f=!1,(b=null!=I?I&&s.closest(I):_("<div />"))&&b.css("position",s.css("position")),(C=function(){var e,t,n;if(!h)return v=w.height(),e=parseInt(y.css("border-top-width"),10),t=parseInt(y.css("padding-top"),10),o=parseInt(y.css("padding-bottom"),10),l=y.offset().top+e+t,c=y.height(),f&&(m=f=!1,null==I&&(s.insertAfter(b),b.detach()),s.css({position:"",top:"",width:"",bottom:""}).removeClass(D),n=!0),u=s.offset().top-(parseInt(s.css("margin-top"),10)||0)-$,d=s.outerHeight(!0),p=s.css("float"),b&&b.css({width:s.outerWidth(!0),height:d,display:s.css("display"),"vertical-align":s.css("vertical-align"),float:p}),n?i():void 0})(),d!==c)return g=void 0,S=$,A=T,i=function(){var e,t,n,i,a,r;if(!h)return n=!1,null!=A&&(A-=1)<=0&&(A=T,C(),n=!0),n||w.height()===v||(C(),n=!0),i=F.scrollTop(),null!=g&&(t=i-g),g=i,f?(x&&(a=c+l<i+d+S,m&&!a&&(m=!1,s.css({position:"fixed",bottom:"",top:S}).trigger("sticky_kit:unbottom"))),i<u&&(f=!1,S=$,null==I&&("left"!==p&&"right"!==p||s.insertAfter(b),b.detach()),e={position:"",width:"",top:""},s.css(e).removeClass(D).trigger("sticky_kit:unstick")),k&&(r=F.height())<d+$&&(m||(S-=t,S=Math.max(r-d,S),S=Math.min($,S),f&&s.css({top:S+"px"})))):u<i&&(f=!0,(e={position:"fixed",top:S}).width="border-box"===s.css("box-sizing")?s.outerWidth()+"px":s.width()+"px",s.css(e).addClass(D),null==I&&(s.after(b),"left"!==p&&"right"!==p||b.append(s)),s.trigger("sticky_kit:stick")),f&&x&&(null==a&&(a=c+l<i+d+S),!m&&a)?(m=!0,"static"===y.css("position")&&y.css({position:"relative"}),s.css({position:"absolute",bottom:o,top:"auto"}).trigger("sticky_kit:bottom")):void 0},t=function(){return C(),i()},e=function(){if(h=!0,F.off("touchmove",i),F.off("scroll",i),F.off("resize",t),_(document.body).off("sticky_kit:recalc",t),s.off("sticky_kit:detach",e),s.removeData("sticky_kit"),s.css({position:"",bottom:"",top:"",width:""}),y.position("position",""),f)return null==I&&("left"!==p&&"right"!==p||s.insertAfter(b),b.remove()),s.removeClass(D)},F.on("touchmove",i),F.on("scroll",i),F.on("resize",t),_(document.body).on("sticky_kit:recalc",t),s.on("sticky_kit:detach",e),setTimeout(i,0)}},i=0,a=this.length;i<a;i++)t=this[i],n(_(t));return this}}.call(this);var SCM=SCM||{};SCM.ClientStatsMaster=function(r,e){function a(e,t){this.ActionFilterKey=e,this.ActionFilterValue=t}function s(e,t,n){this.SessionID=e,this.ClientID=t,this.SiteID=n}function o(e,t,n,i){this.UserSessionItem=new s("",0,r("#hdnSiteID").val()),this.ActionFilterType=new a(e,t),this.ActionDescription=n,this.ActionURL=i}function i(e,t,n,i){var a=new o(e,t,n,i).toJson();r.ajax({type:"POST",url:"/ClientTrackingHandler.ashx",data:a,contentType:"application/json; charset=utf-8",async:!0,processData:!0}).fail(function(e,t){window.console&&(console.log("jqXhr.responseText: "+e.responseText),console.log("status: "+t))})}return o.prototype.toJson=function(){return JSON.stringify(this)},{trackContentTabEvents:function(){var e=r(".tab-nav");e.on("click",".tab-nav-trigger",function(){var e=r(this).children(":first")[0],t=e.innerText.trim();t||(t=e.textContent.trim()),i(3,"Tabs",t+=" was clicked",window.location.href)}),(e=r(".tabs--link-container")).on("click","a.tabs--link",function(){var e=r(this).children("span:first")[0],t=e.innerText.trim();t||(t=e.textContent.trim()),i(3,"Tabs",t+=" was clicked",window.location.href)})},trackJumpLinkEvents:function(){r(".section-jump-links, .meta-author").on("click",".section-jump-link",function(){var e=r(this)[0].innerText.trim();e||(e=r(this)[0].textContent.trim()),i(3,e,e+" was clicked",window.location.href)})},trackCrossReferenceLinkEvents:function(){r(".reference-content").on("click",".pubmed-link, .crossref-doi",function(){var e=r(this)[0].innerText.trim();e||(e=r(this)[0].textContent.trim()),i(3,"CrossReferenceLink",e+=" was clicked",window.location.href)})},trackToolBoxEvents:function(){var e=r(".toolbar, .abstract-toolbar, .magazine-toolbar, .article-content");e.on("click","a.toolbar-tool",function(){var e=r(this).text().trim();i(3,"ToolBox",e+=" was clicked",window.location.href)}),e.on("click","a.toolbar-share",function(){i(3,"Share",r(this).text().trim(),window.location.href)})},trackAudioPlayAction:function(){r("audio.mp--audio-player").on("play",function(){i(3,"mediaPlayer","audio play/pause was clicked",window.location.href)})},trackPdfTurnAwayAction:function(e,t){if(e){i(8,"DirectPdfAccess","PDF is clicked for ArticleID = "+e,"http://"+function(e){var t=e.match(/\/data\/journals\/(\w+)\//i),n="";if(t){var i=t[1].toLowerCase();switch(i){case"jama":case"cardiology":case"oncology":n=i;break;case"derm":case"faci":case"neur":case"otol":case"surg":n="arch"+i;break;case"intemed":n="archinte";break;case"neurpsych":n="archneurpsyc";break;case"ophth":n="archopht";break;case"peds":n="archpedi";break;case"psych":n="archpsyc";break;default:n=i}}var a=window.location.hostname;return n&&(a=n+"."+a),a}(t)+"/pdfaccess.ashx?resouceid="+e+"&PDFSource=24")}},trackSingleAction:function(e,t,n){e.on("click",function(){i(3,t,n,window.location.href)})},trackGdprCookieAcceptance:function(e,t,n){i(e,t,n,window.location.href)}}}(jQuery),$(window).load(function(){SCM.ClientStatsMaster.trackContentTabEvents(),SCM.ClientStatsMaster.trackCrossReferenceLinkEvents(),SCM.ClientStatsMaster.trackJumpLinkEvents(),SCM.ClientStatsMaster.trackToolBoxEvents(),SCM.ClientStatsMaster.trackAudioPlayAction(),SCM.ClientStatsMaster.trackSingleAction($("a.view-large.figure-table-link"),"View Large","View Large was clicked"),SCM.ClientStatsMaster.trackSingleAction($("a.full-text-link"),"Fulltext Button","Fulltext button was clicked from abstract page")});var App=App||{};!function(e,n){e.init=function(){var e,t;App.isAnyArticle&&((t=n(".meta-authors--etal")).click(function(){var e=n(".meta-authors--remaining");t.hide(),e.addClass("accessible-show")}),e=n(".meta-articleinfo-jumplink"),n(e.attr("href")).length&&e.addClass("target-exists"),n(".article-full-text .para i+a").each(function(){this.previousSibling.nodeValue||n(this.previousSibling).append(" ")}))}}(App.ArticleTopInfo=App.ArticleTopInfo||{},jQuery);var SCM=SCM||{};!function(e,t,n){e.autoReveal=function(){e.referredFromGoogle&&e.fromRedirectSite&&t("#divFirstPagePreview").foundation("reveal","open")},e.init=function(){e.autoReveal()}}(SCM.FirstPagePreview=SCM.FirstPagePreview||{},jQuery);var SCM=SCM||{};!function(r,d,e){function p(e,t,n){for(var i=0;i<e.length;i++){var a=document.createElement("option");a.value=e[i][0],a.text=e[i][1],e[i][0]===n&&a.setAttribute("selected","selected"),t.appendChild(a)}return t}function h(e){for(var t=[],n=queryAll(e),i=0;i<n.length;i++){var a=[];a.push(n[i].getAttribute("data-option")),a.push(n[i].textContent),t.push(a)}return t}function m(){if(App.isNewOnline){d(".issue-view-trigger");var e,t=!1,n=d(".new-online--days"),i={items:8,itemsDesktop:[1199,7],itemsDesktopSmall:[980,5],itemsTablet:[768,5],itemsTabletSmall:[600,3],itemsMobile:[479,3],pagination:!1,navigation:!0,navigationText:["",""],rewindNav:!1},a=function(){t?e.reinit(i):(n.owlCarousel(i),t=!0,e=n.data("owlCarousel"))};r.updateCarousel=debounce(function(){a()},50,!1),App.isMobile||a(),function(){if(App.isNewOnline){var e=scmquery(".year-select-wrap"),t=scmquery(".day-select-wrap"),n=d(".new-online--year.selected").attr("data-option"),i=d(".new-online--day.selected").attr("data-option"),a=document.createElement("select"),r=document.createElement("select");classie.add(a,"year-select"),classie.add(r,"day-select"),e.appendChild(p(h(".new-online--year"),a,n)),t.appendChild(p(h(".new-online--day"),r,i))}}()}}r.init=function(){var t,e,n,i,a,r,s,o,l,c,u;d(".past-issues-trigger, .year-entry, .decade-entry, .nav-journals a:contains(Archives of), .site-link--sub-nav a:contains(Archives of)").on("click",function(){"undefined"!=typeof Storage&&(sessionStorage.dontScrollPastIssue="true")}),App.isPastIssues&&(e=scmquery(".decade-select-wrap"),n=scmquery(".year-select-wrap"),i=scmquery(".issue-select-wrap"),a=d(".decade-entry.selected").attr("data-option"),r=d(".year-entry.selected").attr("data-option"),s=d(".issue-entry.selected").attr("data-option"),o=document.createElement("select"),l=document.createElement("select"),c=document.createElement("select"),classie.add(o,"decade-select"),classie.add(l,"year-select"),classie.add(c,"issue-select"),e.appendChild(p(h(".decade-entry"),o,a)),n.appendChild(p(h(".year-entry"),l,r)),i.appendChild(p(h(".issue-entry"),c,s)),t=d(".issue-browse"),d(".decade-select, .year-select, .issue-select").change(function(){var e=d(this).find("option:selected").attr("value");t.find("[data-option="+e+"]")[0].click()})),App.isNewOnline&&(m(),u=d(".new-online--controls"),d(".year-select, .day-select").change(function(){var e=d(this).find("option:selected").attr("value");u.find("[data-option="+e+"]")[0].click()}))},r.windowLoadInit=function(){!function(){if(App.isPastIssues&&"undefined"!=typeof Storage){if("true"!==sessionStorage.dontScrollPastIssue){var e=d(".issue-pagination").offset().top-106;d("html, body").animate({scrollTop:e},"slow")}sessionStorage.dontScrollPastIssue="false"}}()}}(SCM.IssuePage=SCM.IssuePage||{},jQuery);var App=App||{};!function(ns,$){var FreeCmeRedemptionEnum={NOT_REDEEMED:0,REDEEMED:1,ALREADY_REDEEMED:2},$quizContainer=$(".activity-quiz-view-tabs"),$takeQuizTab=$("#take-quiz-tab"),currentDate=new Date;function checkCmeAcknowledgements(){var t=$(".chk-cme-acknowl"),n=$(".start-quiz");t.change(function(){var e=[];t.each(function(){$(this).is(":checked")?e.push(!0):e.push(!1)}),-1<e.indexOf(!1)?n.addClass("disabled"):n.removeClass("disabled")})}function checkSurveyComplete(){var e=$(".quiz--survey "),t=$(".btn--claim-cme");e.on("change",'input[type="radio"]',function(){2===$('input[type="radio"]:checked').length?t.removeClass("disabled"):t.addClass("disabled")})}function checkAllAnswersAnswered(){var n=$(".btn--submit-quiz");$quizContainer.on("change",".quiz--answer-input",function(){var e=$(".quiz--answer-input:checked").length,t=$(this);App.Quiz.userAnswers[t.attr("data-question-id")]=t.attr("value"),e===App.Quiz.questionCount?n.removeClass("disabled"):n.addClass("disabled")})}function submitAnswers(){$(".btn--submit-quiz").click(function(){var hasUserClaimedCme=!1;if($.ajax({url:"/AMA/HasUserClaimedCme",type:"GET",async:!1,data:{quizId:App.Quiz.quizId},success:function(e){hasUserClaimedCme=e.hasClaimedCme}}),hasUserClaimedCme){var dataValues={quizId:App.Quiz.quizId,creditsClaimed:0,userQuizFeedback:"",hasClaimedCme:!0};$.ajax({url:"/AMA/ClaimedCmeCertificate",data:dataValues,success:function(e){!1!==e&&$takeQuizTab.html(e)}})}else{var userAnswersJson=JSON.stringify(App.Quiz.userAnswers);App.Quiz.endDate=new Date;var modelValues={PassingScore:App.Quiz.passingScore,UserAnswersJson:userAnswersJson,QuizId:App.Quiz.quizId,Credits:App.Quiz.credits,EducationalObjective:App.Quiz.educationalObjective,QuizStartDate:App.Quiz.startDate.toISOString(),QuizEndDate:App.Quiz.endDate.toISOString(),QuizExpireDate:App.Quiz.expireDate.toISOString()};$.ajax({url:"/AMA/ActivityQuizResults",type:"POST",data:modelValues,success:function(e){!1!==e&&$takeQuizTab.html(e)},error:function(xmlHttpRequest,textStatus,errorThrown){if($takeQuizTab.html("This quiz is currently unavailable.  Please try again at a later time."),window.console){var err=eval("("+xmlHttpRequest.responseText+")");console.log("error: "+err),console.log("status: "+textStatus)}}})}})}function returnToQuiz(){$(".btn--return-to-quiz").click(function(){startQuiz()})}function claimCmeCertificate(){$(".btn--claim-cme").on("click",function(){$(this).off("click");var e=$("input[name=ed-objective-score]:checked").val(),t=$("input[name=commercial-bias]:checked").val(),n={quizId:App.Quiz.quizId,creditsClaimed:App.Quiz.credits,userQuizFeedback:e+","+t,controlId:"AMA_ClaimedCmeCertificate"};$.ajax({url:"/AMA/ClaimedCmeCertificate",data:n,success:function(e){!1!==e&&$takeQuizTab.html(e)},error:function(e){$takeQuizTab.html("This quiz is currently unavailable.  Please try again at a later time.")}})})}function scrollToQuizTop(){$(".btn--take-quiz").click(function(){SCM.JSUtility.scrollToLocation("#top")})}function asyncLoadFullArticle(){$("#read-full-article").on("click",function(e){e.preventDefault(),$(".abstract-view, .btn--read-article").hide(),SCM.EventEmitter.subscribe(".AMA-Learning-Activity-Read-Full-Article_LOADED",function(){addthis.toolbox(".figure-table-links")}),App.Quiz.hasFreeCmeAccess&&App.Quiz.expireDate>currentDate&&redeemFreeCmeCredit(),SCM.SharedWidgets.AsyncWidgetLoader.LoadWidget(".AMA-Learning-Activity-Read-Full-Article","data-url","data-params")})}function startQuiz(){App.Quiz.startDate=new Date;var e={quizId:App.Quiz.quizId,credits:App.Quiz.credits,controlId:"AMA_ArticleQuiz_TakeQuiz"};$.ajax({url:"/AMA/TakeActivityQuiz",data:e,success:function(e){!1!==e&&($takeQuizTab.html(e),initQuiz())},error:function(e){$takeQuizTab.html("This quiz is currently unavailable.  Please try again at a later time.")}})}function redeemFreeCmeCredit(){if(App.Quiz.userAccountId){var myObj={resourceId:App.Quiz.quizId,userAccountId:App.Quiz.userAccountId};$.ajax({url:"/AMA/RedeemFreeCmeCredit",data:myObj,success:function(e){e===FreeCmeRedemptionEnum.REDEEMED.toString()&&(window.console&&console.log("Account "+App.Quiz.userAccountId+" has redeemed one free CME credit for quiz "+App.Quiz.quizId),addFreeCmeRedemptionSubscription())},error:function(xmlHttpRequest,textStatus,errorThrown){if(window.console){var err=eval("("+xmlHttpRequest.responseText+")");console.log("error: "+err),console.log("status: "+textStatus)}}})}}function addFreeCmeRedemptionSubscription(){var myObj={resourceId:App.Quiz.quizId,userAccountId:App.Quiz.userAccountId};$.ajax({url:"/AMA/AddFreeCmeRedemptionSubscription",data:myObj,success:function(e){window.console&&console.log("Free CME redemption subscription added for quiz "+App.Quiz.quizId+" to account "+App.Quiz.userAccountId)},error:function(xmlHttpRequest,textStatus,errorThrown){if(window.console){var err=eval("("+xmlHttpRequest.responseText+")");console.log("error: "+err),console.log("status: "+textStatus)}}})}function checkBypassTest(){if(2==App.Quiz.UserQuizStage){var e={PassingScore:App.Quiz.passingScore,QuizId:App.Quiz.quizId,Credits:App.Quiz.credits,EducationalObjective:App.Quiz.educationalObjective,QuizExpireDate:App.Quiz.expireDate.toISOString()};$.ajax({url:"/AMA/ActivityQuizResults",type:"POST",data:e,success:function(e){!1!==e&&$takeQuizTab.html(e)},error:function(e){$takeQuizTab.html("There is an error with this action.  Please try again at a later time.")}})}}function initQuiz(){$(".quiz").owlCarousel({navigation:!0,slideSpeed:300,paginationSpeed:400,singleItem:!0,pagination:!1,navigationText:["",""],rewindNav:!1,autoHeight:!0})}function bindTabEvents(){$(".take-quiz-trigger").click(function(){App.Quiz.hasFreeCmeAccess&&App.Quiz.expireDate>currentDate&&redeemFreeCmeCredit()})}ns.articleQuiz=function(){$(".start-quiz").click(function(){startQuiz()})},ns.init=function(){(App.isQuiz||App.isPlayer)&&(SCM.JSUtility.toggleTabs(".tabs--link-container",".tabs--link",".tabs--tab"),SCM.JSUtility.smoothScrollLinks(),SCM.JSUtility.triggerClickOnAnotherElement(),checkCmeAcknowledgements(),checkBypassTest(),scrollToQuizTop(),ns.articleQuiz(),asyncLoadFullArticle(),bindTabEvents(),App.Quiz.userAnswers={},$(document).ajaxComplete(function(e,t,n){-1<n.url.indexOf("ArticleFullText")&&(SCM.JSUtility.scrollToLocation("#top",700),$(".read-article--user-actions").appendTo(".view-content-tab"),SCM.SiteJS.initLazyLoad(".view-content-tab .lazy")),-1<n.url.indexOf("TakeActivityQuiz")&&(checkAllAnswersAnswered(),submitAnswers()),-1<n.url.indexOf("ActivityQuizResults")&&(returnToQuiz(),claimCmeCertificate(),checkSurveyComplete())}))}}(App.Quiz=App.Quiz||{},jQuery);var App=App||{};if(function(e,t,n){var i=".cme--microsites-dropdown",a=".cme--microsites";e.addIndexToSiteList=function(){var e=0;n(a).find("li").each(function(){n(this).attr("data-index",e),e++})},e.addCorrectSelectedOption=function(){var e=n(a).find(".activeTab").attr("data-index");n(i).find('[data-index="'+e+'"]').attr("selected","selected")},e.quizzesByCourse=function(){n("#divViewByTopic").show(),n(".topicsContainer").show(),n(".topicDetailContainer").hide(),n("#divBreadCrumbs").hide(),n(".browseByYear").hide(),n(".topicTree").hide()},e.init=function(){App.isLearning&&(e.addIndexToSiteList(),e.addCorrectSelectedOption(),t.on("change",i,function(){var e=n(this).find("option:selected").attr("data-index");n(a).find('[data-index="'+e+'"]').find("a")[0].click()}))}}(App.LegacyLearning=App.LegacyLearning||{},jQuery(document),jQuery),App.isJournalArticleCme){var prm=Sys.WebForms.PageRequestManager.getInstance();prm.add_endRequest(function(){App.LegacyLearning.addIndexToSiteList(),App.LegacyLearning.addCorrectSelectedOption(),$("html, body").animate({scrollTop:0},"250")})}var ArtMetric=ArtMetric||{};ArtMetric.fullVersion=function($dest,routeUrl){$.ajax({url:routeUrl,datatype:"HTML",success:function(e){$dest.html(e),setTimeout(function(){if(void 0!==window.ChartistData){ArtMetric.createChart(".ct-chart",window.ChartistData.data,{lineSmooth:!1,showArea:!0,low:0},[["screen and (max-width: 1024px)",{axisX:{labelInterpolationFnc:function(e){return e.slice(0,3)}}}],["screen and (min-width: 1px)",{axisX:{labelInterpolationFnc:function(e){return e.replace(" ","\n")}}}]])}},200),window._altmetric_embed_init()},error:function(xmlHttpRequest,textStatus,errorThrown){if(window.console){var err=eval("("+xmlHttpRequest.responseText+")");console.log("error: "+err),console.log("status: "+textStatus)}}})},ArtMetric.eventsToClose=function(){$(".artmet-modal").on("click",".artmet-close-modal",function(){ArtMetric.closeModal()}),$(".artmet-modal").click(function(){$(event.target).closest(".artmet-modal-contents").length||ArtMetric.closeModal()})},ArtMetric.handleQuestionMark=function(){var e=ArtMetric.altmetricEmbedElement.find("a");0<e.length&&"?"===e.html().trim()&&e.html('<span class="_altmetric_score">0</span>')},$(document).ready(function(){if(ArtMetric.altmetricEmbedElement=$("#altmetricEmbedId"),0<ArtMetric.altmetricEmbedElement.length){var e=0;ArtMetric.altmetricEmbedElement.on("DOMSubtreeModified",function(){4===++e&&ArtMetric.handleQuestionMark()}),setTimeout(ArtMetric.handleQuestionMark,5e3)}});var App=App||{};!function(r,s,o){var l=s(".tab-nav"),c=s(".content-panel"),u=s(".resources-panel");s("body");function d(e,t){e.length&&(App.isDesktop?".tab-nav-full-text"!==t&&e.click():e.click())}App.sectionJumpLinkClicked=!1,r.scrollOverflowElement=function(e,t){var n,i=App.isMag||App.isQuiz||App.isTabletDown?s("html, body"):".tab-nav-full-text"===e?c:u,a=App.isSplitScreen?15:92,r=App.isSplitScreen?function(e,t){switch(e){case".tab-nav-figure-table":return s(t).closest(".figure-table-wrapper");case".tab-nav-references":return App.isSplitScreen?s(".references-wrap").find(t):s(t);case".tab-nav-multimedia":return s(t).closest(".multimedia-item");default:return s(t)}}(e,t):s(t);-1<[".tab-nav-full-text",".tab-nav-figure-table",".tab-nav-multimedia",".tab-nav-references"].indexOf(e)&&(r.length?(n=r.position().top-a,i.animate({scrollTop:n},500),App.scrollQueue=o):App.scrollQueue={tab:e,hash:t})},r.manageAnchorLinks=function(){s(".master-main").on("click",".section-jump-link",function(e){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){s(".lazy").each(function(){var e=s(this);e.attr("src",e.attr("data-original")),this.loaded=!0}),e.preventDefault();var t=s(this),n=this.hash,i=t.attr("data-tab-toggle"),a=s(i);App.isSplitScreen&&(App.sectionJumpLinkClicked=!0,d(a,i)),(App.isMag||App.isQuiz)&&".tab-nav-supplemental"==i&&s("#data-supplements-magazine-reveal").foundation("reveal","open"),App.isSplitScreen&&App.isTabletDown?setTimeout(function(){r.scrollOverflowElement(i,n)},10):(r.scrollOverflowElement(i,n),setTimeout(function(){r.scrollOverflowElement(i,n)},250))}}),s(".master-main").on("click",".artmet-comments-link",function(e){if(App.isSplitScreen){var t=s(this),n=this.hash,i=t.attr("data-tab-toggle");d(s(i),i),App.isTabletDown&&setTimeout(function(){r.scrollOverflowElement(i,n)},10)}})},r.initTabNavigation=function(){if(App.isSplitScreen){var e=".tab-nav-full-text",n=s(".tab-nav-trigger");if(App.lastPositions=App.lastPositions||{},App.isDesktop)for(var t=[".tab-nav-contents",".tab-nav-figure-table",".tab-nav-supplemental",".tab-nav-related"],i=0;i<t.length;i++){var a=scmquery(t[i]);if(a&&!classie.has(a,"tab-no-content")){e=t[i];break}}s(".tab-nav-trigger").click(function(){s(this);var e=n.filter(".target-tab-active").attr("href"),t=App.isTabletDown?s("body"):u;App.lastPositions[e]=t.scrollTop()}),SCM.JSUtility.toggleTabs(".tab-nav",".tab-nav-trigger",".resource-tab",e),function(){function t(){var e=App.isMobile?94:100;l.length&&l.stick_in_parent({parent:".master-main",offset_top:e,recalc_every:10})}App.isSplitScreen&&(t(),SCM.EventEmitter.subscribe("viewport-changed",function(e){l.trigger("sticky_kit:detach"),t()}))}(),App.isSplitScreen&&l.on("click",".tab-nav-trigger",function(){this.className;var e=this.getAttribute("href");"#related-tab"===e&&SCM.JSUtility.equalHeights(".ymal--footer .ymal--item",640);var t=App.isTabletDown?s("html, body"):u,n=function(e){setTimeout(function(){t.animate({scrollTop:e},150)},1)};App.sectionJumpLinkClicked||(App.lastPositions!==o&&App.lastPositions[e]!==o?n(App.lastPositions[e]):n(0)),App.sectionJumpLinkClicked=!1}),l.on("click",".tab-nav-trigger",function(){App.isDesktop?u.trigger("scroll"):s(window).trigger("scroll")}),s(".artmet-comments-link").attr("data-tab-toggle",".tab-nav-comments")}},r.init=function(){App.isSplitScreen&&r.initTabNavigation(),(App.isAnyArticle||App.isQuiz)&&r.manageAnchorLinks()}}(App.SplitScreen=App.SplitScreen||{},jQuery);var App=App||{};!function(e,l,t){var r=l(".register-free-pdf");function s(){if(App.isSearch||App.isLearningSearchResults||App.isLearning||App.isPlayer||App.isQuiz||App.isJournalArticleCme||App.isMyAccount){var e=l(".save-search .save-search-link"),t=l(".save-search .save-search-link-learning"),n=l(".view-edit-searches .view-edit-learning-btn"),i=l("#no-access-reveal-saved-searches"),a=l("#no-access-reveal-saved-searches-learning"),r=l("#save-a-search-modal"),s=l("#save-a-search-learning-modal"),o=l("#view-edit-search-modal");e.click(function(e){e.preventDefault(),App.isIndividual?r.foundation("reveal","open"):i.foundation("reveal","open")}),t.click(function(e){e.preventDefault(),App.isIndividual?s.foundation("reveal","open"):a.foundation("reveal","open")}),l(".view-edit-searches .view-edit-btn").click(function(e){e.preventDefault(),App.isIndividual?o.foundation("reveal","open"):i.foundation("reveal","open")}),l(".view-edit-saved-searches").click(function(e){e.preventDefault(),o.foundation("reveal","open")}),n.click(function(e){e.preventDefault(),App.isIndividual?o.foundation("reveal","open"):a.foundation("reveal","open")})}}e.init=function(){var e,t,n,i,a;e=r.find(".sign-in--create-link"),t=r.find(".sign-in--personal-link"),n=t.attr("href"),i=e.attr("href"),n&&n.indexOf("alert=article")<0&&t.attr("href",n+"?alert=article"),i&&i.indexOf("alert=article")<0&&e.attr("href",i+"?alert=article"),function(){if(App.isAbstract){var t=l(".full-text-link, .toolbar-full-text");t.click(function(){var e=t.attr("data-url");e&&0<e.length?window.location.href=e:SCM.PDFAccess.openNoAccessModalArticle(t,t.attr("data-article-id"))})}}(),s(),0===(a=l("#no-access-reveal")).find(".modal--options").length&&a.removeClass("medium").addClass("small"),l(document).ajaxComplete(function(){s()})}}(App.Access=App.Access||{},jQuery);var App=App||{};!function(e,c,t){c("#toolbar");e.init=function(){App.isSplitScreen&&SCM.JSUtility.removeEmptyTabs(".tab-nav-trigger",["#full-text-tab","#related-tab"],".advertisement, script, .widget-JobsAd, .widget-JobsAd *"),(App.isAbstract||App.isMag)&&function(){var e=c(".toolbar-trigger"),t=e.find(".toolbar-tool").not(".toolbar-share").add(e.find(".toolbar-share-more .toolbar-share"));if(App.isAbstract){var n=c(".abstract-toolbar .toolbar-pdf"),i=c(".pg_abstract .toolbar-trigger .toolbar-pdf-wrap");0===n.length&&i.hide()}if(App.isMag){var a=c(".magazine-toolbar .toolbar-pdf"),r=c(".widget-MagazineView .toolbar-trigger .toolbar-pdf-wrap");0===a.length&&r.hide()}t.click(function(){var e=c(c(this).attr("data-trigger"))[0];e&&e.click()})}(),function(){if("undefined"!=typeof addthis){addthis.update("share","url_transforms",{shorten:{twitter:"bitly"}}),addthis.update("share","shorteners",{bitly:{}});var e=c(".social-share, .toolbar-tool").attr("data-share-title");e&&0<e.length&&addthis.update("share","title",e)}}(),c(".toolbar-share").click(function(){var e=c(this).attr("data-utm-source"),t=c("meta[property='og:url']").attr("content"),n=c("meta[property='og:type']").attr("content");if("quiz"===n.toLowerCase())addthis.update("share","url",t);else{var i=new Date,a=("0"+(i.getMonth()+1)).slice(-2),r=("0"+i.getDate()).slice(-2),s=i.getYear()%100,o=a.concat(r,s),l=t+"?utm_source="+e+"&utm_campaign=content-shareicons&utm_content="+n.toLowerCase()+"_engagement&utm_medium=social&utm_term="+o;addthis.update("share","url",l)}})}}(App.Toolbar=App.Toolbar||{},jQuery);var App=App||{};!function(i,o){i.saveChangesLinkEnabled=!0,i.alertUpdateEvents=function(){o("body").on("click","#publicationSaveChanges",function(){i.saveChangesLinkEnabled&&(o(this).addClass("linkDisabled"),i.saveChangesLinkEnabled=!1,i.postJournalData(),i.saveChangesLinkEnabled=!0)})},i.postJournalData=function(){var e=new Array;o("#journalAddEditDiv input:checked").each(function(){e.push(o(this).val())});var t={JournalAlertsJson:o("#JournalAlertsJson").val(),JournalUpdates:JSON.stringify(e).toString(),SeparateJournalsAlerts:!!o("input#Config_SeparateJournalsAlerts").length&&o("input#Config_SeparateJournalsAlerts").val(),PublishAheadofPrint_FriendlyName:o("input#Config_PublishAheadofPrint_FriendlyName").length?o("input#Config_PublishAheadofPrint_FriendlyName").val():"Advance access",LatestIssue_FriendlyName:o("input#Config_LatestIssue_FriendlyName").length?o("input#Config_LatestIssue_FriendlyName").val():"Latest issue",UpdateFor:0};o("#journalAddEditDiv").foundation("reveal","close"),o.post("/Content/MyEmailAlerts",t,function(e){setTimeout(function(){i.update(e),""!==o.trim(o(".detect-error-message").html())&&o("#journalAddEditDiv").foundation("reveal","open")},200)})},i.update=function(e){var t=o(e).find("#journalsDetails").html();if(t&&t.length){o("div#journalsDetails").html(t);var n=o("#Config_PublicationAlertsLeadText").val();o("p#publicationAlertsLeadText").length&&o("#publicationAlertsLeadText").html(n);var i=o("#Config_NoPublicationAlertsText").val();o("span#noPublicationAlertsText").length&&o("#noPublicationAlertsText").html(i)}var a=o(e).find("#JournalAlertsJson").val();a&&a.length&&o("#JournalAlertsJson").val(a);var r=o(e).find("#journalUpdateDetails").html();r&&r.length&&o("#journalUpdateDetails").html(r);var s=o(e).find(".detect-error-message").html();s&&s.length&&o(".detect-error-message").html(s)},i.postDelete=function(e,t){var n={AlertIdToDelete:e,UpdateFor:t,SeparateJournalsAlerts:!!o("#Config_SeparateJournalsAlerts").length&&o("#Config_SeparateJournalsAlerts").val(),PublishAheadofPrint_FriendlyName:o("#Config_PublishAheadofPrint_FriendlyName").length?o("#Config_PublishAheadofPrint_FriendlyName").val():"Advance access",LatestIssue_FriendlyName:o("#Config_LatestIssue_FriendlyName").length?o("#Config_LatestIssue_FriendlyName").val():"Latest issue",ConfigSiteName:o("#Config_ConfigurableSiteName").length?o("#Config_ConfigurableSiteName").val():""};o.post("/Content/MyEmailAlerts",n,function(e){i.update(e)})},i.init=function(){App.isMyAccount&&i.alertUpdateEvents()}}(App.MyEmailAlerts=App.MyEmailAlerts||{},jQuery);var App=App||{};!function(e,n){e.init=function(){App.isMyAccount&&n("#renewSubs").on("click",function(){var e=n(".chk-renewal:checked").map(function(){return this.value}).get().join("|");if(0<e.length){var t=App.storeUrl+"/cartView.aspx?AddToCart="+e;window.location.href=t}else window.location.href=App.storeUrl})}}(App.MySubscriptions=App.MySubscriptions||{},jQuery);var SCM=SCM||{};!function(m,p){var h=p(window),f=p("body"),e=p(document),g={offset_top:106,recalc_every:10};function v(){App.isMyAccount&&SCM.JSUtility.printPortionOfPage(".my-acct--cme",".cme--create-pdf-year")}function S(e){if(e=e||!1,!App.isMobile||!App.isFreeArticle||e){var t=function(e,t){e.lazyload({skip_invisible:!1,container:t,failure_limit:10,load:function(){p(this).addClass("loaded")}}),e.on("appear",function(){if(!this.loaded){this.loaded=!0;var e=p(this);e.removeClass("lazy-ad"),googletag.cmd.push(function(){googletag.pubads().refresh([App.Ads.slots[e.attr("data-slot")]],{changeCorrelator:!1})})}}),SCM.EventEmitter.publish("AppearTriggerBound")};if(App.isSplitScreen&&App.isDesktop){var n=p(".resources-panel");t(n.find(".lazy-ad"),n)}else t(p(".lazy-ad"),window);App.isSplitScreen&&!App.isFreeArticle&&p("#ad-dual-box-mobile").remove()}}function y(t){jQuery(document).ready(function(e){t?S(t):(SCM.AsyncAds.LoadHeaderAd(".SCM-SharedWidgets-AsyncHeaderAdLoader","data-url","data-params","POST"),SCM.EventEmitter.subscribe("HeaderAdFired",function(){SCM.AsyncAds.LoadAds(".SCM-SharedWidgets-AsyncAdLoader","data-url","data-params","POST")}),SCM.EventEmitter.subscribe("AdFired",function(){S()}))})}function C(){if(!(!App.isSplitScreen||App.isSplitScreen&&App.isMobile)){var t=p("#split-screen-contab");if(""===t.html()){var e={siteName:App.ArticleSplitScreen.siteName,siteId:App.ArticleSplitScreen.siteId,journalId:App.ArticleSplitScreen.journalId,adDisplay:App.ArticleSplitScreen.adDisplay,adSection:App.ArticleSplitScreen.adSection,adPosition:App.ArticleSplitScreen.adPosition,fromGoogle:App.ArticleSplitScreen.fromGoogle,controlId:App.ArticleSplitScreen.controlId,slotLocationOverride:App.ArticleSplitScreen.slotLocationOverride};p.ajax({type:"POST",url:"/AMA/AdTag",data:e,success:function(e){t.empty(),t.html(e),y(!0)},error:function(e,t,n){SCM.JSUtility.logErrors(e,t,n)}})}}}function A(){if(App.isCollection){var t=p("#collection-collex"),e={siteName:App.CollectionResults.siteName,siteId:App.CollectionResults.siteId,journalId:App.CollectionResults.journalId,adDisplay:App.CollectionResults.adDisplay,adSection:App.CollectionResults.adSection,adPosition:App.CollectionResults.adPosition,fromGoogle:App.CollectionResults.fromGoogle,controlId:App.CollectionResults.controlId};p.ajax({type:"POST",url:"/AMA/AdTag",data:e,success:function(e){t.empty(),t.html(e),y(!0)},error:function(e,t,n){SCM.JSUtility.logErrors(e,t,n)}})}}if(m.resizeIframe=function(e){var t,n;document.getElementById&&(t=document.getElementById(e).contentWindow.document.body.scrollHeight,n=document.getElementById(e).contentWindow.document.body.scrollWidth),document.getElementById(e).height=t+"px",document.getElementById(e).width=n+"px"},m.stickSearchFacets=function(){App.isSearch&&p(".facets-inner").stick_in_parent({offset_top:106,recalc_every:10,parent:".search-wrap"})},m.searchFacetsMoreLess=function(){if(App.isSearch||App.isLearningSearchResults){var e=p(".sf-facet-list"),a='<span class="symbol">[+]</span> More';!!scmquery(".facet-more-less")||e.each(function(){var e=p(this),t=e.find(".sf-facet");if(6<t.length){var n=t.slice(6);n.addClass("hide"),e.append('<a href="" class="facet-more-less">'+a+"</a>");var i=e.find(".facet-more-less");i.click(function(e){e.preventDefault(),i.toggleClass("active"),i.hasClass("active")?(i.html('<span class="symbol">[-]</span> Less'),n.removeClass("hide")):(i.html(a),n.addClass("hide"))})}})}},m.equalizeJustPublished=function(){if(App.isJournal){var r=p(".widget-JustPublished"),s=r.find(".article"),t=0,o=function(){s.removeAttr("style")},l=function(e){t=0,e.each(function(){var e=p(this).outerHeight();t<e&&(t=e)}),e.each(function(){p(this).innerHeight(t)})};!function(){if(App.isMobileAlt)o();else{o();for(var e=p(".widget-instance-AMA_ArticleListNewAndPopular_Journal_Research .featured-list--contents li").length,t=1;t<=e;t++){var n=r.find(".article-"+t);l(n)}for(var i=p(".widget-instance-AMA_ArticleListNewAndPopular_Journal_OrigInv .featured-list--contents li").length,a=1;a<=i;a++)l(s)}}()}},m.updateEqualizeJustPublished=debounce(function(){m.equalizeJustPublished()},50,!1),m.updateMyCmeByYear=function(e){p(".my-cme-by-year-ajax-wrap").load("/AMA/MyCme?selectedYear="+e,function(){v()})},m.formatSearchQueryToSaveToLocalStorage=function(e){return e.replace(/(([?|&]{1})?q=[^&]*)/,"").replace(/(([?|&]{1})?page=[^&]*)/,"").replace(/(([?|&]{1})?exPrm_qqq[^&]*)/,"").replace(/(([?|&]{1})?exPrm_hl.q[^&]*)/,"").replace(/(([?|&]{1})?SearchSourceType[^&]*)/,"").replace(/(([?|&]{1})?author[^&]*)/,"").replace(/(([?|&]{1})fl_[^&]*)/g,"").replace(/(([?|&]{1})restypeid=[^&]*)/,"").replace(/(^[?|&])/,"").replace(/(([?|&]{1})appId=[^&]*)/,"")},m.saveDomainCookie=function(e,t,n){document.cookie=e+"="+t+";path=/;domain="+n},m.getCookie=function(e){for(var t=e+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var a=n[i];" "===a.charAt(0);)a=a.substring(1);if(0===a.indexOf(t))return a.substring(t.length,a.length)}return""},m.getGlobalSearchDropdownDisplayValue=function(e){var t=e.split("AND");return 1===t.length?e:App.currentJournalCount===t.length?"Journals":t.length+" Journals"},m.setGlobalSearchDropdownSelectedValue=function(e){var t=p(".site-search-bar .cs-select .cs-placeholder"),n=e.match(/f_JournalDisplayName=([^&]*)/),i=App.isLearningSearchResults?"JN Learning":"Journals",a="";if(n){var r=decodeURI(n[1]).replace(/\+/g," ").replace(/\%26/g,"&");App.isLearningSearchResults?(i="JN Learning",a="L*"):i=m.getGlobalSearchDropdownDisplayValue(r)}t.text(i),0<a.length&&t.attr("data-value",a)},m.initLazyLoad=function(e){e=e||".lazy";var t=function(e,t){e.lazyload({skip_invisible:!1,container:t,failure_limit:10,load:function(){p(this).addClass("loaded")}})};if(App.isSplitScreen&&App.isDesktop){var n=p(".content-panel"),i=p(".resources-panel"),a=n.find(e),r=i.find(e);t(a,n),t(r,i)}else t(p(e),void 0)},m.initFoundation=function(){e.foundation()},m.launchGetCitationModal=function(){p('[data-reveal-id="getCitation"]').click(function(){p("#getCitation").foundation("reveal","open")})},m.initDatePicker=function(){App.isAdvancedSearch&&p("#startDateSemanticSearch, #endDateSemanticSearch, #startDateAuthor, #endDateAuthor").datepicker()},m.shareFiguresAndTables=function(){if(App.isSplitScreen){p.ajaxSetup({cache:!0}),p.getScript("//connect.facebook.net/en_US/sdk.js",function(){FB.init({appId:"{your-app-id}",version:"v2.5"}),p("#loginbutton,#feedbutton").removeAttr("disabled")});p("a.figure-table-social").click(function(){})}},m.getParameterByName=function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n&&n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):""},m.toggleAlertFlagForSignInSignUpUrls=function(e,t,n,i,a){var r=n.attr("href"),s=i.attr("href"),o="alert="+a;if(t.is(":checked")){var l="";if(r.indexOf(o)<0){l=0<m.getParameterByName("return_url",r).indexOf("?")?"&":"?";var c=r+encodeURIComponent(l+o);n.attr("href",c)}if(s.indexOf(o)<0){l=0<m.getParameterByName("return_url",s).indexOf("?")?"&":"?";var u=s+encodeURIComponent(l+o);i.attr("href",u)}}else{var d=/((%3F|%26)alert%3D[^&]*)/,p=n.attr("href").replace(d,""),h=i.attr("href").replace(d,"");n.attr("href",p),i.attr("href",h)}},m.InitializeLiveFilter=function(){p(".pg_featuredtopic").length&&p("#filter_input").fastLiveFilter("#filter_list",{timeout:40})},m.GridListToggle=function(){p(".js-list-view-toggle").click(function(){p(".featured-topics-content_wrap").removeClass("grid-view").addClass("list-view")}),p(".js-grid-view-toggle").click(function(){p(".featured-topics-content_wrap").removeClass("list-view").addClass("grid-view")})},m.commentCharactersRemaining=function(){if(p(".content-form--comment").length){p("textarea").keyup(function(){var e=3600-(e=p(this).val().length);p(".charactersRemaining").text(e)}),p(".comment-form--affiliation input").keyup(function(){var e=200-(e=p(this).val().length);p(this).prev(".char-limit-text").text(e+" characters remaining")}),p(".comment-form--degrees input").keyup(function(){var e=25-(e=p(this).val().length);p(this).prev(".char-limit-text").text(e+" characters remaining")}),p(".comment-form--comment-title input").keyup(function(){var e=140-(e=p(this).val().length);p(this).prev(".char-limit-text").text(e+" characters remaining")})}},m.setArticleToolboxWidths=function(){if(App.isAbstract||App.isMag){var e=p(".abstract-toolbar, .magazine-toolbar").children("div:has(a), a");e.length%2==0?e.each(function(){var e=p(this);e.is("a")?e.css("width","50%"):e.find("a.toolbar-tool").css("width","50%")}):e.last().css("width","100%")}},m.linkedContentToolbarDisplay=function(){p("div.linked-content-controls").length&&setTimeout(function(){p(this).closest(".linked-content-controls .tab-no-content").length<2&&p(".trigger-text").addClass("visuallyhidden")},3e3)},m.trendMDtitle=function(){p("#trendmd-suggestions").length&&(p("#trendmd-suggestions").prev(".thm-col-sec").addClass("js-TMDtitle-display"),p("#trendmd-suggestions").bind("DOMSubtreeModified",function(){p("#trendmd-suggestions").prev(".thm-col-sec").removeClass("js-TMDtitle-display")}))},"object"==typeof localStorage)try{localStorage.setItem("localStorage",1),localStorage.removeItem("localStorage")}catch(e){Storage.prototype._setItem=Storage.prototype.setItem,Storage.prototype.setItem=function(){},alert('Your web browser does not support storing settings locally. In Safari, the most common cause of this is using "Private Browsing Mode". Some settings may not save or some features may not work properly for you.')}m.init=function(){var i,e,t;if(p(".js-showAll").click(function(e){e.preventDefault(),p(".open-close-all").find(".collapsible-list-header").each(function(){p(this).next().hasClass("collapsible-list-target-is-active")||p(this).trigger("click")})}),p(".js-hideAll").click(function(e){e.preventDefault(),p(".open-close-all").find(".collapsible-list-header").each(function(){p(this).next().hasClass("collapsible-list-target-is-active")&&p(this).trigger("click")})}),m.initFoundation(),function(){if(App.isJournal||App.isNetworkHome){var e=p(".editors-choice").find(".widget-SelfServeContent");if(e.find("*").length<10){var t=e.text();0===(void 0!==t?p.trim(t):1).length&&p(".movable-ad-target").prepend(p(".movable-ad"))}}(App.isIssue||App.isMag||App.isSplitScreen&&App.isFreeArticle||App.isCollection)&&p(".movable-ad-target").last().prepend(p(".movable-ad"))}(),m.initLazyLoad(),y(),jQuery(document).ready(function(){SCM.AsyncAds.LoadJobsAd(".SCM-SharedWidgets-AsyncJobsAdLoader","data-url","data-params","POST")}),App.isAnyArticle&&0===p(".widget-ToolboxPermissions").length&&(p(".toolbar-citation").addClass("permissions-hidden"),p(".toolbar-permissions-wrap").hide()),App.isMag&&!scmquery(".article-pdf-only")&&p(".article-full-text > p").first().html(function(e,t){return t.replace(/^[^a-zA-Z0-9'"<]*([a-zA-Z0-9])/g,'<span class="drop-cap">$1</span>')}),App.isAbstract&&p(".article-content > .full-text-link").stick_in_parent(g),App.isMag&&p(".social-share").stick_in_parent(g),m.stickSearchFacets(),App.isNetworkHome&&SCM.JSUtility.toggleHoverState(".site-link.has-sub-nav"),m.searchFacetsMoreLess(),SCM.EventEmitter.subscribe("viewport-changed",function(){googletag.pubads().refresh(App.Ads.slots,{changeCorrelator:!1})}),App.isAnyArticle&&p(".errata-links.retracted").length&&p(".content-panel, .article-content").addClass("is-retracted-article"),function(){if(App.isSplitScreen){var e=p(".footer"),t=p(".content-panel");e.appendTo(t)}}(),function(){if(App.isSplitScreen){var e=p(".ad-riser--dismiss"),t=e.closest(".ad-riser-wrap");e.click(function(){t.addClass("closed")})}}(),v(),i=["?",".",":",";",","],p(".issue-view-tab .article--title a .subtitle").each(function(e,t){var n=t.previousSibling.textContent.slice(-1);-1<i.indexOf(n)&&p(t).addClass("subtitle-no-colon")}),SCM.JSUtility.toggleVisibility(),SCM.JSUtility.accordion(),m.GridListToggle(),m.commentCharactersRemaining(),m.setArticleToolboxWidths(),m.linkedContentToolbarDisplay(),m.trendMDtitle(),App.isSplitScreen){SCM.JSUtility.addStateToggle(".toolbar-share-more-link",".toolbar-share-more"),SCM.EventEmitter.subscribe("HeaderAdFired",function(){C()}),SCM.EventEmitter.subscribe("viewport-changed",function(){C()});var n=p(".toolbar .toolbar-pdf"),a=p(".toolbar .toolbar-pdf-wrap");0===n.length&&a.hide()}if(App.isCollection&&(SCM.EventEmitter.subscribe("HeaderAdFired",function(){A()}),SCM.EventEmitter.subscribe("viewport-changed",function(){A()})),(App.isAbstract||App.isMag)&&SCM.JSUtility.addStateToggle(".toolbar-trigger .toolbar-share-more-link",".toolbar-trigger .toolbar-share-more"),App.isAbstract&&SCM.FirstPagePreview.init(),(App.isJournal||App.isIssue)&&SCM.JSUtility.toggleTabs(".most--links",".most--trigger",".most--tab",".most-viewed-trigger"),App.isSearch||App.isLearningSearchResults){SCM.JSUtility.addStateToggle("#narrow-filter",".search-facets",void 0,!0,!0);var r=App.isLearningSearchResults,s=App.isLearningContent||App.isMyAccount?"ActiveSavedLearningSearch":"ActiveSavedJournalSearch";App.isIndividual||m.saveDomainCookie(s,"",document.domain);var o=m.getCookie(s);if(""===o){var l=p(".selected-save-search"),c=p(".selected-save-search-txt"),u=p(".save-search-link");c.text(""),l.hide(),u.show()}r=App.isLearningSearchResults?"persistentLearningSearchFilters":"persistentSearchFilters";if(document.referrer.indexOf("/advanced-search")<0&&""===o){var d=m.formatSearchQueryToSaveToLocalStorage(window.location.search);m.saveDomainCookie(r,d,document.domain),SCM.SiteJS.saveDomainCookie("currentJournalCount",App.currentJournalCount,document.domain)}}m.equalizeJustPublished(),function(){if(App.isAnyArticle){SCM.JSUtility.toggleTabs(".linked-content-controls",".linked-content-trigger",".linked-content-tab",".doesnt-exist-tab",!0),SCM.JSUtility.removeEmptyTabs(".linked-content-trigger");var e=p(".linked-content-controls"),t=p(".linked-content-toolbar");e.children().not(".tab-no-content").length&&t.addClass("activated"),h.click(function(e){p(e.target).closest(".linked-content-toolbar").length||(p(".linked-content-trigger").removeClass("target-tab-active"),p(".linked-content-tab").removeClass("tab-active"))})}}(),App.isAnyArticle&&scmquery(".article-pdf-only")&&f.addClass("is-backfile"),e=".collapsible-list-header",t=".collapsible-list-target",$container=p(".collapsible-list"),$trigger=p(e),$target=p(t),$trigger.next($target).attr("aria-hidden",!0),$trigger.click(function(e){e.preventDefault();var t=p(this),n="true"!==t.attr("aria-selected");t.next($target).toggleClass("collapsible-list-target-is-active"),t.attr("aria-selected",n),$target.next().attr("aria-hidden",!n)}),p(".collapsible .collapsible-header").each(function(){var e=p(this),t="collapsible-"+e.index();e.nextUntil(".collapsible-header").wrapAll('<div id="'+t+'" class="collapsible-content" aria-hidden="true">');var i=e.next();e.wrapInner('<button aria-expanded="false" aria-controls="'+t+'">'),e.children("button").on("click",function(e){e.preventDefault();var t=p(this),n="false"===t.attr("aria-expanded");t.attr("aria-expanded",n),i.attr("aria-hidden",!n)})}),App.isLearning&&p(".clone-target").append(p(".clone-source").clone()),p(document).ajaxComplete(function(){(App.isAbstract||App.isSplitScreen)&&App.isFreeArticle&&S(!0)})},m.windowLoadInit=function(){m.initDatePicker(),m.launchGetCitationModal(),m.shareFiguresAndTables(),m.InitializeLiveFilter(),function(){if(App.isQuiz){var e=App.Global.queryParameters().quiz;null!=e&&(window.location.hash="#q"+e),questionHash=window.location.hash,questionHashNumber=questionHash.indexOf("#"),questionHashFinal=questionHash.substring(questionHashNumber+1);var t=p('a[name="'+questionHashFinal+'"]');p(t).next().addClass("highlighted"),p("html, body").animate({scrollTop:p(t).offset().top-106},500)}}(),function(){if(App.isMag){var t=p("#magazine-bta");if(!App.isMobile||App.isFreeArticle){var e={siteName:App.MagazineView.siteName,siteId:App.MagazineView.siteId,journalId:App.MagazineView.journalId,adDisplay:App.MagazineView.adDisplay,adSection:App.MagazineView.adSection,adPosition:App.MagazineView.adPosition,fromGoogle:App.MagazineView.fromGoogle,controlId:App.MagazineView.controlId};p.ajax({type:"POST",url:"/AMA/AdTag",data:e,success:function(e){t.empty(),t.html(e),y(!0)},error:function(e,t,n){SCM.JSUtility.logErrors(e,t,n)}})}else t.remove()}}()}}(SCM.SiteJS=SCM.SiteJS||{},jQuery),function(i,e,t,n){t.ready(function(){App.Toolbar.init(),App.SplitScreen.init(),SCM.SiteJS.init(),App.Global.init(),SCM.PDFAccess.init(),App.ArticleTopInfo.init(),App.Access.init(),SCM.SolrSearch.init(),SCM.IssuePage.init(),App.Quiz.init(),App.LegacyLearning.init(),App.MySubscriptions.init(),App.Collection.init(),App.Learning.init(),App.SearchAutoComplete.init(),SCM.InstitutionOpenUrl.init(),App.UserComment.init(),App.MyEmailAlerts.init(),SCM.gdprCookieBanner.init()}),e.load(function(){SCM.SiteJS.windowLoadInit(),App.Global.windowLoadInit(),SCM.IssuePage.windowLoadInit()}),e.on("resize",function(){App.updateAppVariables(),App.notifyViewportChange(),SCM.SiteJS.updateEqualizeJustPublished()}),t.ajaxComplete(function(e,t,n){SCM.SiteJS.initFoundation(),(App.isSearch||App.isLearningSearchResults)&&(SCM.SiteJS.searchFacetsMoreLess(),SCM.SiteJS.stickSearchFacets(),-1<n.url.indexOf("SearchResults")&&SCM.SiteJS.initLazyLoad(".search-results .lazy"),App.isLearningSearchResults&&(SCM.SiteJS.initLazyLoad(".learning--search-results .lazy"),SCM.EventEmitter.publish("LearningSearchImageBound"))),-1<n.url.indexOf("PersonalizedContent")&&(setTimeout(function(){(App.isAbstract||App.isCollection||App.isMag)&&i(".widget-PersonalizedContent").each(function(){0<i(this).find(".ymal--content").length&&i(this).addClass("loaded")})},500),!App.supportsFlexbox&&App.isJournal&&0===i(".no-equal-heights").length&&"jamanetworkopen"!=i("body").data().sitename&&SCM.JSUtility.equalHeights(".journal-contents .ymal--item",640),App.supportsFlexbox||!App.isAnyArticle&&!App.isIssue||SCM.JSUtility.equalHeights(".ymal--footer .ymal--item",640))})}(jQuery,jQuery(window),jQuery(document)),window.dataLayer=window.dataLayer||[],SCM=SCM||{},SCM.AMA=SCM.AMA||{};var getValue=function(e,t){if("array"===t){var n=e.split(","),i=[];return n.forEach(function(e){var t=removeExtraTags(decodeURIComponent(e.trim()));""!==t&&i.push(t)}),0===i.length?"":i}return removeExtraTags(decodeURIComponent(e))},removeExtraTags=function(e){var t=e.replace(/<(.*)>.*<\/(.*)>/gi,"");return t=(t=t.replace(/&#?(([0-9a-z]){1,4});/gi,"")).replace(/  /g," ")};SCM.AMA.DataLayer=function(r){return{ExecuteDataLayer:function(){var a={};r(".tagmanagervalue").each(function(){var e=r(this),t=e.data("value"),n=e.data("type"),i=getValue(t,n);""!==i&&(a[e.data("attribute")]=i)});var e=n(".figure-table-wrapper",".figure-label",".figure-title");0<r.trim(e).length&&(a.arrArticleFigures=e.map(function(e){return removeExtraTags(e.trim())}));var t=n(".figure-table-wrapper",".table-label",".table-title");0<r.trim(t).length&&(a.arrArticleTables=t.map(function(e){return removeExtraTags(e.trim())}));return a.event="page view",a}};function n(e,n,i){var a=[];return jQuery(e).each(function(){var e=r(this).find(n).html(),t=r(this).find(i).html();void 0===e&&void 0===t||(void 0===e?a.push(t):void 0===t?a.push(e):a.push(e+" "+t))}),a}}(jQuery),function(e,t){e.push=function(e,t,n){var i={},a=getValue(t,n);a&&(i[e]=a,dataLayer.push(i))}}(SCM.AMA.DataLayerAsync=SCM.AMA.DataLayerAsync||{},jQuery),$("document").ready(function(){var e=SCM.AMA.DataLayer.ExecuteDataLayer();dataLayer.push(e)});var App=App||{},SCM=SCM||{};SCM.CollectionFacets={},SCM.CollectionFacets.defaults={controller:"Solr",action:"ArticleBrowseSearchResults",instanceName:"AMA_ArticleBrowseSearchResults",updateTargetSelector:"#collection--topic-search"},function(e,g){var v=g("#dropdown-journal .dropdown-chk-item").length,S=g("#dropdown-article-type .dropdown-chk-item").length,a=g(".save-preferences-confirm");function y(){g(".drop-selected-journal").on("click",function(e){e.stopPropagation(),g("#dropdown-article-type").hide(),g("#dropdown-journal").toggle("show")}),g(".drop-selected-article-type").on("click",function(e){e.stopPropagation(),g("#dropdown-journal").hide(),g("#dropdown-article-type").toggle("show")}),g(document).on("click",function(e){var t=g(".dropdown-content");t.is(e.target)||0!==t.has(e.target).length||t.hide()}),g(".btn-apply-journal-facets, .btn-apply-article-type-facets").on("click",function(e){e.preventDefault();var t=function(){for(var e=g("#dropdown-journal .dropdown-chk-item:checked"),t=g("#dropdown-article-type .dropdown-chk-item:checked"),n=/(page=[^&]*)/,i=/(f_JournalDisplayName=[^&]*[&]?)/,a=/(f_ArticleTypeDisplayName=[^&]*[&]?)/,r=m(e),s=m(t),o=r.join("AND"),l=s.join("AND"),c="",u=g("#dropdown-journal .dropdown-chk-item")[0],d=g(u).data("url").split("&"),p=0;p<d.length;p++){var h=d[p].replace(n,"").replace(i,"").replace(a,"");""!==h&&(c+="&"+h)}c="?"+c.substring(1),!b(e.length,v)&&0<o.length&&(c+="&f_JournalDisplayName="+o);!b(t.length,S)&&0<l.length&&(c+="&f_ArticleTypeDisplayName="+l);return c}();window.location.href=t}),g("#dropdown-journal .dropdown-item, #dropdown-article-type .dropdown-item").on("click",function(e){var t=g(this).parent().attr("id");if(0<=t.indexOf("dropdown-journal")){var n=g("#dropdown-journal .dropdown-chk-item:checked"),i=g("#dropdown-journal-checkall"),a=g("#dropdown-journal-uncheckall");l(n,v,i,a)}else if(0<=t.indexOf("dropdown-article-type")){var r=g("#dropdown-article-type .dropdown-chk-item:checked"),s=g("#dropdown-article-type-checkall"),o=g("#dropdown-article-type-uncheckall");l(r,S,s,o)}}),g("#dropdown-journal-checkall, #dropdown-article-type-checkall").on("click",function(){var e=g(this).attr("id");g(this).is(":checked")?0<e.indexOf("journal")?(g("#dropdown-journal-uncheckall").prop("checked",!1),g("#dropdown-journal .dropdown-item input:checkbox").prop("checked",!0)):0<e.indexOf("article-type")&&(g("#dropdown-article-type-uncheckall").prop("checked",!1),g("#dropdown-article-type .dropdown-item input:checkbox").prop("checked",!0)):0<e.indexOf("journal")?g("#dropdown-journal .dropdown-item input:checkbox").prop("checked",!1):0<e.indexOf("article-type")&&g("#dropdown-article-type .dropdown-item input:checkbox").prop("checked",!1)}),g("#dropdown-journal-uncheckall, #dropdown-article-type-uncheckall").on("click",function(){var e=g(this).attr("id");g(this).is(":checked")&&(0<e.indexOf("journal")?(g("#dropdown-journal-checkall").prop("checked",!1),g("#dropdown-journal .dropdown-item input:checkbox").prop("checked",!1)):0<e.indexOf("article-type")&&(g("#dropdown-article-type-checkall").prop("checked",!1),g("#dropdown-article-type .dropdown-item input:checkbox").prop("checked",!1)))}),g("#searchedTerm .close").on("click",function(){var e=window.location.search.replace(/(([?|&]{1})q=[^&]*)/,"");window.location.href="?"+e.substring(1)})}function l(e,t,n,i){e.length===t?(n.prop("checked",!0),i.prop("checked",!1)):0<e.length&&e.length<t?(n.prop("checked",!1),i.prop("checked",!1)):0===e.length&&(i.prop("checked",!0),n.prop("checked",!1))}function m(e){var t=[];if(0<e.length)for(var n=0;n<=e.length-1;n++){var i=g(e[n]).data("title");if(0<i.length){var a=i.replace(/( \([0-9]*\))/,"").replace(/\s/g,"+");-1===t.indexOf(a)&&t.push(encodeURI(a).replace("&",encodeURIComponent("&")))}}return t}function C(e,t,n,i){if(e){var a=n;1===t.length?a=g(t[0]).data("title"):1<t.length&&t.length<i&&(a="Multiple Selected"),e.text()!==a&&e.text(a.replace(/( \([0-9]*\))/,""))}}function A(){g("#tbAbsrSolrSearch").keydown(function(e){if(13===e.keyCode){var t=g("#tbAbsrSolrSearch").val().trim();null===t||""===t?alert("Please enter a term to perform search"):function(e,t){e.preventDefault();var n=window.location.search,i=n.indexOf("q=");if(-1<i){var a=n.indexOf("&",i);n=(n=-1===a?n.substring(0,i):n.substring(0,i)+n.substring(a+1)).replace(/[\?&]$/,"")}if(0===n.length){var r=g("h1:first").find(".header--name").text();n="?fl_ContentType=Article&fl_Categories="+encodeURIComponent(r)}0<t.length&&(n+="&q="+t);window.location=n}(e,t=encodeURIComponent(t))}})}function b(e,t){return e===t}function t(){var e=[];g(".category-list-item.followed").each(function(){e.push(g(this).data("categoryid"))});var t=g(".follow-link").data("categoryid"),n=!1;t||(t=g(".unfollow-link").data("categoryid"),n=!0),g.ajax({url:"/AMA/UpdateMultipleCollectionFollowStatus",type:"POST",data:{currentPageCategoryId:t||0,isFollowed:n,categoryIdsToUpdate:e.toString()},success:function(e){e&&(g(".collection-follow-links").parent().html(e),function(){var e=g("#weeklyAlert"),t=g("#monthlyAlert");if(0<e.length&&0<t.length){var n=e.is(":checked"),i=t.is(":checked");g.ajax({url:"/AMA/UpdateManageInterestUserAlerts",type:"POST",data:{signupForWeeklyAlert:n,signupForMonthlyAlert:i},success:function(e){if(e.Success){var t=g(".save-preferences-confirm");0<t.length&&t.show()}},error:function(e){alert("Cannot update alert(s) at this time.")}})}}(),g(".manage-interests-modal").foundation("reveal","close")),o(),w()},error:function(e){alert("Cannot update collection follow status, please try again")}})}var n=!1;e.bindEvents=function(){n||w()};var i,r,s=[];function o(){s=[],g(".manage-interests--categories").find(".followed").each(function(){s.push(g(this).data("categoryid"))}),i=g("input#weeklyAlert").prop("checked"),r=g("input#monthlyAlert").prop("checked")}function c(){var e=g(".manage-interests--categories").find(".followed");e.removeClass("followed"),e.parent("li").prop("style",""),null!=i&&g("input#weeklyAlert").prop("checked",i),null!=r&&g("input#monthlyAlert").prop("checked",r);for(var t=0;t<s.length;t++){var n=s[t];g(".manage-interests--categories").find(".category-list-item[data-categoryid="+n+"]").addClass("followed")}}function w(){n=!0,o(),g(".follow-link, .unfollow-link").off("click"),g("#no-access-follow-collection--alerts-input").off("change"),g(".sign-in--personal a, .sign-in--create a").off("click"),g(".manage-interests-link").off("click"),g(".manage-interests-link-no-access").off("click"),g(".category-list-item").off("click"),g(".manage-interests--save-preferences .save-preferences-btn").off("click"),g(".alert-input input").off("click"),g(".follow-link, .unfollow-link").on("click",function(e){e.preventDefault(),App.isIndividual?x(g(this)):(g("#no-access-follow-collection").foundation("reveal","open"),u())}),g("#no-access-follow-collection--alerts-input").on("change",function(){u()}),g(".sign-in--personal a, .sign-in--create a").on("click",function(e){e.preventDefault();var t=g(this).attr("href");App.Global.addJnLogoParamToRefererUrl(),window.location=t}),g(".manage-interests-link").on("click",function(e){e.preventDefault(),c(),g(".manage-interests-modal").foundation("reveal","open"),g(".followed").parent().css("list-style-type","disc").css("color","#000")}),g(".manage-interests-link-no-access, .affinity-alert-signup").on("click",function(e){(e.preventDefault(),App.isIndividual)?(c(),g(".manage-interests-modal").foundation("reveal","open"),g(".followed").parent().css("list-style-type","disc").css("color","#000")):(g("#no-access-follow-collection").foundation("reveal","open"),u())}),g(".category-list-item").on("click",function(e){var t=g(this),n=t.parent();t.toggleClass("followed"),t.hasClass("followed")?n.css("list-style-type","disc").css("color","#000"):n.css("list-style-type","circle").css("color","#ccc");var i=g(".manage-interests--save-preferences .save-preferences-btn");i.hasClass("enabled")||i.addClass("enabled"),0<a.length&&a.hide()}),g(".manage-interests--save-preferences .save-preferences-btn").on("click",function(e){g(this).hasClass("enabled")&&t()}),g(".alert-input input").on("click",function(e){var t=g(".manage-interests--save-preferences .save-preferences-btn");t.hasClass("enabled")||t.addClass("enabled"),0<a.length&&a.hide()})}function u(){var e=g("#no-access-follow-collection"),t=e.find("#no-access-follow-collection--alerts-input"),n=e.find(".sign-in--create-link"),i=e.find(".sign-in--personal-link");SCM.SiteJS.toggleAlertFlagForSignInSignUpUrls(e,t,n,i,"collection")}function x(e){var n=e.data("categoryid");g.ajax({url:"/AMA/UpdateCollectionFollowStatus",type:"POST",data:{categoryId:n,isFollowed:e.hasClass("follow-link")},success:function(e){if(!1!==e){g(".collection-follow-links").parent().html(e),g(".manage-interests-modal").find("[data-categoryid='"+n+"']").toggleClass("followed");var t=g(".manage-interests--save-preferences");t.hasClass("enabled")||t.addClass("enabled"),w()}},error:function(e){alert("Cannot update collection follow status, please try again")}})}e.setInitialCategories=function(){c()},e.toggleCollectionAlertSignupFlag=function(){u()},e.init=function(e){if(w(),App.isCollection||App.isSplitScreen||App.isMyAccount){var t,n,i,a,r,s=(t="",(n=window.location.search.match(/[?|&]{1}q=([^&]*)/))&&(t=decodeURIComponent(n[1])),t);if(i=s,a=g("#tbAbsrSolrSearch"),r=g("#searchedTerm"),0<i.length?(a.hide(),r.show(),r.html('<span class="btn">'+i+'<a href="#" class="close">X</a></span>')):(a.show(),r.hide()),y(),A(),SCM.JSUtility.addStateToggle("#narrow-filter",".collection-facets--wrap",void 0,!0,!0),0<=document.referrer.indexOf("/jamanetworkopen")){var o=g("#facet-jama-network-open");0<o.length&&(o.prop("checked",!0),C(g(".drop-selected-journal"),[o],"All Journals",v))}else{var l=g("#dropdown-journal .dropdown-chk-item:checked"),c=g("#dropdown-article-type .dropdown-chk-item:checked"),u=window.location.search,d=-1===u.indexOf("JournalDisplayName"),p=-1===u.indexOf("ArticleTypeDisplayName"),h=d||b(l.length,v),m=p||b(c.length,S);d&&g("#dropdown-journal .dropdown-item input:checkbox").prop("checked",!0),h&&g("#dropdown-journal-checkall").prop("checked",!0),p&&g("#dropdown-article-type .dropdown-item input:checkbox").prop("checked",!0),m&&g("#dropdown-article-type-checkall").prop("checked",!0),C(g(".drop-selected-journal"),l,"All Journals",v),C(g(".drop-selected-article-type"),c,"All Article Types",S)}var f=g(".follow-link");if(App.isIndividual&&0<f.length&&(0<document.referrer.indexOf("/login/account/")||0<document.referrer.indexOf("/oauthsignin"))&&x(f),App.isMyAccount)g(".followed").parent().css("list-style-type","disc").css("color","#000")}}}(App.Collection=App.Collection||{},jQuery);var SCM=SCM||{};SCM.AsyncAds=SCM.AsyncAds||{},SCM.AsyncAds=function(){return{LoadHeaderAd:loadHeaderAd,LoadAds:loadAds,LoadCollectionAds:loadCollectionAds,LoadJobsAd:loadJobsAd};function loadAds(elementClass,elementAttrUrl,elementAttrParams,requestType){var domItems=$(elementClass),totalAds=domItems.length,firedAds=0;domItems.each(function(index,element){var domObj=$(this),dataUrl=domObj.attr(elementAttrUrl),dataParams=domObj.attr(elementAttrParams),params=buildParameters(dataParams);$.ajax({url:dataUrl,data:params,type:requestType,success:function(e){domObj.parent().replaceWith(e),++firedAds===totalAds&&SCM.EventEmitter.publish("AdFired")},error:function(xmlHttpRequest,textStatus,errorThrown){if(window.console){var err=eval("("+xmlHttpRequest.responseText+")");console.log("error: "+err),console.log("status: "+textStatus)}}})})}function loadHeaderAd(elementClass,elementAttrUrl,elementAttrParams,requestType){var domItems=$(elementClass);domItems.each(function(){var domObj=$(this),dataUrl=domObj.attr(elementAttrUrl),dataParams=domObj.attr(elementAttrParams),params=buildParameters(dataParams);$.ajax({url:dataUrl,data:params,type:requestType,success:function(e){domObj.parent().replaceWith(e),SCM.EventEmitter.publish("HeaderAdFired")},error:function(xmlHttpRequest,textStatus,errorThrown){if(window.console){var err=eval("("+xmlHttpRequest.responseText+")");console.log("error: "+err),console.log("status: "+textStatus)}}})})}function loadCollectionAds(elementClass,elementAttrUrl,elementAttrParams,requestType){var domItems=$(elementClass),totalAds=domItems.length,firedAds=0;domItems.each(function(index,element){var domObj=$(this),dataUrl=domObj.attr(elementAttrUrl),dataParams=domObj.attr(elementAttrParams),params=buildParameters(dataParams);$.ajax({url:dataUrl,data:params,type:requestType,success:function(e){domObj.parent().replaceWith(e),++firedAds===totalAds&&SCM.EventEmitter.publish("CollectionAdsFired")},error:function(xmlHttpRequest,textStatus,errorThrown){if(window.console){var err=eval("("+xmlHttpRequest.responseText+")");console.log("error: "+err),console.log("status: "+textStatus)}}})})}function loadJobsAd(elementClass,elementAttrUrl,elementAttrParams,requestType){var domItems=$(elementClass);domItems.each(function(index,element){var domObj=$(this),dataUrl=domObj.attr(elementAttrUrl),dataParams=domObj.attr(elementAttrParams),params=buildParameters(dataParams);$.ajax({url:dataUrl,data:params,type:requestType,success:function(e){domObj.parent().replaceWith(e)},error:function(xmlHttpRequest,textStatus,errorThrown){if(window.console){var err=eval("("+xmlHttpRequest.responseText+")");console.log("error: "+err),console.log("status: "+textStatus)}}})})}function buildParameters(e){var t=JSON.parse(e),n=t.parameters,i=t.dynamicParameters;if(void 0!==i&&void 0!==i.localParams&&"[REPLACE_WITH_LOCAL]"===i.localParams){var a=SCM.SharedWidgets.UserPersonalization.GetFromLocalStorage();i.localParams=a,n.Items=JSON.stringify(a)}return n}}();var App=App||{};!function(e,t,l){function n(){var t="/learning/searchresults?hd=learning&allJournals=1";l(".learn-by-credit").on("click",".more--btn",function(e){e.preventDefault(),window.location.href=t+"&f_HasCME=true"}),l(".learn-by-audio").on("click",".more--btn",function(e){e.preventDefault(),window.location.href=t+"&f_ContentType=Audio"}),l(".learn-by-video").on("click",".more--btn",function(e){e.preventDefault(),window.location.href=t+"&f_ContentType=Video"}),l(".learn-by-topic").on("click",".topic-suggestion",function(e){e.preventDefault(),window.location.href=t+"&f_Categories="+encodeURI(this.text)}),l(".learning-next-activity-viewer").on("click",".learning-next-activity-nav",function(e){e.preventDefault();var t=l(this);!function(e,t,n){if($previousLink=l(".learning-next-activity-nav.previous"),$previousLink.removeClass("disabled"),0==e)$previousLink.addClass("disabled");else{var a=e<t?0:e-t;$previousLink.attr("data-activityindex",a)}$nextLink=l(".learning-next-activity-nav.next"),$nextLink.removeClass("disabled"),n<=e+t?$nextLink.addClass("disabled"):$nextLink.attr("data-activityindex",e+t);var r="rowItem-";for($allResults=l(".learning.next-activity"),$allResults.addClass("hide"),i=1;i<=t;i++){var s=r+i;$allResults.removeClass(s)}var o=n<e+t?n:e+t;for(e=o-t<0?0:o-t,$allResults.slice(e,o).removeClass("hide"),i=e;i<o;i++){var s=r+(i-e+1);$allResults.eq(i).addClass(s)}}(parseInt(t.attr("data-activityindex")),parseInt(t.attr("data-displaysize")),parseInt(t.attr("data-total")))})}e.init=function(){App.isLearningContent&&n()}}(App.Learning=App.Learning||{},jQuery(document),jQuery);var App=App||{};!function(e,l){App.UserCommentConstants={},App.UserCommentConstants={limitedTextClassSelector:".comment-item--text-limited",readMoreLinkClassSelector:".comment-item--read-more-link",remainingCommentClassSelector:".comment-item--text-remaining",disclosureClassSelector:".comment-item--disclosure-collapse",expandAllCollapseLinkClassSelector:".comment-expand-all",separatorClassSelector:".comment-item--separator-collapse",commentBtnClassSelector:".comment-btn",noAccessRevealModalIdSelector:"#no-access-reveal",disclosureInputClassSelector:".disclosure-input",noAccessModalIdSelector:"#no-access-user-comments",accessibleShowClass:"accessible-show",ellipsisClass:"ellipsis",expandAllText:"EXPAND ALL",collapseText:"COLLAPSE",readLessText:"READ LESS",readMoreText:"READ MORE",isChecked:"is-checked",checked:"checked",potentialConflicts:"potentialConflicts"};var c=l(".comment-form-modal"),u=l(App.UserCommentConstants.disclosureInputClassSelector),a=c.find("#Title"),r=c.find("#Comment"),s=c.find(".submit-errors"),d=l(".submit-error-list"),i=l(".please-wait"),o=l("#divCommentSubmissionModal");function t(e){var t=e.text(),n=e.hasClass("comment-expand-all"),i=e.hasClass("comment-item--read-more-link"),a=i?e.parent():"",r={limitedText:n?l(App.UserCommentConstants.limitedTextClassSelector):a.find(App.UserCommentConstants.limitedTextClassSelector),readMoreLink:n?l(App.UserCommentConstants.readMoreLinkClassSelector):e,remainingComment:n?l(App.UserCommentConstants.remainingCommentClassSelector):a.find(App.UserCommentConstants.remainingCommentClassSelector),disclosure:n?l(App.UserCommentConstants.disclosureClassSelector):a.find(App.UserCommentConstants.disclosureClassSelector),separator:n?l(App.UserCommentConstants.separatorClassSelector):a.find(l(App.UserCommentConstants.separatorClassSelector)),expandAllCollapseLink:n?e:l(App.UserCommentConstants.expandAllCollapseLinkClassSelector),isExpandAllCollapseLink:n,isReadMoreLink:i};t===App.UserCommentConstants.expandAllText||t===App.UserCommentConstants.readMoreText?function(e){e.isExpandAllCollapseLink&&e.expandAllCollapseLink.text(App.UserCommentConstants.collapseText);e.limitedText.removeClass(App.UserCommentConstants.ellipsisClass),e.remainingComment.addClass(App.UserCommentConstants.accessibleShowClass),e.separator.addClass(App.UserCommentConstants.accessibleShowClass),e.disclosure.addClass(App.UserCommentConstants.accessibleShowClass),e.readMoreLink.text(App.UserCommentConstants.readLessText),e.isReadMoreLink&&l(App.UserCommentConstants.readMoreLinkClassSelector).text().indexOf(App.UserCommentConstants.readMoreText)<0&&e.expandAllCollapseLink.text(App.UserCommentConstants.collapseText)}(r):(t===App.UserCommentConstants.collapseText||App.UserCommentConstants.readLessText)&&function(e){e.isExpandAllCollapseLink&&e.expandAllCollapseLink.text(App.UserCommentConstants.expandAllText);e.limitedText.addClass(App.UserCommentConstants.ellipsisClass),e.remainingComment.removeClass(App.UserCommentConstants.accessibleShowClass),e.separator.removeClass(App.UserCommentConstants.accessibleShowClass),e.disclosure.removeClass(App.UserCommentConstants.accessibleShowClass),e.readMoreLink.text(App.UserCommentConstants.readMoreText),e.isReadMoreLink&&e.expandAllCollapseLink.text()===App.UserCommentConstants.collapseText&&e.expandAllCollapseLink.text(App.UserCommentConstants.expandAllText)}(r)}function n(){var e=l(".comment-form-submit-btn"),t=c.find(l(".author-name")).text(),n=c.find(l("input#Degrees")).val();t+=""!==n?", "+n:"",l.ajax({type:"POST",url:"/Content/SubmitUserComment",data:{author:t,affInstitutions:c.find(l("input#AffInstitution")).val(),disclosure:c.find(l("input#Disclosure")).val(),title:c.find("input#Title").val(),comment:c.find("textarea#Comment").val(),articleId:c.find(e).data("id"),recaptchaChallenge:"",recaptchaResponse:"",instanceName:c.find(e).data("instance")},success:function(e){e.Success?(l(".comment-form-modal").hide(),l(App.UserCommentConstants.commentBtnClassSelector).show(),function(){c.find("input, textarea").val(""),l("input[type='radio']").data(App.UserCommentConstants.isChecked,!1).prop(App.UserCommentConstants.checked,!1),u.hide(),d.empty();var e=c.find("textarea"),t=c.find(".comment-form--affiliation input"),n=c.find(".comment-form--degrees input"),i=c.find(".comment-form--comment-title input"),a=e.attr("maxlength"),r=t.attr("maxlength"),s=n.attr("maxlength"),o=i.attr("maxlength");c.find(".charactersRemaining").text(a),t.prev(".char-limit-text").text("Limit "+r+" characters"),n.prev(".char-limit-text").text("Limit "+s+" characters"),i.prev(".char-limit-text").text("Limit "+o+" characters")}()):alert("Comments not saved.  Please Try Again."),i.hide(),o.foundation("reveal","open")},error:function(e){i.hide(),alert("Comments not saved.  Please Try Again.")}})}function p(){var e=l("#no-access-user-comments"),t=e.find("#no-access-user-comments--alerts-input"),n=e.find(".sign-in--create-link"),i=e.find(".sign-in--personal-link");SCM.SiteJS.toggleAlertFlagForSignInSignUpUrls(e,t,n,i,"article")}function h(){l(".comment-expand-all, .comment-item--read-more-link").on("click",function(e){e.preventDefault(),t(l(this))}),l("#modal-opener").on("click",function(){App.isIndividual?(l(App.UserCommentConstants.commentBtnClassSelector).hide(),c.show(),l(".toolbar-comments-jumplink").attr("href","#user-comments-modal")):(l(App.UserCommentConstants.noAccessModalIdSelector).foundation("reveal","open"),p())}),l(".disclosure-radio label").on("click",function(e){e.preventDefault();var t=l("#"+l(this).attr("for")),n=t.attr("name");t.data(App.UserCommentConstants.isChecked)||(t.data(App.UserCommentConstants.isChecked,!0),t.prop(App.UserCommentConstants.checked,!0).change()),n===App.UserCommentConstants.potentialConflicts&&t.data(App.UserCommentConstants.isChecked)?u.show():u.hide(),l("input[type='radio']").not("#"+l(this).attr("for")).data(App.UserCommentConstants.isChecked,!1).prop(App.UserCommentConstants.checked,!1)}),l(".comment-form-submit-btn").on("click",function(e){e.preventDefault(),function(){var e=!0,t="";d.empty();var n=l("#potentialConflicts"),i=l("#noConflicts");return n.is(":checked")||i.is(":checked")?n.is(":checked")&&""===l("input#Disclosure").val().trim()&&(t+="<li>Describe your Conflict of Interest</li>",e=!1):(t+="<li>Conflicts of Interest Disclosure</li>",e=!1),""===a.val().trim()&&(t+="<li>Comment Title</li>",e=!1),""===r.val().trim()&&(t+="<li>Comment</li>",e=!1),e||""===t?s.hide():(d.append(t),s.show()),e}()&&(i.show(),n())}),l(".toolbar-comments, .artmet-comments-link").on("click",function(e){var t,n=this.href.split("#")[1];e.preventDefault(),(App.isAbstract||App.isMag)&&(t=l("#"+n).offset().top-106,l("html, body").animate({scrollTop:t},500)),App.isIndividual&&l("#"+n).click()}),l(".content-comment-link").on("click",function(e){e.preventDefault(),l(".tab-nav-comments").click(),App.isIndividual&&l("#modal-opener").click()}),l("#no-access-user-comments--alerts-input").on("change",function(){p()})}e.init=function(){App.isAnyArticle&&h()}}(App.UserComment=App.UserComment||{},jQuery);var App=App||{};!function(e,r,c){var t=window.location.protocol+"//"+window.location.host,n=c("#hfSolrAutoSuggestMinimumCharactersLength").val(),u="JN Learning",d="Journals";function s(e,t){return function(){t.apply(e,arguments)}}function i(e,t,n,i,a){this.searchInputControlId=document.getElementById(e),this.searchInputHintControlId=document.getElementById(t),this.autoCompleteResultsControlId=document.getElementById(n),this.isMicrosite=i,null!==a?(this.siteFilterDropDownSelectID=document.getElementById(a),this.siteFilterDropDownSelectID&&this.siteFilterDropDownSelectID.addEventListener("change",s(this,this.filterSuggestions),!1)):this.siteFilterDropDownSelectID=!1,null!==this.searchInputControlId&&(this.searchInputControlId.addEventListener("keydown",s(this,this.interceptKeys),!1),this.searchInputControlId.addEventListener("input",r.debounce(s(this,this.evaluateTerms),250),!1),c(this.searchInputControlId).on("blur",s(this,this.hideResultsList)),c(this.searchInputControlId).on("focus",s(this,this.showResultsList)))}(i.prototype={solrUrl:"/solr/SolrAutoSuggest",baseURL:t,inputTerms:!1,termsArray:!1,baseTerms:!1,terms:!1,results:[],selectedResult:-1,contentID:!1,isSearching:!1,noResultsFound:!1}).filterSuggestions=function(){this.selectedResult=-1,this.inputTerms.length>=n&&this.getSuggestions()},i.prototype.evaluateTerms=function(){if(this.resetSelection(),this.inputTerms=this.searchInputControlId.value.toLowerCase(),0===this.inputTerms.length)return this.noResultsFound=!1,this.isSearching=!1,void this.resetAutoComplete();this.inputTerms.length>=n&&(0===this.results.length||-1===this.results[0].value.indexOf(this.inputTerms))&&!this.isSearching&&this.getSuggestions(),(this.terms.length<=1||this.searchInputControlId.value!==this.inputTerms)&&this.clearHint()},i.prototype.getJournalURL=function(e,t,n){return"f_JournalDisplayName="+encodeURIComponent(e.trim())+t+(n?"&"+n:"")},i.prototype.getLearningURL=function(e,t){return t?t+e:"hd=learning&allJournals=1"+e+"&f_HasCME=true"},i.prototype.getSearchParams=function(){var e="&SearchSourceType=24",t="",n="",i="",a="";if(this.siteFilterDropDownSelectID){var r=c("#"+this.siteFilterDropDownSelectID.id+" option:selected").text(),s=c(".cs-placeholder").text(),o=r===d&&s!==u||r!==s&&s!==u||r===s&&r!==u,l=r===u||r!==s&&s===u;return t=o?"persistentSearchFilters":"persistentLearningSearchFilters",(n=SCM.SiteJS.getCookie(t))&&(i=n.replace(/(([?|&]{1})?f_JournalDisplayName[^&]*([&]{1})?)/,"").replace(/(([?|&]{1})?allJournals[^&]*([&]{1})?)/,"")),l?a=this.getLearningURL(e,i):o&&r!==s?a=this.getJournalURL(s,e,i):o&&r!==d?a=this.getJournalURL(r,e,i):(i&&(i="&"+i),a="allJournals=1"+e+i),a}return"allJournals=1"+e},i.prototype.getJournalID=function(){var e=this.contentID;return e&&"j"===e.toLowerCase().substring(0,1)&&(e=e.substring(1)),e},i.prototype.getJournalJID=function(){var e=!1;if(this.siteFilterDropDownSelectID){var t=c(this.siteFilterDropDownSelectID,"option:selected").attr("value");-1===t.indexOf("*")&&(e=t)}return e},i.prototype.getSuggestions=function(){var n=this;n.contentID=n.getJournalJID(),n.isSearching=!0,c.ajax({url:n.solrUrl,data:n.contentID?{searchTerm:n.inputTerms,JournalID:n.getJournalID()}:{searchTerm:n.inputTerms},success:function(e){var t=e.SemanticFilterTopics;n.isSearching=!1,0<t.length?n.formatSuggestions(t):(n.noResultsFound=!0,n.resetAutoComplete())},cache:!0})},i.prototype.formatSuggestions=function(e){var t=e;this.results=[];var n=c("#"+this.siteFilterDropDownSelectID.id+" option:selected").text(),i=c(".cs-placeholder").text(),a="";if(0<t.length)if(this.inputTerms&&-1!==t[0].Key.indexOf(this.inputTerms)){for(var r=0;r<t.length;r+=1){var s=this.baseURL;a=n===u||n!==i&&i===u?"/learning/searchresults?q=":"/searchresults?q=";var o={value:t[r].Key,url:s+a+encodeURIComponent(t[r].Key)+"&"+this.getSearchParams(),position:"sr"+this.autoCompleteResultsControlId.id+(r+1)};this.results.push(o)}this.setHint(t[0].Key),this.appendResults()}else this.noResultsFound||this.inputTerms||this.getSuggestions();else this.resetAutoComplete()},i.prototype.setHint=function(e){this.searchInputControlId.value===this.inputTerms&&(this.searchInputHintControlId.value=e)},i.prototype.clearHint=function(){this.searchInputHintControlId.value=""},i.prototype.appendResults=function(){var e="";"term-list"!==this.autoCompleteResultsControlId.className&&(this.autoCompleteResultsControlId.className="term-list");for(var t=0;t<this.results.length;t++){var n=this.results[t];e+='<li><a href="'+n.url+'" id="'+n.position+'">'+this.results[t].value+"</a></li>"}this.autoCompleteResultsControlId.innerHTML=e},i.prototype.hideResultsList=function(e){var t=this;setTimeout(function(){t.autoCompleteResultsControlId.className="term-list term-list--hidden"},200)},i.prototype.showResultsList=function(){this.autoCompleteResultsControlId.className="term-list"},i.prototype.resetResultsList=function(e){this.autoCompleteResultsControlId.innerHTML="",this.hideResultsList()},i.prototype.resetSelection=function(){var e=-1!==this.selectedResult&&this.results[this.selectedResult].position;e&&c("#"+e).removeClass("active"),this.selectedResult=-1},i.prototype.resetAutoComplete=function(){this.results=[],this.resetResultsList(),this.clearHint()},i.prototype.completeTerms=function(){var e=this.searchInputControlId.selectionStart,t=this.searchInputControlId.selectionEnd;e===t&&t===this.inputTerms.length&&this.results&&0<this.results.length&&(this.searchInputControlId.value=this.results[0].value,this.evaluateTerms())},i.prototype.navigateResults=function(e){var t,n=this.selectedResult+e;oldResultId=-1!==this.selectedResult&&this.results[this.selectedResult].position,n<this.results.length&&-1<n?(t=this.results[n].position,oldResultId&&c("#"+oldResultId).removeClass("active"),c("#"+t).addClass("active"),this.selectedResult+=e):!oldResultId&&0<this.results.length?(t=this.results[this.results.length-1].position,c("#"+t).addClass("active"),this.selectedResult=this.results.length-1):this.resetSelection()},i.prototype.keyFunctions=function(e,t){if(9===t&&(e.preventDefault(),this.completeTerms()),38===t&&(e.preventDefault(),this.navigateResults(-1)),40===t&&(e.preventDefault(),this.navigateResults(1)),13===t&&-1<this.selectedResult){e.preventDefault();var n=c("#"+this.autoCompleteResultsControlId.id+" .active").attr("href");this.searchInputControlId.value=c("#"+this.autoCompleteResultsControlId.id+" .active").text(),this.searchInputHintControlId.value=c("#"+this.autoCompleteResultsControlId.id+" .active").text(),window.location=n}},i.prototype.interceptKeys=function(e){this.searchInputControlId.value.toLowerCase().length<=255&&this.keyFunctions(e,e.keyCode)},e.init=function(){c.browser.msie&&"8.0"===c.browser.version?(c("#umbrellaSiteSearchInputHint").hide(),c("#umbrellaSiteAutoCompleteResults").hide()):new i("search-term","umbrellaSiteSearchInputHint","umbrellaSiteAutoCompleteResults",!1,"BodyContent_Header_ddlForSearch")}}(App.SearchAutoComplete=App.SearchAutoComplete||{},SCM.JSUtility,jQuery),launchTermsModal=function(){$(".js-tdm-content__action-button").click(function(){$("html").css("overflow","hidden"),$("#termsAndConditionsModal").foundation("reveal","open"),setTimeout(function(){$(".js-accept-trigger").appendTo(".js-terms-text__scrollable"),$("a.js-accept-input").addClass("disabled").removeClass("checked"),$(".download-link-wrap").addClass("hidden"),$(".js-terms-text__scrollable").scroll(function(){$.each($(".js-accept-trigger"),function(e,t){var n,i,a,r,s,o,l,c;n=$(t),i=!0,a=$(".js-terms-text__scrollable"),r=a.height(),a.scrollTop(),s=$(n).offset().top-a.offset().top,o=s+$(n).height(),l=0<=s&&o<=r,c=(s<0&&0<o||0<s&&s<=a.height())&&i,(l||c)&&$("a.js-accept-input").removeClass("disabled")})}),$("a.js-accept-input").click(function(){$(this).addClass("checked"),$(this).closest(".term-accept__row").next(".download-link-wrap").removeClass("hidden")})},100)})},jQuery.fn.fastLiveFilter=function(e,r){r=r||{},e=jQuery(e);var t,s=this,n="",i=r.timeout||0,o=r.callback||function(){},l=r.type||"filter",c=e.children(),u=c.length,d=0<u?c[0].style.display:"block";if(o(u),"search"===l)for(var a=0;a<u;a++)c[a].style.display="none";return s.change(function(){for(var e,t,n=s.val().toLowerCase(),i=0,a=0;a<u;a++)e=c[a],t=r.selector?$(e).find(r.selector).text():e.textContent||e.innerText||"","search"!==l||0<n.trim().length?0<=t.toLowerCase().indexOf(n)?("none"==e.style.display&&(e.style.display=d),i++):"none"!=e.style.display&&(e.style.display="none"):e.style.display="none";return o(i),!1}).keydown(function(){clearTimeout(t),t=setTimeout(function(){s.val()!==n&&(n=s.val(),s.change())},i)}),this},$("#filter_input").fastLiveFilter("#filter_list"),$(document).ready(function(){launchTermsModal(),$(".js-filter-toggle").click(function(e){e.stopPropagation(),$(".fast-search").toggleClass("open"),$(".fast-search").hasClass("open")&&$("#filter_input").focus()}),$(document.body).on("click",function(e){var t=$(e.target);$(".fast-search.open").hasClass("open")&&0==t.parents(".fast-search-input__wrap").length&&$(".fast-search").removeClass("open")}),$(document.body).on("click",function(e){var t=$(e.target);$("#termsAndConditionsModal.open").hasClass("open")&&0==t.parents(".reveal-modal").length&&$("html").css("overflow","auto")}),$(".tdm_filter_name").each(function(){$(this).on("click",function(e){var t=$(this).parent().data("search"),n=!1;"*"==t&&(n=!0),$(".tdm-content__content-row").each(function(){$(this).hasClass(t)||n?$(this).show():$(this).hide()})})}),$(".js-tdm-content__action-button").each(function(){$(this).click(function(){$("#tcDownloadLink").attr("href",$(this).attr("data-downloadurl"))})})}),$(".close-reveal-modal").on("click",function(){$("html").css("overflow","auto")});
//# sourceMappingURL=app.min.js.map
