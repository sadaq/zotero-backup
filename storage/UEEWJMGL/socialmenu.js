/*!  rd_templatepackage_3 2018-08-30 Build: 3.2.3.8 */

function isTouchDevice(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch}function initShareMenu(){window.clearInterval(checkForShareMenu);var e;is2x?(imagePath="/TemplatePackage/images/social/",syndicateImage='<img src="/TemplatePackage/images/social/add_to_site.png" alt="'+v_addthistoyoursite+'" />',e=socialMediaContainer):e=socialMediaShareContainer,socialShareButton.attr("src","/TemplatePackage/3.0/images/social/addthis-32.png").show(),$("a.share_button span").remove(),void 0!==$(e).data("url")&&(v_href=$(e).data("url"));var t,a;""===v_img&&(a=$("#contentArea img")).length&&a.each(function(){if(t=new Image,t.src=a.attr("src"),t.width>=500&&t.height>=300)return v_img=t.src,!1});var i='<ul class="dd-menu">';!1!==$(e).data("twitter")&&(i+='<li><a href="#twitter" data-metrics-source="twitter"><img class="twitter" src="'+imagePath+'twitter-16.png" alt="Share via '+v_twitter+'" />'+v_twitter+"</a></li>"),!1!==$(e).data("facebook")&&(i+='<li><a href="#facebook" data-metrics-source="facebook"><img class="facebook" src="'+imagePath+'facebook-16.png" alt="Share via '+v_facebook+'" />'+v_facebook+"</a></li>"),!1!==$(e).data("pinterest")&&""!==v_img&&(i+='<li><a href="#pinterest" data-metrics-source="pinterest"><img class="pinterest" src="'+imagePath+'pinterest-16.png" alt="Share via '+v_pinterest+'" />'+v_pinterest+"</a></li>"),!1!==$(e).data("linkedin")&&(i+='<li><a href="#linkedin" data-metrics-source="linkedin"><img class="linkedin" src="'+imagePath+'linkedin-16.png" alt="Share via '+v_linkedin+'" />'+v_linkedin+"</a></li>"),!1!==$(e).data("email")&&(i+='<li><a href="#email" data-metrics-source="email"><img class="email" src="'+imagePath+'email-16.png" alt="Share via '+v_email+'" />'+v_email+"</a></li>"),!1!==$(e).data("digg")&&(i+='<li><a href="#digg" data-metrics-source="digg"><img class="digg" src="'+imagePath+'digg-16.png" alt="Share via '+v_digg+'" />'+v_digg+"</a></li>"),!1!==$(e).data("syndication")&&(i+='<li><a href="https://tools.cdc.gov/medialibrary/index.aspx#/sharecontent/" data-metrics-source="syndication">'+syndicateImage+v_addthistoyoursite+"</a></li>"),i+="</ul>",$("a.share_button_facebook").attr("href",populateShareMenuLinkParams("facebook")).attr("rel","nofollow").attr("target","_blank").data("metrics-source","facebook-button"),$("a.share_button_twitter").attr("href",populateShareMenuLinkParams("twitter")).attr("rel","nofollow").attr("target","_blank").data("metrics-source","twitter-button"),$("a.share_button_facebook, a.share_button_twitter").bind("click touchend",function(e){recordMetrics(("SPAN"===e.target.tagName.toUpperCase()?$(e.target).parent():$(e.target)).data("metrics-source"))}),socialMediaShareContainer.addClass("dd"),socialMediaContainer.addClass("dd"),$(".share_button").addClass("dd-toggle").after($(i)),$('.dd-menu a[href^="#"]').each(function(e,t){var a=$(t).attr("href");$(t).attr("href",populateShareMenuLinkParams(a).replace("#","")).attr("rel","nofollow").attr("target","_blank")}),$('.dd-menu a[href*="tools.cdc.gov"]').each(function(){this.href+=v_href}).attr("rel","nofollow").attr("target","_blank")}function recordMetrics(e){if("undefined"==typeof s)return!1;var t=location.href,a=t.indexOf("#");a>0&&(t=t.substring(0,a)),$("#metrics").append($('<img height="1" width="1" border="0" alt="Web Analytics" class="analytics" />').attr("src",httpProto+"//tools.cdc.gov/metrics.aspx?reportsuite=cdcsynd&c5="+($("html.esp").length>0?"spa":"eng")+"&channel="+s.channel+"&c8=Social%20Media%20Buttons&c66="+escape(s.pageName)+"&c67="+e+"&contenttitle=Social%20Media%20Button%20Page"))}function populateShareMenuLinkParams(e){var t=httpProto+"//api.addthis.com/oexchange/0.8/forward/"+e+"/offer?url="+v_href,a=$('meta[name="twitter:domain"]').attr("content");if(e.indexOf("twitter")>-1&&a){var i=encodeURIComponent(a);return(t=httpProto+"//api.addthis.com/oexchange/0.8/forward/"+e+"/offer?url="+i)+"&title="+v_title+"&description="+v_desc+"&via="+v_via+"&ct="+allowClickTrack+"&media="+v_img+"&screenshot="+v_img}return e.indexOf("facebook")>-1?t+"&title="+v_title+"&description="+v_desc+"&via="+v_via+"&ct="+allowClickTrack+"&media="+v_img:e.indexOf("pinterest")>-1?""!==v_img?"https://www.pinterest.com/pin/create/button/?url="+v_href+"&media="+v_img+"&description="+v_desc+"&hashtags="+v_hash:"https://www.pinterest.com/pin/create/button/?url="+v_href+"&description="+v_desc+"&hashtags="+v_hash:t+"&title="+v_title+"&description="+v_desc+"&via="+v_via+"&ct="+allowClickTrack+"&media="+v_img}if(!window.console)var console={log:function(){},warn:function(){},error:function(){},time:function(){},timeEnd:function(){}};CDC.SocialMenu=CDC.SocialMenu||{};var allowClickTrack,encodeText,facebookAppID,esp,v_href,v_title,v_desc,v_img,v_via,socialMediaContainer,socialMediaShareContainer,socialShareButton;allowClickTrack=0,encodeText=!1,facebookAppID=0xbb1354aed4be,esp=$("html.esp, body.esp").length,v_href=encodeURIComponent($("link[rel='canonical']").attr("href")||location.href),v_title=$('meta[property="og:title"]').attr("content")||encodeURIComponent(document.title),v_desc=$('meta[property="og:description"]').attr("content")||"",v_img=$('meta[property="og:image"]').attr("content")||"",v_hash="",v_via="CDCgov",socialMediaContainer=$("#socialMediaContainer"),socialMediaShareContainer=$("#socialMediaShareContainer"),socialShareButton=$("a.share_button img"),httpProto=window.location.protocol;var v_twitter,v_facebook,v_pinterest,v_linkedin,v_email,v_digg,v_addthistoyoursite;v_twitter="Twitter",v_facebook="Facebook",v_pinterest="Pinterest",v_linkedin="LinkedIn",v_email=esp?"Correo":"Email",v_digg="Digg",v_addthistoyoursite=esp?"Agregar ese sitio":"Add this to your site",encodeText&&(v_title=encodeURIComponent(v_title),v_desc=encodeURIComponent(v_desc),v_img=encodeURIComponent(v_img));var is2x,is3x,idx=0,max=100,imagePath="/TemplatePackage/3.0/images/social/",syndicateImage='<i class="sprite-24-syndicate"></i>',checkForShareMenu=window.setInterval(function(){is2x=socialMediaContainer.length,is3x=$("#socialMediaShareContainer").length,(is2x||is3x)&&initShareMenu(),idx++,window.clearInterval(checkForShareMenu)},100),arr=[],config={selector:".dd",toggle:"dd-toggle",open:"dd-open",menu:".dd-menu"},isTouch=isTouchDevice()||$("html.touch").length?1:0,link="",dragging=!1;$(document).bind("touchstart",function(){dragging=!1}),$(document).bind("touchmove",function(){dragging=!0}),$(document).bind("click touchend",function(e){if(!dragging)if(arr.length)if(arr[arr.length-1].find(e.target).length){link=$(e.target).attr("href");var t=$(e.target).data("metrics-source");if(isTouch){if(link&&0!==link.indexOf("#"))return arr.pop().removeClass(config.open),recordMetrics(t),window.open(link,"_blank"),!1;if(arr.pop().removeClass(config.open),!link)return!1}else{if(arr.pop().removeClass(config.open),!link)return!1;recordMetrics(t)}}else arr.length&&arr.pop().removeClass(config.open);else{var a=$(e.target);if(a.hasClass(config.toggle)||a.parent().hasClass(config.toggle)){e.preventDefault();var i=a.hasClass(config.toggle)?a:a.parent();$(config.menu).css({position:"absolute",left:i.position().left,top:i.position().top+32}),(a=a.closest(config.selector)).hasClass(config.open)?arr.pop().removeClass(config.open):arr.push(a.addClass(config.open))}}}),$(window).resize(function(){dragging||arr.length&&arr.pop().removeClass(config.open)});
//# sourceMappingURL=socialmenu.js.map